(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{8511:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Crypto:()=>nX,CryptoKey:()=>rD});var i,n,o,a,s,c,u,l,h,d,f,p,y,g,m,v,b,w,_,S,A,E,k,O,P,x,C,B,R,j,I,T,U,M,N,K,H={};r.r(H),r.d(H,{Any:()=>tm,BaseBlock:()=>eS,BaseStringBlock:()=>eE,BitString:()=>eL,BmpString:()=>e7,Boolean:()=>eN,CharacterString:()=>tu,Choice:()=>tv,Constructed:()=>ej,DATE:()=>td,DateTime:()=>tp,Duration:()=>ty,EndOfContent:()=>eT,Enumerated:()=>eJ,GeneralString:()=>tc,GeneralizedTime:()=>th,GraphicString:()=>ta,HexBlock:()=>eg,IA5String:()=>to,Integer:()=>eV,Null:()=>eU,NumericString:()=>tt,ObjectIdentifier:()=>eY,OctetString:()=>eH,Primitive:()=>eO,PrintableString:()=>tr,RawData:()=>tw,RelativeObjectIdentifier:()=>eQ,Repeated:()=>tb,Sequence:()=>e0,Set:()=>e1,TIME:()=>tg,TeletexString:()=>ti,TimeOfDay:()=>tf,UTCTime:()=>tl,UniversalString:()=>te,Utf8String:()=>e5,ValueBlock:()=>ev,VideotexString:()=>tn,ViewWriter:()=>X,VisibleString:()=>ts,compareSchema:()=>t_,fromBER:()=>eC,verifySchema:()=>tS});var D=r(152);function L(e,t){let r=0;if(1===e.length)return e[0];for(let i=e.length-1;i>=0;i--)r+=e[e.length-1-i]*Math.pow(2,t*i);return r}function z(e,t,r=-1){let i=r,n=e,o=0,a=Math.pow(2,t);for(let r=1;r<8;r++){if(e<a){let e;if(i<0)e=new ArrayBuffer(r),o=r;else{if(i<r)return new ArrayBuffer(0);e=new ArrayBuffer(i),o=i}let a=new Uint8Array(e);for(let e=r-1;e>=0;e--){let r=Math.pow(2,e*t);a[o-e-1]=Math.floor(n/r),n-=a[o-e-1]*r}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function $(...e){let t=0,r=0;for(let r of e)t+=r.length;let i=new Uint8Array(new ArrayBuffer(t));for(let t of e)i.set(t,r),r+=t.length;return i}function W(){let e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let t=255===e[0]&&128&e[1],r=0===e[0]&&(128&e[1])==0;(t||r)&&this.warnings.push("Needlessly long format")}let t=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let e=0;e<this.valueHex.byteLength;e++)t[e]=0;t[0]=128&e[0];let r=L(t,8),i=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let t=0;t<this.valueHex.byteLength;t++)i[t]=e[t];return i[0]&=127,L(i,8)-r}function F(e){let t=e<0?-1*e:e,r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){let e=z(r-t,8,i),n=new Uint8Array(e);return n[0]|=128,e}let n=z(t,8,i),o=new Uint8Array(n);if(128&o[0]){let e=n.slice(0),t=new Uint8Array(e);o=new Uint8Array(n=new ArrayBuffer(n.byteLength+1));for(let r=0;r<e.byteLength;r++)o[r+1]=t[r];o[0]=0}return n}r*=256}return new ArrayBuffer(0)}function V(e,t){if(e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}function J(e,t){let r=e.toString(10);if(t<r.length)return"";let i=t-r.length,n=Array(i);for(let e=0;e<i;e++)n[e]="0";return n.join("").concat(r)}function G(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function q(e){let t=0,r=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let i=new Uint8Array(t);for(let t=0;t<e.length;t++){let n=e[t];i.set(new Uint8Array(n),r),r+=n.byteLength}return i.buffer}function Y(e,t,r,i){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):i<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-i<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class X{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return q(this.items)}}let Z=[new Uint8Array([1])],Q="0123456789",ee="name",et="valueHexView",er="isHexOnly",ei="idBlock",en="tagClass",eo="tagNumber",ea="isConstructed",es="fromBER",ec="toBER",eu="local",el="",eh=new ArrayBuffer(0),ed=new Uint8Array(0),ef="EndOfContent",ep="OCTET STRING",ey="BIT STRING";function eg(e){var t;return(t=class extends e{constructor(...e){var t;super(...e);let r=e[0]||{};this.isHexOnly=null!==(t=r.isHexOnly)&&void 0!==t&&t,this.valueHexView=r.valueHex?D._H.toUint8Array(r.valueHex):ed}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){let i=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!Y(this,i,t,r))return -1;let n=t+r;return(this.valueHexView=i.subarray(t,n),this.valueHexView.length)?(this.blockLength=r,n):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",eh)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:D.U$.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class em{constructor({blockLength:e=0,error:t=el,warnings:r=[],valueBeforeDecode:i=ed}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=D._H.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:D.U$.ToHex(this.valueBeforeDecodeView)}}}em.NAME="baseBlock";class ev extends em{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ev.NAME="valueBlock";class eb extends eg(em){constructor({idBlock:e={}}={}){var t,r,i,n;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?D._H.toUint8Array(e.valueHex):ed,this.tagClass=null!==(r=e.tagClass)&&void 0!==r?r:-1,this.tagNumber=null!==(i=e.tagNumber)&&void 0!==i?i:-1,this.isConstructed=null!==(n=e.isConstructed)&&void 0!==n&&n):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",eh}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){let r=z(this.tagNumber,7),i=new Uint8Array(r),n=r.byteLength,o=new Uint8Array(n+1);if(o[0]=31|t,!e){for(let e=0;e<n-1;e++)o[e+1]=128|i[e];o[n]=i[n-1]}return o.buffer}let r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){let e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){let i=D._H.toUint8Array(e);if(!Y(this,i,t,r))return -1;let n=i.subarray(t,t+r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&n[0])==32,this.isHexOnly=!1;let o=31&n[0];if(31!==o)this.tagNumber=o,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&n[e];){if(t[e-1]=127&n[e],++e>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){let e=new Uint8Array(r+=255);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&n[e];let i=new Uint8Array(e);for(let r=0;r<e;r++)i[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(i),this.blockLength<=9?this.tagNumber=L(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}eb.NAME="identificationBlock";class ew extends em{constructor({lenBlock:e={}}={}){var t,r,i;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(r=e.longFormUsed)&&void 0!==r&&r,this.length=null!==(i=e.length)&&void 0!==i?i:0}fromBER(e,t,r){let i=D._H.toUint8Array(e);if(!Y(this,i,t,r))return -1;let n=i.subarray(t,t+r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;let o=127&n[0];if(o>8)return this.error="Too big integer",-1;if(o+1>n.length)return this.error="End of input reached before message was fully decoded",-1;let a=t+1,s=i.subarray(a,a+o);return 0===s[o-1]&&this.warnings.push("Needlessly long encoded length"),this.length=L(s,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(this.longFormUsed){let i=z(this.length,8);if(i.byteLength>127)return this.error="Too big length",eh;if(t=new ArrayBuffer(i.byteLength+1),e)return t;let n=new Uint8Array(i);(r=new Uint8Array(t))[0]=128|i.byteLength;for(let e=0;e<i.byteLength;e++)r[e+1]=n[e];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}ew.NAME="lengthBlock";let e_={};class eS extends em{constructor({name:e=el,optional:t=!1,primitiveSchema:r,...i}={},n){super(i),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new eb(i),this.lenBlock=new ew(i),this.valueBlock=n?new n(i):new ev(i)}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}toBER(e,t){let r=t||new X;t||eA(this);let i=this.idBlock.toBER(e);if(r.write(i),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{let t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;let i=this.lenBlock.toBER(e);r.write(i),r.write(t)}return t?eh:r.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():D.U$.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${D.U$.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){return this===e||e instanceof this.constructor&&V(this.toBER(),e.toBER())}}function eA(e){if(e instanceof e_.Constructed)for(let t of e.valueBlock.value)eA(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}eS.NAME="BaseBlock";class eE extends eS{constructor({value:e=el,...t}={},r){super(t,r),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}eE.NAME="BaseStringBlock";class ek extends eg(ev){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}ek.NAME="PrimitiveValueBlock";class eO extends eS{constructor(e={}){super(e,ek),this.idBlock.isConstructed=!1}}function eP(e,t){if(e instanceof t)return e;let r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}function ex(e,t=0,r=e.length){let i=t,n=new eS({},ev),o=new em;if(!Y(o,e,t,r))return n.error=o.error,{offset:-1,result:n};if(!e.subarray(t,t+r).length)return n.error="Zero buffer length",{offset:-1,result:n};let a=n.idBlock.fromBER(e,t,r);if(n.idBlock.warnings.length&&n.warnings.concat(n.idBlock.warnings),-1===a)return n.error=n.idBlock.error,{offset:-1,result:n};if(t=a,r-=n.idBlock.blockLength,a=n.lenBlock.fromBER(e,t,r),n.lenBlock.warnings.length&&n.warnings.concat(n.lenBlock.warnings),-1===a)return n.error=n.lenBlock.error,{offset:-1,result:n};if(t=a,r-=n.lenBlock.blockLength,!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm)return n.error="Indefinite length form used for primitive encoding form",{offset:-1,result:n};let s=eS;if(1===n.idBlock.tagClass){if(n.idBlock.tagNumber>=37&&!1===n.idBlock.isHexOnly)return n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:n};switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0)return n.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:n};s=e_.EndOfContent;break;case 1:s=e_.Boolean;break;case 2:s=e_.Integer;break;case 3:s=e_.BitString;break;case 4:s=e_.OctetString;break;case 5:s=e_.Null;break;case 6:s=e_.ObjectIdentifier;break;case 10:s=e_.Enumerated;break;case 12:s=e_.Utf8String;break;case 13:s=e_.RelativeObjectIdentifier;break;case 14:s=e_.TIME;break;case 15:return n.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:n};case 16:s=e_.Sequence;break;case 17:s=e_.Set;break;case 18:s=e_.NumericString;break;case 19:s=e_.PrintableString;break;case 20:s=e_.TeletexString;break;case 21:s=e_.VideotexString;break;case 22:s=e_.IA5String;break;case 23:s=e_.UTCTime;break;case 24:s=e_.GeneralizedTime;break;case 25:s=e_.GraphicString;break;case 26:s=e_.VisibleString;break;case 27:s=e_.GeneralString;break;case 28:s=e_.UniversalString;break;case 29:s=e_.CharacterString;break;case 30:s=e_.BmpString;break;case 31:s=e_.DATE;break;case 32:s=e_.TimeOfDay;break;case 33:s=e_.DateTime;break;case 34:s=e_.Duration;break;default:{let e=n.idBlock.isConstructed?new e_.Constructed:new e_.Primitive;e.idBlock=n.idBlock,e.lenBlock=n.lenBlock,e.warnings=n.warnings,n=e}}}else s=n.idBlock.isConstructed?e_.Constructed:e_.Primitive;return a=(n=eP(n,s)).fromBER(e,t,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length),n.valueBeforeDecodeView=e.subarray(i,i+n.blockLength),{offset:a,result:n}}function eC(e){if(!e.byteLength){let e=new eS({},ev);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ex(D._H.toUint8Array(e).slice(),0,e.byteLength)}function eB(e,t){return e?1:t}i=eO,(()=>{e_.Primitive=i})(),eO.NAME="PRIMITIVE";class eR extends ev{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){let i=D._H.toUint8Array(e);if(!Y(this,i,t,r))return -1;if(this.valueBeforeDecodeView=i.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let n=t;for(;eB(this.isIndefiniteForm,r)>0;){let e=ex(i,n,r);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(n=e.offset,this.blockLength+=e.result.blockLength,r-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===ef)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===ef?this.value.pop():this.warnings.push("No EndOfContent block encoded")),n}toBER(e,t){let r=t||new X;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?eh:r.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}}eR.NAME="ConstructedValueBlock";class ej extends eS{constructor(e={}){super(e,eR),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){let e=[];for(let t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));let t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join("\n")}`:`${t} :`}}n=ej,(()=>{e_.Constructed=n})(),ej.NAME="CONSTRUCTED";class eI extends ev{fromBER(e,t,r){return t}toBER(e){return eh}}eI.override="EndOfContentValueBlock";class eT extends eS{constructor(e={}){super(e,eI),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}o=eT,(()=>{e_.EndOfContent=o})(),eT.NAME=ef;class eU extends eS{constructor(e={}){super(e,ev),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){let r=new ArrayBuffer(2);if(!e){let e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}a=eU,(()=>{e_.Null=a})(),eU.NAME="NULL";class eM extends eg(ev){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=D._H.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){let i=D._H.toUint8Array(e);return Y(this,i,t,r)?(this.valueHexView=i.subarray(t,t+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,W.call(this),this.blockLength=r,t+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}eM.NAME="BooleanValueBlock";class eN extends eS{constructor(e={}){super(e,eM),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}s=eN,(()=>{e_.Boolean=s})(),eN.NAME="BOOLEAN";class eK extends eg(eR){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(i=eR.prototype.fromBER.call(this,e,t,r)))return i;for(let e=0;e<this.value.length;e++){let t=this.value[e].constructor.NAME;if(t===ef){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;break}if(t!==ep)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,t,r),this.blockLength=r;return i}toBER(e,t){return this.isConstructed?eR.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}eK.NAME="OctetStringValueBlock";class eH extends eS{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i,n;null!==(i=r.isConstructed)&&void 0!==i||(r.isConstructed=!!(null===(n=r.value)||void 0===n?void 0:n.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},eK),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{if(i.byteLength){let e=ex(i,0,i.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?ej.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${D.U$.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof eH&&e.push(t.valueBlock.valueHexView);return D._H.concat(e)}}c=eH,(()=>{e_.OctetString=c})(),eH.NAME=ep;class eD extends eg(eR){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;let i=-1;if(this.isConstructed){if(-1===(i=eR.prototype.fromBER.call(this,e,t,r)))return i;for(let e of this.value){let t=e.constructor.NAME;if(t===ef){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;break}if(t!==ey)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return i}let n=D._H.toUint8Array(e);if(!Y(this,n,t,r))return -1;let o=n.subarray(t,t+r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let e=o.subarray(1);try{if(e.byteLength){let t=ex(e,0,e.byteLength);-1!==t.offset&&t.offset===r-1&&(this.value=[t.result])}}catch(e){}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,t+r}toBER(e,t){if(this.isConstructed)return eR.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return eh;let r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}eD.NAME="BitStringValueBlock";class eL extends eS{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i,n;null!==(i=r.isConstructed)&&void 0!==i||(r.isConstructed=!!(null===(n=r.value)||void 0===n?void 0:n.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},eD),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return ej.prototype.onAsciiEncoding.call(this);{let e=[];for(let t of this.valueBlock.valueHexView)e.push(t.toString(2).padStart(8,"0"));let t=e.join("");return`${this.constructor.NAME} : ${t.substring(0,t.length-this.valueBlock.unusedBits)}`}}}function ez(e,t){let r=new Uint8Array([0]),i=new Uint8Array(e),n=new Uint8Array(t),o=i.slice(0),a=o.length-1,s=n.slice(0),c=s.length-1,u=0,l=c<a?a:c,h=0;for(let e=l;e>=0;e--,h++)u=!0==h<s.length?o[a-h]+s[c-h]+r[0]:o[a-h]+r[0],(r[0]=u/10,!0==h>=o.length)?o=$(new Uint8Array([u%10]),o):o[a-h]=u%10;return r[0]>0&&(o=$(r,o)),o}function e$(e){if(e>=Z.length)for(let t=Z.length;t<=e;t++){let e=new Uint8Array([0]),r=Z[t-1].slice(0);for(let t=r.length-1;t>=0;t--){let i=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=i[0]/10,r[t]=i[0]%10}e[0]>0&&(r=$(e,r)),Z.push(r)}return Z[e]}function eW(e,t){let r,i=0,n=new Uint8Array(e),o=new Uint8Array(t),a=n.slice(0),s=a.length-1,c=o.slice(0),u=c.length-1,l=0;for(let e=u;e>=0;e--,l++)!0==(r=a[s-l]-c[u-l]-i)<0?(i=1,a[s-l]=r+10):(i=0,a[s-l]=r);if(i>0)for(let e=s-u+1;e>=0;e--,l++)if((r=a[s-l]-i)<0)i=1,a[s-l]=r+10;else{i=0,a[s-l]=r;break}return a.slice()}u=eL,(()=>{e_.BitString=u})(),eL.NAME=ey;class eF extends eg(ev){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=W.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(F(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,i=0){let n=this.fromBER(e,t,r);if(-1===n)return n;let o=this.valueHexView;return 0===o[0]&&(128&o[1])!=0?this.valueHexView=o.subarray(1):0!==i&&o.length<i&&(i-o.length>1&&(i=o.length+1),this.valueHexView=o.subarray(i-o.length)),n}toDER(e=!1){let t=this.valueHexView;switch(!0){case(128&t[0])!=0:{let e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&(128&t[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){let i=super.fromBER(e,t,r);return -1===i||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e;let t=8*this.valueHexView.length-1,r=new Uint8Array(8*this.valueHexView.length/3),i=0,n=this.valueHexView,o="",a=!1;for(let a=n.byteLength-1;a>=0;a--){e=n[a];for(let n=0;n<8;n++)(1&e)==1&&(i===t?(r=eW(e$(i),r),o="-"):r=ez(r,e$(i))),i++,e>>=1}for(let e=0;e<r.length;e++)r[e]&&(a=!0),a&&(o+=Q.charAt(r[e]));return!1===a&&(o+=Q.charAt(0)),o}}l=eF,eF.NAME="IntegerValueBlock",(()=>{Object.defineProperty(l.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();class eV extends eS{constructor(e={}){super(e,eF),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return G(),BigInt(this.valueBlock.toString())}static fromBigInt(e){G();let t=BigInt(e),r=new X,i=t.toString(16).replace(/^-/,""),n=new Uint8Array(D.U$.FromHex(i));if(t<0){let e=new Uint8Array(n.length+(128&n[0]?1:0));e[0]|=128;let i=BigInt(`0x${D.U$.ToHex(e)}`)+t,o=D._H.toUint8Array(D.U$.FromHex(i.toString(16)));o[0]|=128,r.write(o)}else 128&n[0]&&r.write(new Uint8Array([0])),r.write(n);return new eV({valueHex:r.final()})}convertToDER(){let e=new eV({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new eV({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}h=eV,(()=>{e_.Integer=h})(),eV.NAME="INTEGER";class eJ extends eV{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}d=eJ,(()=>{e_.Enumerated=d})(),eJ.NAME="ENUMERATED";class eG extends eg(ev){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;let i=D._H.toUint8Array(e);if(!Y(this,i,t,r))return -1;let n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&n[e],this.blockLength++,(128&n[e])!=0);e++);let o=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)o[e]=this.valueHexView[e];return(this.valueHexView=o,(128&n[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=L(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){G();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+(e+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=z(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",eh;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r}toString(){let e="";if(this.isHexOnly)e=D.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}eG.NAME="sidBlock";class eq extends ev{constructor({value:e=el,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new eG;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e){let t=[];for(let r=0;r<this.value.length;r++){let i=this.value[r].toBER(e);if(0===i.byteLength)return this.error=this.value[r].error,eh;t.push(i)}return q(t)}fromString(e){this.value=[];let t=0,r=0,i="",n=!1;do if(i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,n){let e=this.value[0],t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}let r=parseInt(i,10);if(isNaN(r))return;e.valueDec=r+t,n=!1}else{let e=new eG;if(i>Number.MAX_SAFE_INTEGER){G();let t=BigInt(i);e.valueBigInt=t}else if(e.valueDec=parseInt(i,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,n=!0),this.value.push(e)}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?(i=`{${i}}`,this.value[r].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}eq.NAME="ObjectIdentifierValueBlock";class eY extends eS{constructor(e={}){super(e,eq),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}f=eY,(()=>{e_.ObjectIdentifier=f})(),eY.NAME="OBJECT IDENTIFIER";class eX extends eg(em){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;let i=D._H.toUint8Array(e);if(!Y(this,i,t,r))return -1;let n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&n[e],this.blockLength++,(128&n[e])!=0);e++);let o=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)o[e]=this.valueHexView[e];return(this.valueHexView=o,(128&n[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=L(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=z(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",eh;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r.buffer}toString(){return this.isHexOnly?D.U$.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}eX.NAME="relativeSidBlock";class eZ extends ev{constructor({value:e=el,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new eX;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e,t){let r=[];for(let t=0;t<this.value.length;t++){let i=this.value[t].toBER(e);if(0===i.byteLength)return this.error=this.value[t].error,eh;r.push(i)}return q(r)}fromString(e){this.value=[];let t=0,r=0,i="";do{i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;let n=new eX;if(n.valueDec=parseInt(i,10),isNaN(n.valueDec))break;this.value.push(n)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?e+=i=`{${i}}`:e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}eZ.NAME="RelativeObjectIdentifierValueBlock";class eQ extends eS{constructor(e={}){super(e,eZ),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}p=eQ,(()=>{e_.RelativeObjectIdentifier=p})(),eQ.NAME="RelativeObjectIdentifier";class e0 extends ej{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}y=e0,(()=>{e_.Sequence=y})(),e0.NAME="SEQUENCE";class e1 extends ej{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}g=e1,(()=>{e_.Set=g})(),e1.NAME="SET";class e2 extends eg(ev){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=el}toJSON(){return{...super.toJSON(),value:this.value}}}e2.NAME="StringValueBlock";class e8 extends e2{}e8.NAME="SimpleStringValueBlock";class e3 extends eE{constructor({...e}={}){super(e,e8)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,D._H.toUint8Array(e))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);this.valueBlock.value=e}}e3.NAME="SIMPLE STRING";class e6 extends e3{fromBuffer(e){this.valueBlock.valueHexView=D._H.toUint8Array(e);try{this.valueBlock.value=D.U$.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=D.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(D.U$.FromUtf8String(e)),this.valueBlock.value=e}}e6.NAME="Utf8StringValueBlock";class e5 extends e6{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}m=e5,(()=>{e_.Utf8String=m})(),e5.NAME="UTF8String";class e4 extends e3{fromBuffer(e){this.valueBlock.value=D.U$.ToUtf16String(e),this.valueBlock.valueHexView=D._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(D.U$.FromUtf16String(e))}}e4.NAME="BmpStringValueBlock";class e7 extends e4{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}v=e7,(()=>{e_.BmpString=v})(),e7.NAME="BMPString";class e9 extends e3{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let i=0;i<t;i++){let t=new Uint8Array(z(e.charCodeAt(i),8));if(t.length>4)continue;let n=4-t.length;for(let e=t.length-1;e>=0;e--)r[4*i+e+n]=t[e]}this.valueBlock.value=e}}e9.NAME="UniversalStringValueBlock";class te extends e9{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}b=te,(()=>{e_.UniversalString=b})(),te.NAME="UniversalString";class tt extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}w=tt,(()=>{e_.NumericString=w})(),tt.NAME="NumericString";class tr extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_=tr,(()=>{e_.PrintableString=_})(),tr.NAME="PrintableString";class ti extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}S=ti,(()=>{e_.TeletexString=S})(),ti.NAME="TeletexString";class tn extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}A=tn,(()=>{e_.VideotexString=A})(),tn.NAME="VideotexString";class to extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}E=to,(()=>{e_.IA5String=E})(),to.NAME="IA5String";class ta extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}k=ta,(()=>{e_.GraphicString=k})(),ta.NAME="GraphicString";class ts extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}O=ts,(()=>{e_.VisibleString=O})(),ts.NAME="VisibleString";class tc extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}P=tc,(()=>{e_.GeneralString=P})(),tc.NAME="GeneralString";class tu extends e3{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}x=tu,(()=>{e_.CharacterString=x})(),tu.NAME="CharacterString";class tl extends ts{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,D._H.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(null===t){this.error="Wrong input string for conversion";return}let r=parseInt(t[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){let e=Array(7);return e[0]=J(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=J(this.month,2),e[2]=J(this.day,2),e[3]=J(this.hour,2),e[4]=J(this.minute,2),e[5]=J(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}C=tl,(()=>{e_.UTCTime=C})(),tl.NAME="UTCTime";class th extends tl{constructor(e={}){var t;super(e),null!==(t=this.millisecond)&&void 0!==t||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,i="",n="",o=0,a=0,s=0;if("Z"===e[e.length-1])i=e.substring(0,e.length-1),r=!0;else{if(isNaN(new Number(e[e.length-1]).valueOf()))throw Error("Wrong input string for conversion");i=e}if(r){if(-1!==i.indexOf("+")||-1!==i.indexOf("-"))throw Error("Wrong input string for conversion")}else{let e=1,t=i.indexOf("+"),r="";if(-1===t&&(t=i.indexOf("-"),e=-1),-1!==t){if(r=i.substring(t+1),i=i.substring(0,t),2!==r.length&&4!==r.length)throw Error("Wrong input string for conversion");let n=parseInt(r.substring(0,2),10);if(isNaN(n.valueOf()))throw Error("Wrong input string for conversion");if(a=e*n,4===r.length){if(isNaN((n=parseInt(r.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");s=e*n}}}let c=i.indexOf(".");if(-1===c&&(c=i.indexOf(",")),-1!==c){let e=new Number(`0${i.substring(c)}`);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");o=e.valueOf(),n=i.substring(0,c)}else n=i;switch(!0){case 8===n.length:if(t=/(\d{4})(\d{2})(\d{2})/ig,-1!==c)throw Error("Wrong input string for conversion");break;case 10===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=60*o;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=60*o;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=1e3*o;this.millisecond=Math.floor(e)}break;default:throw Error("Wrong input string for conversion")}let u=t.exec(n);if(null===u)throw Error("Wrong input string for conversion");for(let e=1;e<u.length;e++)switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+a;break;case 5:this.minute=parseInt(u[e],10)+s;break;case 6:this.second=parseInt(u[e],10);break;default:throw Error("Wrong input string for conversion")}if(!1===r){let e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){let e=[];return e.push(J(this.year,4)),e.push(J(this.month,2)),e.push(J(this.day,2)),e.push(J(this.hour,2)),e.push(J(this.minute,2)),e.push(J(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(J(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}B=th,(()=>{e_.GeneralizedTime=B})(),th.NAME="GeneralizedTime";class td extends e5{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}R=td,(()=>{e_.DATE=R})(),td.NAME="DATE";class tf extends e5{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}j=tf,(()=>{e_.TimeOfDay=j})(),tf.NAME="TimeOfDay";class tp extends e5{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}I=tp,(()=>{e_.DateTime=I})(),tp.NAME="DateTime";class ty extends e5{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}T=ty,(()=>{e_.Duration=T})(),ty.NAME="Duration";class tg extends e5{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}U=tg,(()=>{e_.TIME=U})(),tg.NAME="TIME";class tm{constructor({name:e=el,optional:t=!1}={}){this.name=e,this.optional=t}}class tv extends tm{constructor({value:e=[],...t}={}){super(t),this.value=e}}class tb extends tm{constructor({value:e=new tm,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}class tw{constructor({data:e=ed}={}){this.dataView=D._H.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=D._H.toUint8Array(e)}fromBER(e,t,r){let i=t+r;return this.dataView=D._H.toUint8Array(e).subarray(t,i),i}toBER(e){return this.dataView.slice().buffer}}function t_(e,t,r){if(r instanceof tv){for(let i=0;i<r.value.length;i++)if(t_(e,t,r.value[i]).verified)return{verified:!0,result:e};{let e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(ee)&&(e.name=r.name),e}}if(r instanceof tm)return r.hasOwnProperty(ee)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1||ei in r==!1||es in r.idBlock==!1||ec in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty(en))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty(eo))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty(ea))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!(er in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(et in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.valueHexView,n=t.idBlock.valueHexView;if(i.length!==n.length)return{verified:!1,result:e};for(let t=0;t<i.length;t++)if(i[t]!==n[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&(e[r.name]=t)),r instanceof e_.Constructed){let i=0,n={verified:!1,result:{error:"Unknown error"}},o=r.valueBlock.value.length;if(o>0&&r.valueBlock.value[0]instanceof tb&&(o=t.valueBlock.value.length),0===o)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let a=0;a<o;a++)if(a-i>=t.valueBlock.value.length){if(!1===r.valueBlock.value[a].optional){let t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof tb){if(!1===(n=t_(e,t.valueBlock.value[a],r.valueBlock.value[0].value)).verified){if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&delete e[r.name]),n;i++}if(ee in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let i={};void 0===(i=eu in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(i[r.valueBlock.value[0].name]=[]),i[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else if(!1===(n=t_(e,t.valueBlock.value[a-i],r.valueBlock.value[a])).verified){if(!r.valueBlock.value[a].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&delete e[r.name]),n;i++}if(!1===n.verified){let t={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if(r.primitiveSchema&&et in t.valueBlock){let i=ex(t.valueBlock.valueHexView);if(-1===i.offset){let t={verified:!1,result:i.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,el),r.name&&(delete e[r.name],t.name=r.name)),t}return t_(e,i.result,r.primitiveSchema)}return{verified:!0,result:e}}function tS(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let r=ex(D._H.toUint8Array(e));return -1===r.offset?{verified:!1,result:r.result}:t_(r.result,r.result,t)}!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(M||(M={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(N||(N={}));let tA={fromASN:e=>e instanceof eU?null:e.valueBeforeDecodeView,toASN:e=>{if(null===e)return new eU;let t=eC(e);if(t.result.error)throw Error(t.result.error);return t.result}},tE={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new eV({value:+e})},tk={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new eJ({value:e})},tO={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new eL({valueHex:e})},tP={fromASN:e=>e.valueBlock.toString(),toASN:e=>new eY({value:e})},tx={fromASN:e=>e.valueBlock.value,toASN:e=>new eN({value:e})},tC={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new eH({valueHex:e})};function tB(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}let tR=tB(e5),tj=tB(e7),tI=tB(te),tT=tB(tt),tU=tB(tr),tM=tB(ti),tN=tB(tn),tK=tB(to),tH=tB(ta),tD=tB(ts),tL=tB(tc),tz=tB(tu),t$={fromASN:e=>e.toDate(),toASN:e=>new tl({valueDate:e})},tW={fromASN:e=>e.toDate(),toASN:e=>new th({valueDate:e})},tF={fromASN:()=>null,toASN:()=>new eU};function tV(e){switch(e){case N.Any:return tA;case N.BitString:return tO;case N.BmpString:return tj;case N.Boolean:return tx;case N.CharacterString:return tz;case N.Enumerated:return tk;case N.GeneralString:return tL;case N.GeneralizedTime:return tW;case N.GraphicString:return tH;case N.IA5String:return tK;case N.Integer:return tE;case N.Null:return tF;case N.NumericString:return tT;case N.ObjectIdentifier:return tP;case N.OctetString:return tC;case N.PrintableString:return tU;case N.TeletexString:return tM;case N.UTCTime:return t$;case N.UniversalString:return tI;case N.Utf8String:return tR;case N.VideotexString:return tN;case N.VisibleString:return tD;default:return null}}function tJ(e){return"function"==typeof e&&e.prototype?!!e.prototype.toASN&&!!e.prototype.fromASN||tJ(e.prototype):!!(e&&"object"==typeof e&&"toASN"in e&&"fromASN"in e)}function tG(e){var t;if(e){let r=Object.getPrototypeOf(e);return(null===(t=null==r?void 0:r.prototype)||void 0===t?void 0:t.constructor)===Array||tG(r)}return!1}function tq(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==i[t])return!1;return!0}class tY{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=!1){let r=this.items.get(e);if(!r)throw Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(t&&!r.schema)throw Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return r}cache(e){let t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){let t={type:M.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){let r=this.items.get(e)||this.createDefault(e),i=[];for(let e in r.items){let n;let o=r.items[e],a=t?e:"";if("number"==typeof o.type){let e=N[o.type],t=H[e];if(!t)throw Error(`Cannot get ASN1 class by name '${e}'`);n=new t({name:a})}else tJ(o.type)?n=new o.type().toSchema(a):o.optional?this.get(o.type).type===M.Choice?n=new tm({name:a}):(n=this.create(o.type,!1)).name=a:n=new tm({name:a});let s=!!o.optional||void 0!==o.defaultValue;if(o.repeated&&(n.name="",n=new("set"===o.repeated?e1:e0)({name:"",value:[new tb({name:a,value:n})]})),null!==o.context&&void 0!==o.context){if(o.implicit){if("number"==typeof o.type||tJ(o.type)){let e=o.repeated?ej:eO;i.push(new e({name:a,optional:s,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);let e=!!o.repeated,t=e?n:this.get(o.type,!0).schema;t="valueBlock"in t?t.valueBlock.value:t.value,i.push(new ej({name:e?"":a,optional:s,idBlock:{tagClass:3,tagNumber:o.context},value:t}))}}else i.push(new ej({optional:s,idBlock:{tagClass:3,tagNumber:o.context},value:[n]}))}else n.optional=s,i.push(n)}switch(r.type){case M.Sequence:return new e0({value:i,name:""});case M.Set:return new e1({value:i,name:""});case M.Choice:return new tv({value:i,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=Object.getPrototypeOf(e);return t?this.items.get(t)||this.findParentSchema(t):null}}let tX=new tY,tZ=e=>t=>{let r;tX.has(t)?r=tX.get(t):(r=tX.createDefault(t),tX.set(t,r)),Object.assign(r,e)},tQ=e=>(t,r)=>{let i;tX.has(t.constructor)?i=tX.get(t.constructor):(i=tX.createDefault(t.constructor),tX.set(t.constructor,i));let n=Object.assign({},e);if("number"==typeof n.type&&!n.converter){let i=tV(e.type);if(!i)throw Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`);n.converter=i}i.items[r]=n};class t0 extends Error{constructor(){super(...arguments),this.schemas=[]}}class t1{static parse(e,t){let r=eC(e);if(r.result.error)throw Error(r.result.error);return this.fromASN(r.result,t)}static fromASN(e,t){var r;try{if(tJ(t))return new t().fromASN(e);let i=tX.get(t);tX.cache(t);let n=i.schema;if(e.constructor===ej&&i.type!==M.Choice)for(let t in n=new ej({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:i.schema.valueBlock.value}),i.items)delete e[t];let o=t_({},e,n);if(!o.verified)throw new t0(`Data does not match to ${t.name} ASN1 schema. ${o.result.error}`);let a=new t;if(tG(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let r=i.itemType;if("number"!=typeof r)return t.from(e.valueBlock.value,e=>this.fromASN(e,r));{let i=tV(r);if(!i)throw Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`);return t.from(e.valueBlock.value,e=>i.fromASN(e))}}for(let e in i.items){let t=o.result[e];if(!t)continue;let n=i.items[e],s=n.type;if("number"==typeof s||tJ(s)){let i=null!==(r=n.converter)&&void 0!==r?r:tJ(s)?new s:null;if(!i)throw Error("Converter is empty");if(n.repeated){if(n.implicit){let r=new("sequence"===n.repeated?e0:e1);r.valueBlock=t.valueBlock;let o=eC(r.toBER(!1));if(-1===o.offset)throw Error(`Cannot parse the child item. ${o.result.error}`);if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let s=o.result.valueBlock.value;a[e]=Array.from(s,e=>i.fromASN(e))}else a[e]=Array.from(t,e=>i.fromASN(e))}else{let r=t;if(n.implicit){let e;if(tJ(s))e=new s().toSchema("");else{let t=N[s],r=H[t];if(!r)throw Error(`Cannot get '${t}' class from asn1js module`);e=new r}e.valueBlock=r.valueBlock,r=eC(e.toBER(!1)).result}a[e]=i.fromASN(r)}}else if(n.repeated){if(!Array.isArray(t))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");a[e]=Array.from(t,e=>this.fromASN(e,s))}else a[e]=this.fromASN(t,s)}return a}catch(e){throw e instanceof t0&&e.schemas.push(t.name),e}}}class t2{static serialize(e){return e instanceof eS?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){let t;if(e&&"object"==typeof e&&tJ(e))return e.toASN();if(!(e&&"object"==typeof e))throw TypeError("Parameter 1 should be type of Object.");let r=e.constructor,i=tX.get(r);tX.cache(r);let n=[];if(i.itemType){if(!Array.isArray(e))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof i.itemType){let t=tV(i.itemType);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);n=e.map(e=>t.toASN(e))}else n=e.map(e=>this.toAsnItem({type:i.itemType},"[]",r,e))}else for(let t in i.items){let o=i.items[t],a=e[t];if(void 0===a||o.defaultValue===a||"object"==typeof o.defaultValue&&"object"==typeof a&&tq(this.serialize(o.defaultValue),this.serialize(a)))continue;let s=t2.toAsnItem(o,t,r,a);if("number"==typeof o.context){if(o.implicit){if(!o.repeated&&("number"==typeof o.type||tJ(o.type))){let e={};e.valueHex=s instanceof eU?s.valueBeforeDecodeView:s.valueBlock.toBER(),n.push(new eO({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},...e}))}else n.push(new ej({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:s.valueBlock.value}))}else n.push(new ej({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:[s]}))}else o.repeated?n=n.concat(s):n.push(s)}switch(i.type){case M.Sequence:t=new e0({value:n});break;case M.Set:t=new e1({value:n});break;case M.Choice:if(!n[0])throw Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);t=n[0]}return t}static toAsnItem(e,t,r,i){let n;if("number"==typeof e.type){let o=e.converter;if(!o)throw Error(`Property '${t}' doesn't have converter for type ${N[e.type]} in schema '${r.name}'`);if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>o.toASN(e));n=new("sequence"===e.repeated?e0:e1)({value:t})}else n=o.toASN(i)}else if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>this.toASN(e));n=new("sequence"===e.repeated?e0:e1)({value:t})}else n=this.toASN(i);return n}}class t8{static serialize(e){return t2.serialize(e)}static parse(e,t){return t1.parse(e,t)}static toString(e){let t=eC(D._H.isBufferSource(e)?D._H.toArrayBuffer(e):t8.serialize(e));if(-1===t.offset)throw Error(`Cannot decode ASN.1 data. ${t.result.error}`);return t.result.toString()}}function t3(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;class t6 extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e),this.message=e,this.innerError=t}}class t5 extends t6{constructor(e,t,r){super(t,r),this.schema=e}}class t4 extends t5{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class t7 extends t6{}class t9 extends t6{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r),this.schemaName=e}}class re extends t4{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema"),this.keys=t,this.errors=r}}function rt(e,t){switch(t){case K.Boolean:return"boolean"==typeof e;case K.Number:return"number"==typeof e;case K.String:return"string"==typeof e}return!0}function rr(e,t){if(!rt(e,t))throw TypeError(`Value must be ${K[t]}`)}function ri(e){return e&&e.prototype?!!e.prototype.toJSON&&!!e.prototype.fromJSON||ri(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(K||(K={}));class rn{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){let t=this.items.get(e)||this.findParentSchema(e);if(!t)throw Error("Cannot get schema for current target");return t}create(e){let t={names:{}},r=this.findParentSchema(e);if(r)for(let e in Object.assign(t,r),t.names={},r.names)t.names[e]=Object.assign({},r.names[e]);return t.target=e,t}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}let ro="default",ra=new rn;class rs{constructor(e){this.pattern=new RegExp(e)}validate(e){let t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new t7("Incoming value must be string");if(!t.exec(e))throw new t7(`Value doesn't match to pattern '${t.toString()}'`)}}class rc{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(rr(e,K.Number),!(this.min<=e&&e<=this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new t7(`Value doesn't match to diapason [${e},${t}]`)}}}class ru{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(rr(e,K.Number),!(this.min<e&&e<this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new t7(`Value doesn't match to diapason (${e},${t})`)}}}class rl{constructor(e,t,r){this.length=e,this.minLength=t,this.maxLength=r}validate(e){if(void 0!==this.length){if(e.length!==this.length)throw new t7(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&e.length<this.minLength)throw new t7(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&e.length>this.maxLength)throw new t7(`Value length must be less than ${this.maxLength}.`)}}class rh{constructor(e){this.enumeration=e}validate(e){if(rr(e,K.String),!this.enumeration.includes(e))throw new t7(`Value must be one of ${this.enumeration.map(e=>`'${e}'`).join(", ")}`)}}class rd{static checkValues(e,t){for(let r of Array.isArray(e)?e:[e])for(let i of t.validations)i instanceof rl&&t.repeated?i.validate(e):i.validate(r)}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e))throw TypeError("Value must be Array");if("number"==typeof t.type)for(let r of Array.isArray(e)?e:[e])rr(r,t.type)}static getSchemaByName(e,t=ro){return{...e.names[ro],...e.names[t]}}}class rf extends rd{static serialize(e,t,r,i){return JSON.stringify(this.toJSON(e,t),r,i)}static toJSON(e,t={}){let r;let i=t.targetSchema,n=t.schemaName||ro;if(ri(e))return e.toJSON();if(Array.isArray(e))for(let i of(r=[],e))r.push(this.toJSON(i,t));else if("object"==typeof e){if(i&&!ra.has(i))throw new t6("Cannot get schema for `targetSchema` param");if(i=i||e.constructor,ra.has(i)){let t=ra.get(i);r={};let o=this.getSchemaByName(t,n);for(let a in o)try{let t;let s=o[a],c=e[a];if(s.optional&&void 0===c||void 0!==s.defaultValue&&c===s.defaultValue)continue;if(!s.optional&&void 0===c)throw new t9(i.name,`Property '${a}' is required.`);t="number"==typeof s.type?s.converter?s.repeated?c.map(t=>s.converter.toJSON(t,e)):s.converter.toJSON(c,e):c:s.repeated?c.map(e=>this.toJSON(e,{schemaName:n})):this.toJSON(c,{schemaName:n}),this.checkTypes(t,s),this.checkValues(t,s),r[s.name||a]=t}catch(e){if(e instanceof t9)throw e;throw new t9(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}else for(let t in r={},e)r[t]=this.toJSON(e[t],{schemaName:n})}else r=e;return r}}class rp extends rd{static parse(e,t){let r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){let r=t.targetSchema,i=t.schemaName||ro,n=new r;if(ri(n))return n.fromJSON(e);let o=ra.get(r),a=this.getSchemaByName(o,i),s={};for(let r in t.strictProperty&&!Array.isArray(e)&&rp.checkStrictProperty(e,a,o),a)try{let s=a[r],c=s.name||r,u=e[c];if(void 0===u&&(s.optional||void 0!==s.defaultValue))continue;if(!s.optional&&void 0===u)throw new t4(o,`Property '${c}' is required.`);if(this.checkTypes(u,s),this.checkValues(u,s),"number"==typeof s.type)s.converter?s.repeated?n[r]=u.map(e=>s.converter.fromJSON(e,n)):n[r]=s.converter.fromJSON(u,n):n[r]=u;else{let e={...t,targetSchema:s.type,schemaName:i};s.repeated?n[r]=u.map(t=>this.fromJSON(t,e)):n[r]=this.fromJSON(u,e)}}catch(e){if(e instanceof t4||(e=new t4(o,`Property '${r}' is wrong. ${e.message}`,e)),t.strictAllKeys)s[r]=e;else throw e}let c=Object.keys(s);if(c.length)throw new re(o,c,s);return n}static checkStrictProperty(e,t,r){let i=Object.keys(e),n=Object.keys(t),o=[];for(let e of i)-1===n.indexOf(e)&&o.push(e);if(o.length)throw new re(r,o)}}function ry(e){let t=[];return e.pattern&&t.push(new rs(e.pattern)),(e.type===K.Number||e.type===K.Any)&&((void 0!==e.minInclusive||void 0!==e.maxInclusive)&&t.push(new rc(e.minInclusive,e.maxInclusive)),(void 0!==e.minExclusive||void 0!==e.maxExclusive)&&t.push(new ru(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&t.push(new rh(e.enumeration))),(e.type===K.String||e.repeated||e.type===K.Any)&&(void 0!==e.length||void 0!==e.minLength||void 0!==e.maxLength)&&t.push(new rl(e.length,e.minLength,e.maxLength)),t}let rg=(e={})=>(t,r)=>{let i,n;let o=`Cannot set type for ${r} property of ${t.constructor.name} schema`;ra.has(t.constructor)?(i=ra.get(t.constructor)).target!==t.constructor&&(i=ra.create(t.constructor),ra.set(t.constructor,i)):(i=ra.create(t.constructor),ra.set(t.constructor,i));let a=Object.assign({type:K.Any,validations:[]},e);if(a.validations=ry(a),"number"!=typeof a.type&&!ra.has(a.type)&&!ri(a.type))throw Error(`${o}. Assigning type doesn't have schema.`);for(let t of n=Array.isArray(e.schema)?e.schema:[e.schema||ro])i.names[t]||(i.names[t]={}),i.names[t][r]=a};class rm extends Error{}class rv extends rm{}class rb extends rm{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class rw extends rm{}class r_ extends rm{constructor(e){super(`${e}: Missing required property`)}}class rS{static toArrayBuffer(e){let t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return D.U$.FromBase64(t)}static toUint8Array(e){return new Uint8Array(this.toArrayBuffer(e))}static fromBufferSource(e,t){let r;let i=D.U$.ToBase64(e),n=0,o=[];for(;n<i.length&&(r=i.slice(n,n+64)).length;)o.push(r),n+=64;let a=t.toUpperCase();return`-----BEGIN ${a}-----
${o.join("\n")}
-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e))throw Error("Bad parameter. Incoming data is not right PEM");let t=/-----BEGIN (.+)-----/.exec(e);if(!t)throw Error("Cannot get tag from PEM");return t[1]}static hasTagName(e,t){let r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}}function rA(e){return"object"==typeof e&&"kty"in e}class rE{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new rb("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...i){let n;if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!(r&&r.length))throw TypeError("Usages cannot be empty when creating a key.");n=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,n)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...i){throw new rb("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,t,r,...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...i){throw new rb("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,t,r,i,...n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,i,...n){throw new rb("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,i={},...n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...i){throw new rb("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,i={},...n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...i){throw new rb("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,i={},...n){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"deriveBits":void 0),r%8!=0)throw new rw("length: Is not multiple of 8")}async onDeriveBits(e,t,r,...i){throw new rb("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new rm("key: Is not extractable")}async onExportKey(e,t,...r){throw new rb("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,t,r,i,n,...o){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(n,this.usages)}async onImportKey(e,t,r,i,n,...o){throw new rb("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new rv("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(let r of e)if(-1===t.indexOf(r))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new rm("key does not match that of operation")}checkRequiredProperty(e,t){if(!(t in e))throw new r_(t)}checkHashAlgorithm(e,t){for(let r of t)if(r.toLowerCase()===e.name.toLowerCase())return;throw new rw(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!rA(t))throw TypeError("keyData: Is not JsonWebToken")}else if(!D._H.isBufferSource(t))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return D._H.toArrayBuffer(e)}}class rk extends rE{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class rO extends rk{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}}class rP extends rk{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new rw("length: Must be more than 0")}}class rx extends rk{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new rw("length: Must be more than 0")}}class rC extends rk{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class rB extends rk{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){var t;if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new rw("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!==(t=e.tagLength)&&void 0!==t||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new rw("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class rR extends rk{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class rj extends rE{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new rw(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class rI extends rE{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=D.U$.ToBase64(e.publicExponent);if(!("Aw=="===t||"AQAB"===t))throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class rT extends rI{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class rU extends rI{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw TypeError("saltLength: Is not a Number");if(e.saltLength<0)throw RangeError("saltLength: Must be positive number")}}class rM extends rI{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class rN extends rE{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(let t of this.namedCurves)if(t.toLowerCase()===e.toLowerCase())return;throw new rw(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class rK extends rN{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}let rH=["secret","private","public"];class rD{static create(e,t,r,i){let n=new this;return n.algorithm=e,n.type=t,n.extractable=r,n.usages=i,n}static isKeyType(e){return -1!==rH.indexOf(e)}get[Symbol.toStringTag](){return"CryptoKey"}}class rL extends rN{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof rD))throw TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new rw("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new rw(`public: Is not ${this.name} key`)}}class rz extends rL{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}}class r$ extends rN{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}}let rW=class{constructor(e){e&&(this.value=e)}};t3([tQ({type:N.ObjectIdentifier})],rW.prototype,"value",void 0),rW=t3([tZ({type:M.Choice})],rW);class rF{constructor(e){Object.assign(this,e)}}t3([tQ({type:N.ObjectIdentifier})],rF.prototype,"algorithm",void 0),t3([tQ({type:N.Any,optional:!0})],rF.prototype,"parameters",void 0);class rV{constructor(){this.version=0,this.privateKeyAlgorithm=new rF,this.privateKey=new ArrayBuffer(0)}}t3([tQ({type:N.Integer})],rV.prototype,"version",void 0),t3([tQ({type:rF})],rV.prototype,"privateKeyAlgorithm",void 0),t3([tQ({type:N.OctetString})],rV.prototype,"privateKey",void 0),t3([tQ({type:N.Any,optional:!0})],rV.prototype,"attributes",void 0);class rJ{constructor(){this.publicKeyAlgorithm=new rF,this.publicKey=new ArrayBuffer(0)}}t3([tQ({type:rF})],rJ.prototype,"publicKeyAlgorithm",void 0),t3([tQ({type:N.BitString})],rJ.prototype,"publicKey",void 0);let rG={fromJSON:e=>D.U$.FromBase64Url(e),toJSON:e=>D.U$.ToBase64Url(new Uint8Array(e))},rq={fromASN:e=>new Uint8Array(e.valueBlock.valueHex)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1),toASN:e=>new eV({valueHex:new Uint8Array(e)[0]>127?(0,D.kg)(new Uint8Array([0]).buffer,e):e})};class rY{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}t3([tQ({type:N.Integer,converter:tE})],rY.prototype,"version",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"n",converter:rG})],rY.prototype,"modulus",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"e",converter:rG})],rY.prototype,"publicExponent",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"d",converter:rG})],rY.prototype,"privateExponent",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"p",converter:rG})],rY.prototype,"prime1",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"q",converter:rG})],rY.prototype,"prime2",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"dp",converter:rG})],rY.prototype,"exponent1",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"dq",converter:rG})],rY.prototype,"exponent2",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"qi",converter:rG})],rY.prototype,"coefficient",void 0),t3([tQ({type:N.Any,optional:!0})],rY.prototype,"otherPrimeInfos",void 0);class rX{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}t3([tQ({type:N.Integer,converter:rq}),rg({name:"n",converter:rG})],rX.prototype,"modulus",void 0),t3([tQ({type:N.Integer,converter:rq}),rg({name:"e",converter:rG})],rX.prototype,"publicExponent",void 0);let rZ=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new rm("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");let t=(e=new Uint8Array(this.value.slice(1))).length/2,r=0;return{x:D.U$.ToBase64Url(e.buffer.slice(r,r+t)),y:D.U$.ToBase64Url(e.buffer.slice(r+t,r+t+t))}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");if(!("y"in e))throw Error("y: Missing required property");let t=D.U$.FromBase64Url(e.x),r=D.U$.FromBase64Url(e.y),i=(0,D.kg)(new Uint8Array([4]).buffer,t,r);return this.value=new Uint8Array(i).buffer,this}};t3([tQ({type:N.OctetString})],rZ.prototype,"value",void 0),rZ=t3([tZ({type:M.Choice})],rZ);class rQ{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw Error("d: Missing required property");if(this.privateKey=D.U$.FromBase64Url(e.d),"x"in e){let t=new rZ;t.fromJSON(e);let r=t2.toASN(t);"valueHex"in r.valueBlock&&(this.publicKey=r.valueBlock.valueHex)}return this}toJSON(){let e={};return e.d=D.U$.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new rZ(this.publicKey).toJSON()),e}}t3([tQ({type:N.Integer,converter:tE})],rQ.prototype,"version",void 0),t3([tQ({type:N.OctetString})],rQ.prototype,"privateKey",void 0),t3([tQ({context:0,type:N.Any,optional:!0})],rQ.prototype,"parameters",void 0),t3([tQ({context:1,type:N.BitString,optional:!0})],rQ.prototype,"publicKey",void 0);let r0={fromASN:e=>{let t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{let t=new Uint8Array(e);if(t[0]>127){let e=new Uint8Array(t.length+1);return e.set(t,1),new eV({valueHex:e.buffer})}return new eV({valueHex:e})}};var r1=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:r0});class r2{static decodePoint(e,t){let r=D._H.toUint8Array(e);if(0===r.length||4!==r[0])throw Error("Only uncompressed point format supported");let i=(r.length-1)/2;if(i!==Math.ceil(t/8))throw Error("Point does not match field size");return{x:r.slice(1,i+1),y:r.slice(i+1,i+1+i)}}static encodePoint(e,t){let r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r)throw Error("X,Y coordinates don't match point size criteria");let i=D._H.toUint8Array(e.x),n=D._H.toUint8Array(e.y),o=new Uint8Array(2*r+1);return o[0]=4,o.set(i,1),o.set(n,r+1),o}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){let r=this.getSize(t),i=D._H.toUint8Array(e.r),n=D._H.toUint8Array(e.s),o=new Uint8Array(2*r);return o.set(this.padStart(i,r)),o.set(this.padStart(n,r),r),o}static decodeSignature(e,t){let r=this.getSize(t),i=D._H.toUint8Array(e);if(i.length!==2*r)throw Error("Incorrect size of the signature");let n=i.slice(0,r),o=i.slice(r);return{r:this.trimStart(n),s:this.trimStart(o)}}static trimStart(e){let t=0;for(;t<e.length-1&&0===e[t];)t++;return 0===t?e:e.slice(t,e.length)}static padStart(e,t){if(t===e.length)return e;let r=new Uint8Array(t);return r.set(e,t-e.length),r}}class r8{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){let t=e.byteLength/2,r=r2.decodeSignature(e,8*t),i=new r8;return i.r=D._H.toArrayBuffer(r.r),i.s=D._H.toArrayBuffer(r.s),i}toWebCryptoSignature(e){if(!e){let t=Math.max(this.r.byteLength,this.s.byteLength);e=t<=32?256:t<=48?384:521}return r2.encodeSignature(this,e).buffer}}t3([tQ({type:N.Integer,converter:r0})],r8.prototype,"r",void 0),t3([tQ({type:N.Integer,converter:r0})],r8.prototype,"s",void 0);class r3 extends rV{}t3([tQ({context:1,implicit:!0,type:N.BitString,optional:!0})],r3.prototype,"publicKey",void 0);let r6=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d)throw Error("d: Missing required property");return this.value=D.U$.FromBase64Url(e.d),this}toJSON(){return{d:D.U$.ToBase64Url(this.value)}}};t3([tQ({type:N.OctetString})],r6.prototype,"value",void 0),r6=t3([tZ({type:M.Choice})],r6);let r5=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){return{x:D.U$.ToBase64Url(this.value)}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");return this.value=D.U$.FromBase64Url(e.x),this}};t3([tQ({type:N.BitString})],r5.prototype,"value",void 0),r5=t3([tZ({type:M.Choice})],r5);let r4=class{};t3([tQ({type:N.OctetString}),rg({type:K.String,converter:rG})],r4.prototype,"d",void 0),r4=t3([tZ({type:M.Choice})],r4);let r7="1.2.840.10045.3.1.7",r9="1.3.132.0",ie=`${r9}.34`,it=`${r9}.35`,ir=`${r9}.10`,ii="1.3.36.3.3.2.8.1.1",io=`${ii}.1`,ia=`${ii}.2`,is=`${ii}.3`,ic=`${ii}.4`,iu=`${ii}.5`,il=`${ii}.6`,ih=`${ii}.7`,id=`${ii}.8`,ip=`${ii}.9`,iy=`${ii}.10`,ig=`${ii}.11`,im=`${ii}.12`,iv=`${ii}.13`,ib=`${ii}.14`;var iw=Object.freeze({__proto__:null,AlgorithmIdentifier:rF,get CurvePrivateKey(){return r4},EcDsaSignature:r8,EcPrivateKey:rQ,get EcPublicKey(){return rZ},get EdPrivateKey(){return r6},get EdPublicKey(){return r5},get ObjectIdentifier(){return rW},OneAsymmetricKey:r3,PrivateKeyInfo:rV,PublicKeyInfo:rJ,RsaPrivateKey:rY,RsaPublicKey:rX,converters:r1,idBrainpoolP160r1:io,idBrainpoolP160t1:ia,idBrainpoolP192r1:is,idBrainpoolP192t1:ic,idBrainpoolP224r1:iu,idBrainpoolP224t1:il,idBrainpoolP256r1:ih,idBrainpoolP256t1:id,idBrainpoolP320r1:ip,idBrainpoolP320t1:iy,idBrainpoolP384r1:ig,idBrainpoolP384t1:im,idBrainpoolP512r1:iv,idBrainpoolP512t1:ib,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:r9,idSecp256k1:ir,idSecp256r1:r7,idSecp384r1:ie,idSecp521r1:it,idVersionOne:ii,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class i_{constructor(){}static register(e){let t=new rW;t.value=e.id;let r=t8.serialize(t);this.items.push({...e,raw:r}),this.names.push(e.name)}static find(e){for(let t of(e=e.toUpperCase(),this.items))if(t.name.toUpperCase()===e||t.id.toUpperCase()===e)return t;return null}static get(e){let t=this.find(e);if(!t)throw Error(`Unsupported EC named curve '${e}'`);return t}}i_.items=[],i_.names=[],i_.register({name:"P-256",id:r7,size:256}),i_.register({name:"P-384",id:ie,size:384}),i_.register({name:"P-521",id:it,size:521}),i_.register({name:"K-256",id:ir,size:256}),i_.register({name:"brainpoolP160r1",id:io,size:160}),i_.register({name:"brainpoolP160t1",id:ia,size:160}),i_.register({name:"brainpoolP192r1",id:is,size:192}),i_.register({name:"brainpoolP192t1",id:ic,size:192}),i_.register({name:"brainpoolP224r1",id:iu,size:224}),i_.register({name:"brainpoolP224t1",id:il,size:224}),i_.register({name:"brainpoolP256r1",id:ih,size:256}),i_.register({name:"brainpoolP256t1",id:id,size:256}),i_.register({name:"brainpoolP320r1",id:ip,size:320}),i_.register({name:"brainpoolP320t1",id:iy,size:320}),i_.register({name:"brainpoolP384r1",id:ig,size:384}),i_.register({name:"brainpoolP384t1",id:im,size:384}),i_.register({name:"brainpoolP512r1",id:iv,size:512}),i_.register({name:"brainpoolP512t1",id:ib,size:512});class iS extends rE{constructor(){super(...arguments),this.name="X25519",this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public")}}class iA extends rE{constructor(){super(...arguments),this.name="Ed25519",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class iE extends rE{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class ik extends rE{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw TypeError("iterations: Is not a Number");if(e.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(e,t,r,i,n,...o){if(super.checkImportKey(e,t,r,i,n,...o),i)throw SyntaxError("extractable: Must be 'false'")}}class iO extends rE{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!D._H.isBufferSource(e.salt)||(this.checkRequiredProperty(e,"info"),!D._H.isBufferSource(e.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(e,t,r,i,n,...o){if(super.checkImportKey(e,t,r,i,n,...o),i)throw SyntaxError("extractable: Must be 'false'")}}class iP extends rE{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...e){return e[0]={length:this.defaultLength,...e[0]},super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);let r=e.length||0;if("number"!=typeof r)throw TypeError("length: Is not a Number");if(r<0)throw TypeError("length: Is negative")}}class ix extends iP{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}}class iC extends iP{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}}class iB{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let e=this.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=D.U$.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class iR{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){let t=this.get(e.toLowerCase());return t&&delete this.items[e],t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){let e=[];for(let t in this.items){let r=this.items[t];e.push(r.name)}return e.sort()}}let ij={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},iI=["pkcs8","spki","raw"];class iT{constructor(){this.providers=new iR}static isHashedAlgorithm(e){return!!e&&"object"==typeof e&&"name"in e&&"hash"in e}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");let[t,r,...i]=e,n=this.prepareAlgorithm(t),o=D._H.toArrayBuffer(r),a=this.getProvider(n.name);return await a.digest(n,o,...i)}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");let[t,r,i,...n]=e,o=this.prepareAlgorithm(t),a=this.getProvider(o.name);return await a.generateKey({...o,name:a.name},r,i,...n)}async sign(...e){this.checkRequiredArguments(e,3,"sign");let[t,r,i,...n]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),a=D._H.toArrayBuffer(i),s=this.getProvider(o.name);return await s.sign({...o,name:s.name},r,a,...n)}async verify(...e){this.checkRequiredArguments(e,4,"verify");let[t,r,i,n,...o]=e;this.checkCryptoKey(r);let a=this.prepareAlgorithm(t),s=D._H.toArrayBuffer(n),c=D._H.toArrayBuffer(i),u=this.getProvider(a.name);return await u.verify({...a,name:u.name},r,c,s,...o)}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");let[t,r,i,...n]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),a=D._H.toArrayBuffer(i),s=this.getProvider(o.name);return await s.encrypt({...o,name:s.name},r,a,{keyUsage:!0},...n)}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");let[t,r,i,...n]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),a=D._H.toArrayBuffer(i),s=this.getProvider(o.name);return await s.decrypt({...o,name:s.name},r,a,{keyUsage:!0},...n)}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");let[t,r,i,...n]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),a=this.getProvider(o.name);return await a.deriveBits({...o,name:a.name},r,i,{keyUsage:!0},...n)}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");let[t,r,i,n,o,...a]=e,s=this.prepareAlgorithm(i);this.getProvider(s.name).checkDerivedKeyParams(s);let c=this.prepareAlgorithm(t),u=this.getProvider(c.name);u.checkCryptoKey(r,"deriveKey");let l=await u.deriveBits({...c,name:u.name},r,i.length||512,{keyUsage:!1},...a);return this.importKey("raw",l,i,n,o,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");let[t,r,...i]=e;if(this.checkCryptoKey(r),!ij[t])throw TypeError("Invalid keyFormat argument");if(!ij[t].includes(r.type))throw new DOMException("The key is not of the expected type");let n=this.getProvider(r.algorithm.name);return await n.exportKey(t,r,...i)}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");let[t,r,i,n,o,...a]=e,s=this.prepareAlgorithm(i),c=this.getProvider(s.name);if("jwk"===t){if("object"!=typeof r||!r.kty)throw TypeError("Key data must be an object for JWK import")}else if(iI.includes(t)){if(!D._H.isBufferSource(r))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return c.importKey(t,r,{...s,name:c.name},n,o,...a)}async wrapKey(e,t,r,i,...n){let o=await this.exportKey(e,t,...n);if("jwk"===e){let e=JSON.stringify(o);o=D.U$.FromUtf8String(e)}let a=this.prepareAlgorithm(i),s=D._H.toArrayBuffer(o),c=this.getProvider(a.name);return c.encrypt({...a,name:c.name},r,s,{keyUsage:!1},...n)}async unwrapKey(e,t,r,i,n,o,a,...s){let c=this.prepareAlgorithm(i),u=D._H.toArrayBuffer(t),l=this.getProvider(c.name),h=await l.decrypt({...c,name:l.name},r,u,{keyUsage:!1},...s);if("jwk"===e)try{h=JSON.parse(D.U$.ToUtf8String(h))}catch(t){let e=TypeError("wrappedKey: Is not a JSON");throw e.internal=t,e}return this.importKey(e,h,n,o,a,...s)}checkRequiredArguments(e,t,r){if(e.length<t)throw TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if("string"==typeof e)return{name:e};if(iT.isHashedAlgorithm(e)){let t={...e};return t.hash=this.prepareAlgorithm(e.hash),t}return{...e}}getProvider(e){let t=this.providers.get(e);if(!t)throw new rv("Unrecognized name");return t}checkCryptoKey(e){if(!(e instanceof rD))throw TypeError("Key is not of type 'CryptoKey'")}}var iU=r(8287),iM=r(4624),iN=r.n(iM),iK=r(7836),iH=r(8287).Buffer;let iD={fromJSON:e=>iU.Buffer.from(D.U$.FromBase64Url(e)),toJSON:e=>D.U$.ToBase64Url(e)};class iL extends rD{constructor(){super(...arguments),this.data=iU.Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}t3([rg({name:"ext",type:K.Boolean,optional:!0})],iL.prototype,"extractable",void 0),t3([rg({name:"key_ops",type:K.String,repeated:!0,optional:!0})],iL.prototype,"usages",void 0),t3([rg({type:K.String})],iL.prototype,"kty",void 0),t3([rg({type:K.String,optional:!0})],iL.prototype,"alg",void 0);class iz extends iL{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class i$ extends iL{}class iW extends iz{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new rv("Unsupported algorithm name")}}set alg(e){}}t3([rg({name:"k",converter:iD})],iW.prototype,"data",void 0);class iF{static async generateKey(e,t,r){let i=new iW;return i.algorithm=e,i.extractable=t,i.usages=r,i.data=iN().randomBytes(e.length>>3),i}static async exportKey(e,t){if(!(t instanceof iW))throw Error("key: Is not AesCryptoKey");switch(e.toLowerCase()){case"jwk":return rf.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new rw("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=rp.fromJSON(t,{targetSchema:iW});break;case"raw":(o=new iW).data=iU.Buffer.from(t);break;default:throw new rw("format: Must be 'jwk' or 'raw'")}switch(o.algorithm=r,o.algorithm.length=o.data.length<<3,o.extractable=i,o.usages=n,o.algorithm.length){case 128:case 192:case 256:break;default:throw new rw("keyData: Is wrong key length")}return o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,iU.Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,iU.Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,iU.Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,iU.Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,iU.Buffer.from(r));default:throw new rw("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof iW))throw Error("key: Is not AesCryptoKey");switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,iU.Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,iU.Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,iU.Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,iU.Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,iU.Buffer.from(r));default:throw new rw("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){let i=iN().createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptAesCBC(e,t,r){let i=iN().createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async encryptAesCTR(e,t,r){let i=iN().createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,iU.Buffer.from(e.counter)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptAesCTR(e,t,r){let i=iN().createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async encryptAesGCM(e,t,r){let i=iN().createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,iU.Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});e.additionalData&&i.setAAD(iU.Buffer.from(e.additionalData));let n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final(),i.getAuthTag()])).buffer}static async decryptAesGCM(e,t,r){let i=(e.tagLength||128)>>3,n=iN().createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv),{authTagLength:i}),o=r.slice(0,r.length-i),a=r.slice(r.length-i);e.additionalData&&n.setAAD(iU.Buffer.from(e.additionalData)),n.setAuthTag(a);let s=n.update(o);return new Uint8Array(s=iU.Buffer.concat([s,n.final()])).buffer}static async encryptAesKW(e,t,r){let i=iN().createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptAesKW(e,t,r){let i=iN().createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async encryptAesECB(e,t,r){let i=iN().createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptAesECB(e,t,r){let i=iN().createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}}iF.AES_KW_IV=iU.Buffer.from("A6A6A6A6A6A6A6A6","hex");let iV=new WeakMap;function iJ(e){let t=iV.get(e);if(!t)throw new rw("Cannot get CryptoKey from secure storage");return t}function iG(e){let t=rD.create(e.algorithm,e.type,e.extractable,e.usages);return Object.freeze(t),iV.set(t,e),t}class iq extends rO{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return iF.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iF.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}let iY=iU.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),iX=iU.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]),iZ=16;function iQ(e){let t=iU.Buffer.alloc(e.length),r=e.length-1;for(let i=0;i<r;i++)t[i]=e[i]<<1,128&e[i+1]&&(t[i]+=1);return t[r]=e[r]<<1,t}function i0(e,t){let r=Math.min(e.length,t.length),i=iU.Buffer.alloc(r);for(let n=0;n<r;n++)i[n]=e[n]^t[n];return i}function i1(e,t){let r=iN().createCipheriv(`aes${e.length<<3}`,e,iY),i=r.update(t);return r.final(),i}function i2(e,t){let r=iU.Buffer.alloc(iZ),i=t*iZ,n=i+iZ;return e.copy(r,0,i,n),r}function i8(e,t){let r=iU.Buffer.alloc(iZ),i=t*iZ,n=e.length;return r.fill(0),e.copy(r,0,i,n),r[n-i]=128,r}function i3(e){let t=i1(e,iY),r=iQ(t);128&t[0]&&(r=i0(r,iX));let i=iQ(r);return 128&r[0]&&(i=i0(i,iX)),{subkey1:r,subkey2:i}}function i6(e,t){let r,i,n;let o=i3(e),a=Math.ceil(t.length/iZ);0===a?(a=1,r=!1):r=t.length%iZ==0;let s=a-1;i=r?i0(i2(t,s),o.subkey1):i0(i8(t,s),o.subkey2);let c=iY;for(let r=0;r<s;r++)c=i1(e,n=i0(c,i2(t,r)));return i1(e,n=i0(i,c))}class i5 extends rP{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onSign(e,t,r){return new Uint8Array(i6(iJ(t).data,iU.Buffer.from(r))).buffer}async onVerify(e,t,r,i){let n=await this.sign(e,t,i);return 0===iU.Buffer.from(r).compare(iU.Buffer.from(n))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}class i4 extends rx{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return iF.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iF.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}class i7 extends rB{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return iF.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iF.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}class i9 extends rR{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}async onEncrypt(e,t,r){return iF.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iF.decrypt(e,iJ(t),new Uint8Array(r))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}class ne extends rC{async onGenerateKey(e,t,r){return iG(await iF.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return iF.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iF.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return iF.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await iF.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof iW))throw TypeError("key: Is not a AesCryptoKey")}}class nt extends iz{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new rv("Unsupported algorithm name")}}set alg(e){}}t3([rg({name:"k",converter:iD})],nt.prototype,"data",void 0);class nr{static async generateKey(e,t,r){let i=new nt;return i.algorithm=e,i.extractable=t,i.usages=r,i.data=iN().randomBytes(e.length>>3),i}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return rf.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new rw("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=rp.fromJSON(t,{targetSchema:nt});break;case"raw":(o=new nt).data=iU.Buffer.from(t);break;default:throw new rw("format: Must be 'jwk' or 'raw'")}return o.algorithm=r,o.extractable=i,o.usages=n,o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,iU.Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,iU.Buffer.from(r));default:throw new rw("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof nt))throw Error("key: Is not DesCryptoKey");switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,iU.Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,iU.Buffer.from(r));default:throw new rw("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){let i=iN().createCipheriv("des-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptDesCBC(e,t,r){let i=iN().createDecipheriv("des-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async encryptDesEDE3CBC(e,t,r){let i=iN().createCipheriv("des-ede3-cbc",t.data,iU.Buffer.from(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}static async decryptDesEDE3CBC(e,t,r){let i=iN().createDecipheriv("des-ede3-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=iU.Buffer.concat([n,i.final()])).buffer}}class ni extends rj{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(e,t,r){return iG(await nr.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return nr.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return nr.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return nr.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){let o=await nr.importKey(e,t,{name:this.name,length:this.keySizeBits},i,n);if(o.data.length!==this.keySizeBits>>3)throw new rw("keyData: Wrong key size");return iG(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof nt))throw TypeError("key: Is not a DesCryptoKey")}}class nn extends rj{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){return iG(await nr.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return nr.encrypt(e,iJ(t),new Uint8Array(r))}async onDecrypt(e,t,r){return nr.decrypt(e,iJ(t),new Uint8Array(r))}async onExportKey(e,t){return nr.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){let o=await nr.importKey(e,t,{name:this.name,length:this.keySizeBits},i,n);if(o.data.length!==this.keySizeBits>>3)throw new rw("keyData: Wrong key size");return iG(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof nt))throw TypeError("key: Is not a DesCryptoKey")}}function no(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{let t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${"1"!==t?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new rw("algorithm: Is not recognized")}}class na extends i${constructor(){super(...arguments),this.type="private"}getKey(){let e=t1.parse(this.data,iw.PrivateKeyInfo);return t1.parse(e.privateKey,iw.RsaPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:no(this.algorithm),key_ops:this.usages,ext:this.extractable},rf.toJSON(e))}fromJSON(e){let t=rp.fromJSON(e,{targetSchema:iw.RsaPrivateKey}),r=new iw.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.privateKeyAlgorithm.parameters=null,r.privateKey=t2.serialize(t),this.data=iU.Buffer.from(t2.serialize(r))}}class ns extends i${constructor(){super(...arguments),this.type="public"}getKey(){let e=t1.parse(this.data,iw.PublicKeyInfo);return t1.parse(e.publicKey,iw.RsaPublicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:no(this.algorithm),key_ops:this.usages,ext:this.extractable},rf.toJSON(e))}fromJSON(e){let t=rp.fromJSON(e,{targetSchema:iw.RsaPublicKey}),r=new iw.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=t2.serialize(t),this.data=iU.Buffer.from(t2.serialize(r))}}class nc{static async generateKey(e,t,r){let i=new na;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new ns;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=iU.Buffer.concat([iU.Buffer.alloc(4-e.publicExponent.byteLength,0),iU.Buffer.from(e.publicExponent)]).readInt32BE(0),a=iN().generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:o,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,n.data=a.publicKey,{privateKey:i,publicKey:n}}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return rf.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new rw("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":if(t.d){let e=rp.fromJSON(t,{targetSchema:iw.RsaPrivateKey});return this.importPrivateKey(e,r,i,n)}{let e=rp.fromJSON(t,{targetSchema:iw.RsaPublicKey});return this.importPublicKey(e,r,i,n)}case"spki":{let e=t1.parse(new Uint8Array(t),iw.PublicKeyInfo),o=t1.parse(e.publicKey,iw.RsaPublicKey);return this.importPublicKey(o,r,i,n)}case"pkcs8":{let e=t1.parse(new Uint8Array(t),iw.PrivateKeyInfo),o=t1.parse(e.privateKey,iw.RsaPrivateKey);return this.importPrivateKey(o,r,i,n)}default:throw new rw("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new rw("algorithm: Is not recognized")}}static async verify(e,t,r,i){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,i,r);default:throw new rw("algorithm: Is not recognized")}}static async encrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.encryptOAEP(e,t,r);throw new rw("algorithm: Is not recognized")}static async decrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.decryptOAEP(e,t,r);throw new rw("algorithm: Is not recognized")}static importPrivateKey(e,t,r,i){let n=new iw.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.privateKeyAlgorithm.parameters=null,n.privateKey=t2.serialize(e);let o=new na;return o.data=iU.Buffer.from(t2.serialize(n)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=i,o}static importPublicKey(e,t,r,i){let n=new iw.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.publicKeyAlgorithm.parameters=null,n.publicKey=t2.serialize(e);let o=new ns;return o.data=iU.Buffer.from(t2.serialize(n)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=i,o}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new rw("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){let i=this.getCryptoAlgorithm(t.algorithm),n=iN().createSign(i);n.update(iU.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(o.padding=iN().constants.RSA_PKCS1_PSS_PADDING,o.saltLength=e.saltLength),new Uint8Array(n.sign(o)).buffer}static verifySSA(e,t,r,i){let n=this.getCryptoAlgorithm(t.algorithm),o=iN().createVerify(n);o.update(iU.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(a.padding=iN().constants.RSA_PKCS1_PSS_PADDING,a.saltLength=e.saltLength),o.verify(a,i)}static encryptOAEP(e,t,r){let i={key:`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:iN().constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(iN().publicEncrypt(i,r)).buffer}static decryptOAEP(e,t,r){let i={key:`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:iN().constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(iN().privateDecrypt(i,r)).buffer}}nc.publicKeyUsages=["verify","encrypt","wrapKey"],nc.privateKeyUsages=["sign","decrypt","unwrapKey"];class nu extends rT{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await nc.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onSign(e,t,r){return nc.sign(e,iJ(t),new Uint8Array(r))}async onVerify(e,t,r,i){return nc.verify(e,iJ(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return nc.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nc.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof na||r instanceof ns))throw TypeError("key: Is not RSA CryptoKey")}}class nl extends rU{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await nc.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onSign(e,t,r){return nc.sign(e,iJ(t),new Uint8Array(r))}async onVerify(e,t,r,i){return nc.verify(e,iJ(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return nc.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nc.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof na||r instanceof ns))throw TypeError("key: Is not RSA CryptoKey")}}class nh{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(e,t){let r=this.getAlgorithmName(e);return new Uint8Array(iN().createHash(r).update(iU.Buffer.from(t)).digest()).buffer}}class nd extends rM{async onGenerateKey(e,t,r){let i=await nc.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onEncrypt(e,t,r){let i=iJ(t),n=new Uint8Array(r),o=Math.ceil(i.algorithm.modulusLength>>3),a=nh.size(i.algorithm.hash)>>3,s=n.byteLength,c=o-s-2*a-2;if(s>o-2*a-2)throw Error("Data too large");let u=new Uint8Array(o),l=u.subarray(1,a+1),h=u.subarray(a+1);h.set(n,a+c+1);let d=iN().createHash(i.algorithm.hash.name.replace("-","")).update(D._H.toUint8Array(e.label||new Uint8Array(0))).digest();h.set(d,0),h[a+c]=1,iN().randomFillSync(l);let f=this.mgf1(i.algorithm.hash,l,h.length);for(let e=0;e<h.length;e++)h[e]^=f[e];let p=this.mgf1(i.algorithm.hash,h,l.length);for(let e=0;e<l.length;e++)l[e]^=p[e];return i.pem||(i.pem=`-----BEGIN PUBLIC KEY-----
${i.data.toString("base64")}
-----END PUBLIC KEY-----`),new Uint8Array(iN().publicEncrypt({key:i.pem,padding:iN().constants.RSA_NO_PADDING},iU.Buffer.from(u))).buffer}async onDecrypt(e,t,r){let i=iJ(t),n=Math.ceil(i.algorithm.modulusLength>>3),o=nh.size(i.algorithm.hash)>>3;if(r.byteLength!==n)throw Error("Bad data");i.pem||(i.pem=`-----BEGIN PRIVATE KEY-----
${i.data.toString("base64")}
-----END PRIVATE KEY-----`);let a=iN().privateDecrypt({key:i.pem,padding:iN().constants.RSA_NO_PADDING},iU.Buffer.from(r)),s=a[0],c=a.subarray(1,o+1),u=a.subarray(o+1);if(0!==s)throw Error("Decryption failed");let l=this.mgf1(i.algorithm.hash,u,c.length);for(let e=0;e<c.length;e++)c[e]^=l[e];let h=this.mgf1(i.algorithm.hash,c,u.length);for(let e=0;e<u.length;e++)u[e]^=h[e];let d=iN().createHash(i.algorithm.hash.name.replace("-","")).update(D._H.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<o;e++)if(d[e]!==u[e])throw Error("Decryption failed");let f=o;for(;f<u.length;f++){let e=u[f];if(1===e)break;if(0!==e)throw Error("Decryption failed")}if(f===u.length)throw Error("Decryption failed");return new Uint8Array(a=u.subarray(f+1)).buffer}async onExportKey(e,t){return nc.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nc.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof na||r instanceof ns))throw TypeError("key: Is not RSA CryptoKey")}mgf1(e,t,r=0){let i=nh.size(e)>>3,n=new Uint8Array(r),o=new Uint8Array(4),a=Math.ceil(r/i);for(let r=0;r<a;r++){o[0]=r>>>24,o[1]=r>>>16&255,o[2]=r>>>8&255,o[3]=255&r;let a=n.subarray(r*i),s=iN().createHash(e.name.replace("-","")).update(t).update(o).digest();s.length>a.length&&(s=s.subarray(0,a.length)),a.set(s)}return n}}class nf extends rE{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){let i=await nc.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=D.U$.ToBase64(e.publicExponent);if(!("Aw=="===t||"AQAB"===t))throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){let i=this.toCryptoOptions(t),n=iN().publicEncrypt(i,new Uint8Array(r));return new Uint8Array(n).buffer}async onDecrypt(e,t,r){let i=this.toCryptoOptions(t),n=iN().privateDecrypt(i,new Uint8Array(r));return new Uint8Array(n).buffer}async onExportKey(e,t){return nc.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nc.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof na||r instanceof ns))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(e){let t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----
${iJ(e).data.toString("base64")}
-----END ${t} KEY-----`,padding:iN().constants.RSA_PKCS1_PADDING}}}let np={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function ny(e){let t=np[e];if(!t)throw new rw(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class ng extends i${constructor(){super(...arguments),this.type="private"}getKey(){let e=t1.parse(this.data,iw.PrivateKeyInfo);return t1.parse(e.privateKey,iw.EcPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},rf.toJSON(e))}fromJSON(e){if(!e.crv)throw new rw("Cannot get named curve from JWK. Property 'crv' is required");let t=new iw.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",t.privateKeyAlgorithm.parameters=t2.serialize(new iw.ObjectIdentifier(ny(e.crv)));let r=rp.fromJSON(e,{targetSchema:iw.EcPrivateKey});return t.privateKey=t2.serialize(r),this.data=iU.Buffer.from(t2.serialize(t)),this}}class nm extends i${constructor(){super(...arguments),this.type="public"}getKey(){let e=t1.parse(this.data,iw.PublicKeyInfo);return new iw.EcPublicKey(e.publicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},rf.toJSON(e))}fromJSON(e){if(!e.crv)throw new rw("Cannot get named curve from JWK. Property 'crv' is required");let t=rp.fromJSON(e,{targetSchema:iw.EcPublicKey}),r=new iw.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.publicKeyAlgorithm.parameters=t2.serialize(new iw.ObjectIdentifier(ny(e.crv))),r.publicKey=t2.toASN(t).valueHex,this.data=iU.Buffer.from(t2.serialize(r)),this}}class nv extends rE{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nb extends rE{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nw extends rE{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class n_ extends rE{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nS extends rE{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nA extends rE{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nE extends rE{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(e,t){return nh.digest(e,t)}}class nk{static async generateKey(e,t,r){let i=new ng;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new nm;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=iN().generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=o.privateKey,n.data=o.publicKey,{privateKey:i,publicKey:n}}static async sign(e,t,r){let i=nh.getAlgorithmName(e.hash),n=iN().createSign(i);n.update(iU.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:t.pem},a=n.sign(o),s=t1.parse(a,iw.EcDsaSignature);return r2.encodeSignature(s,i_.get(t.algorithm.namedCurve).size).buffer}static async verify(e,t,r,i){let n=nh.getAlgorithmName(e.hash),o=iN().createVerify(n);o.update(iU.Buffer.from(i)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem},s=new iw.EcDsaSignature,c=i_.get(t.algorithm.namedCurve),u=r2.decodeSignature(r,c.size);s.r=D._H.toArrayBuffer(u.r),s.s=D._H.toArrayBuffer(u.s);let l=iU.Buffer.from(t2.serialize(s));return o.verify(a,l)}static async deriveBits(e,t,r){let i=this.getOpenSSLNamedCurve(t.algorithm.namedCurve),n=iN().createECDH(i),o=t1.parse(t.data,iw.PrivateKeyInfo),a=t1.parse(o.privateKey,iw.EcPrivateKey);n.setPrivateKey(iU.Buffer.from(a.privateKey));let s=t1.parse(e.public.data,iw.PublicKeyInfo),c=n.computeSecret(iU.Buffer.from(s.publicKey));return null===r?c:new Uint8Array(c).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return rf.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return t1.parse(t.data,iw.PublicKeyInfo).publicKey;default:throw new rw("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":if(t.d){let e=rp.fromJSON(t,{targetSchema:iw.EcPrivateKey});return this.importPrivateKey(e,r,i,n)}{let e=rp.fromJSON(t,{targetSchema:iw.EcPublicKey});return this.importPublicKey(e,r,i,n)}case"raw":{let e=new iw.EcPublicKey(t);return this.importPublicKey(e,r,i,n)}case"spki":{let e=t1.parse(new Uint8Array(t),iw.PublicKeyInfo),o=new iw.EcPublicKey(e.publicKey);return this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve),this.importPublicKey(o,r,i,n)}case"pkcs8":{let e=t1.parse(new Uint8Array(t),iw.PrivateKeyInfo),o=t1.parse(e.privateKey,iw.EcPrivateKey);return this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve),this.importPrivateKey(o,r,i,n)}default:throw new rw("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e)throw new rm("Key info doesn't have required parameters");let r="";try{r=t1.parse(e,iw.ObjectIdentifier).value}catch(e){throw new rm("Cannot read key info parameters")}if(ny(t)!==r)throw new rm("Key info parameter doesn't match to named curve")}static async importPrivateKey(e,t,r,i){let n=new iw.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",n.privateKeyAlgorithm.parameters=t2.serialize(new iw.ObjectIdentifier(ny(t.namedCurve))),n.privateKey=t2.serialize(e);let o=new ng;return o.data=iU.Buffer.from(t2.serialize(n)),o.algorithm=Object.assign({},t),o.extractable=r,o.usages=i,o}static async importPublicKey(e,t,r,i){let n=new iw.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let o=ny(t.namedCurve);n.publicKeyAlgorithm.parameters=t2.serialize(new iw.ObjectIdentifier(o)),n.publicKey=e.value;let a=new nm;return a.data=iU.Buffer.from(t2.serialize(n)),a.algorithm=Object.assign({},t),a.extractable=r,a.usages=i,a}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}}nk.publicKeyUsages=["verify"],nk.privateKeyUsages=["sign","deriveKey","deriveBits"];class nO extends rK{constructor(){super(...arguments),this.namedCurves=i_.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await nk.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onSign(e,t,r){return nk.sign(e,iJ(t),new Uint8Array(r))}async onVerify(e,t,r,i){return nk.verify(e,iJ(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return nk.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nk.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not EC CryptoKey")}}class nP extends rL{constructor(){super(...arguments),this.namedCurves=i_.names}async onGenerateKey(e,t,r){let i=await nk.generateKey({...e,name:this.name},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onExportKey(e,t){return nk.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nk.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=iJ(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(e,t,r){return await nk.deriveBits({...e,public:iJ(e.public)},iJ(t),r)}}let nx={[iw.idEd448]:"Ed448",ed448:iw.idEd448,[iw.idX448]:"X448",x448:iw.idX448,[iw.idEd25519]:"Ed25519",ed25519:iw.idEd25519,[iw.idX25519]:"X25519",x25519:iw.idX25519};function nC(e){let t=nx[e.toLowerCase()];if(!t)throw new rw(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class nB extends i${constructor(){super(...arguments),this.type="private"}getKey(){let e=t1.parse(this.data,iw.PrivateKeyInfo);return t1.parse(e.privateKey,iw.CurvePrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},rf.toJSON(e))}fromJSON(e){if(!e.crv)throw new rw("Cannot get named curve from JWK. Property 'crv' is required");let t=new iw.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=nC(e.crv);let r=rp.fromJSON(e,{targetSchema:iw.CurvePrivateKey});return t.privateKey=t2.serialize(r),this.data=iU.Buffer.from(t2.serialize(t)),this}}class nR extends i${constructor(){super(...arguments),this.type="public"}getKey(){return t1.parse(this.data,iw.PublicKeyInfo).publicKey}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},{x:D.U$.ToBase64Url(e)})}fromJSON(e){if(!e.crv)throw new rw("Cannot get named curve from JWK. Property 'crv' is required");if(!e.x)throw new rw("Cannot get property from JWK. Property 'x' is required");let t=new iw.PublicKeyInfo;return t.publicKeyAlgorithm.algorithm=nC(e.crv),t.publicKey=D.U$.FromBase64Url(e.x),this.data=iU.Buffer.from(t2.serialize(t)),this}}class nj{static async generateKey(e,t,r){let i=new nB;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new nR;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=e.namedCurve.toLowerCase(),a=iN().generateKeyPairSync(o,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,n.data=a.publicKey,{privateKey:i,publicKey:n}}static async sign(e,t,r){t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let i={key:t.pem},n=iN().sign(null,iU.Buffer.from(r),i);return D._H.toArrayBuffer(n)}static async verify(e,t,r,i){t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let n={key:t.pem};return iN().verify(null,iU.Buffer.from(i),n,iU.Buffer.from(r))}static async deriveBits(e,t,r){let i=iN().createPublicKey({key:e.public.data,format:"der",type:"spki"}),n=iN().createPrivateKey({key:t.data,format:"der",type:"pkcs8"});return new Uint8Array(iN().diffieHellman({publicKey:i,privateKey:n})).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return rf.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return t1.parse(t.data,iw.PublicKeyInfo).publicKey;default:throw new rw("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":{let e=t;if(e.d){let e=rp.fromJSON(t,{targetSchema:iw.CurvePrivateKey});return this.importPrivateKey(e,r,i,n)}if(!e.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(D.U$.FromBase64Url(e.x),r,i,n)}case"raw":return this.importPublicKey(t,r,i,n);case"spki":{let e=t1.parse(new Uint8Array(t),iw.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,i,n)}case"pkcs8":{let e=t1.parse(new Uint8Array(t),iw.PrivateKeyInfo),o=t1.parse(e.privateKey,iw.CurvePrivateKey);return this.importPrivateKey(o,r,i,n)}default:throw new rw("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,i){let n=new nB;return n.fromJSON({crv:t.namedCurve,d:D.U$.ToBase64Url(e.d)}),n.algorithm=Object.assign({},t),n.extractable=r,n.usages=i,n}static async importPublicKey(e,t,r,i){let n=new nR;return n.fromJSON({crv:t.namedCurve,x:D.U$.ToBase64Url(e)}),n.algorithm=Object.assign({},t),n.extractable=r,n.usages=i,n}}nj.publicKeyUsages=["verify"],nj.privateKeyUsages=["sign","deriveKey","deriveBits"];class nI extends r${async onGenerateKey(e,t,r){let i=await nj.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onSign(e,t,r){return nj.sign(e,iJ(t),new Uint8Array(r))}async onVerify(e,t,r,i){return nj.verify(e,iJ(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return nj.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nj.importKey(e,t,{...r,name:this.name},i,n))}}class nT extends rz{async onGenerateKey(e,t,r){let i=await nj.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onDeriveBits(e,t,r){return await nj.deriveBits({...e,public:iJ(e.public)},iJ(t),r)}async onExportKey(e,t){return nj.exportKey(e,iJ(t))}async onImportKey(e,t,r,i,n){return iG(await nj.importKey(e,t,{...r,name:this.name},i,n))}}class nU extends iL{constructor(e,t,r,i){super(),this.algorithm=e,this.extractable=t,this.usages=r,this.data=iH.from(i)}toJWK(){return{kty:"OKP",crv:this.algorithm.name,key_ops:this.usages,ext:this.extractable}}}class nM extends nU{constructor(){super(...arguments),this.type="private"}toJWK(){let e=iN().createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"}),t=rS.toUint8Array(this.data.toString()),r=t8.parse(t,iw.PrivateKeyInfo),i=t8.parse(r.privateKey,iw.EdPrivateKey).value;return{...super.toJWK(),...e,d:iH.from(new Uint8Array(i)).toString("base64url")}}}class nN extends nU{constructor(){super(...arguments),this.type="public"}toJWK(){let e=iN().createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});return{...super.toJWK(),...e}}}class nK{static async generateKey(e,t,r){let i=e.name.toLowerCase(),n=iN().generateKeyPairSync(i,{publicKeyEncoding:{format:"pem",type:"spki"},privateKeyEncoding:{format:"pem",type:"pkcs8"}}),o={name:"ed25519"===i?"Ed25519":"X25519"},a=r.filter(e=>this.privateKeyUsages.includes(e)),s=r.filter(e=>this.publicKeyUsages.includes(e));return{privateKey:new nM(o,t,a,n.privateKey),publicKey:new nN(o,!0,s,n.publicKey)}}static async sign(e,t,r){let i=iN().sign(null,iH.from(r),t.data);return D._H.toArrayBuffer(i)}static async verify(e,t,r,i){return iN().verify(null,iH.from(i),t.data,r)}static async exportKey(e,t){switch(e){case"jwk":return t.toJWK();case"pkcs8":case"spki":return rS.toArrayBuffer(t.data.toString());case"raw":{let e=t.toJWK();return D.U$.FromBase64Url(e.x)}default:return Promise.reject(new rw("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}static async importKey(e,t,r,i,n){switch(e){case"jwk":{let e=t;if(e.d){let t=new iw.EdPrivateKey;t.value=D._H.toArrayBuffer(iH.from(e.d,"base64url"));let o=new iw.PrivateKeyInfo;o.privateKeyAlgorithm.algorithm="ed25519"===r.name.toLowerCase()?iw.idEd25519:iw.idX25519,o.privateKey=t8.serialize(t);let a=t8.serialize(o);return new nM(r,i,n,rS.fromBufferSource(a,"PRIVATE KEY"))}if(e.x)return new nN(r,i,n,iN().createPublicKey({format:"jwk",key:e}).export({format:"pem",type:"spki"}));throw new rw("keyData: Cannot import JWK. 'd' or 'x' must be presented")}case"pkcs8":return new nM(r,i,n,rS.fromBufferSource(t,"PRIVATE KEY"));case"spki":return new nN(r,i,n,rS.fromBufferSource(t,"PUBLIC KEY"));case"raw":{let e=t,o=iN().createPublicKey({format:"jwk",key:{kty:"OKP",crv:"ed25519"===r.name.toLowerCase()?"Ed25519":"X25519",x:D.U$.ToBase64Url(e)}}).export({format:"pem",type:"spki"});return new nN(r,i,n,o)}default:return Promise.reject(new rw("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}}nK.privateKeyUsages=["sign","deriveBits","deriveKey"],nK.publicKeyUsages=["verify"];class nH extends iA{async onGenerateKey(e,t,r){let i=await nK.generateKey(e,t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onSign(e,t,r){let i=iJ(t);return nK.sign(e,i,new Uint8Array(r))}onVerify(e,t,r,i){let n=iJ(t);return nK.verify(e,n,new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){let r=iJ(t);return nK.exportKey(e,r)}async onImportKey(e,t,r,i,n){return iG(await nK.importKey(e,t,r,i,n))}}class nD extends iS{async onGenerateKey(e,t,r){let i=await nK.generateKey(e,t,r);return{privateKey:iG(i.privateKey),publicKey:iG(i.publicKey)}}async onDeriveBits(e,t,r){let i=iJ(t),n=iJ(e.public),o=iN().createPublicKey({key:n.data.toString(),format:"pem",type:"spki"}),a=iN().createPrivateKey({key:i.data.toString(),format:"pem",type:"pkcs8"});return new Uint8Array(iN().diffieHellman({publicKey:o,privateKey:a})).buffer.slice(0,r>>3)}async onExportKey(e,t){let r=iJ(t);return nK.exportKey(e,r)}async onImportKey(e,t,r,i,n){return iG(await nK.importKey(e,t,r,i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof nU))throw TypeError("key: Is not a Ed25519CryptoKey")}}class nL extends iL{}class nz extends ik{async onDeriveBits(e,t,r){return new Promise((i,n)=>{let o=D._H.toArrayBuffer(e.salt),a=e.hash.name.replace("-","");iN().pbkdf2(iJ(t).data,iU.Buffer.from(o),e.iterations,r>>3,a,(e,t)=>{e?n(e):i(new Uint8Array(t).buffer)})})}async onImportKey(e,t,r,i,n){if("raw"===e){let e=new nL;return e.data=iU.Buffer.from(t),e.algorithm={name:this.name},e.extractable=!1,e.usages=n,iG(e)}throw new rw("format: Must be 'raw'")}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof nL))throw TypeError("key: Is not PBKDF CryptoKey")}}class n$ extends iL{get alg(){let e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}t3([rg({name:"k",converter:iD})],n$.prototype,"data",void 0);class nW extends iE{async onGenerateKey(e,t,r){let i=(e.length||this.getDefaultLength(e.hash.name))>>3<<3,n=new n$;return n.algorithm={...e,length:i,name:this.name},n.extractable=t,n.usages=r,n.data=iN().randomBytes(i>>3),iG(n)}async onSign(e,t,r){let i=nh.getAlgorithmName(t.algorithm.hash);return new Uint8Array(iN().createHmac(i,iJ(t).data).update(iU.Buffer.from(r)).digest()).buffer}async onVerify(e,t,r,i){let n=nh.getAlgorithmName(t.algorithm.hash);return 0===iN().createHmac(n,iJ(t).data).update(iU.Buffer.from(i)).digest().compare(iU.Buffer.from(r))}async onImportKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=rp.fromJSON(t,{targetSchema:n$});break;case"raw":(o=new n$).data=iU.Buffer.from(t);break;default:throw new rw("format: Must be 'jwk' or 'raw'")}return o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3},o.extractable=i,o.usages=n,iG(o)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return rf.toJSON(iJ(t));case"raw":return new Uint8Array(iJ(t).data).buffer;default:throw new rw("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof n$))throw TypeError("key: Is not HMAC CryptoKey")}}class nF extends iL{}class nV extends iO{async onImportKey(e,t,r,i,n){if("raw"!==e.toLowerCase())throw new rw("Operation not supported");let o=new nF;return o.data=iU.Buffer.from(t),o.algorithm={name:this.name},o.extractable=i,o.usages=n,iG(o)}async onDeriveBits(e,t,r){let i=e.hash.name.replace("-",""),n=iN().createHash(i).digest().length,o=r/8,a=D._H.toUint8Array(e.info),s=iN().createHmac(i,D._H.toUint8Array(e.salt)).update(D._H.toUint8Array(iJ(t).data)).digest(),c=[iU.Buffer.alloc(0)],u=Math.ceil(o/n)+1;for(let e=1;e<u;++e)c.push(iN().createHmac(i,s).update(iU.Buffer.concat([c[e-1],a,iU.Buffer.from([e])])).digest());return iU.Buffer.concat(c).slice(0,o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(iJ(e)instanceof nF))throw TypeError("key: Is not HKDF CryptoKey")}}class nJ{static digest(e,t){return new Uint8Array(iN().createHash(e.name.toLowerCase(),{outputLength:e.length}).update(iU.Buffer.from(t)).digest()).buffer}}class nG extends ix{async onDigest(e,t){return nJ.digest(e,t)}}class nq extends iC{async onDigest(e,t){return nJ.digest(e,t)}}class nY extends iT{constructor(){var e;super(),this.providers.set(new iq),this.providers.set(new i4),this.providers.set(new i7),this.providers.set(new i5),this.providers.set(new i9),this.providers.set(new ne),iN().getCiphers().includes("des-cbc")&&this.providers.set(new ni),this.providers.set(new nn),this.providers.set(new nu),this.providers.set(new nl),this.providers.set(new nd),this.providers.set(new nf),this.providers.set(new nO),this.providers.set(new nP),this.providers.set(new nv),this.providers.set(new nb),this.providers.set(new nw),this.providers.set(new n_),this.providers.set(new nz),this.providers.set(new nW),this.providers.set(new nV);let t=null===(e=/^v(\d+)/.exec(iK.version))||void 0===e?void 0:e[1];t&&parseInt(t,10)>=12&&(this.providers.set(new nG),this.providers.set(new nq));let r=iN().getHashes();r.includes("sha3-256")&&this.providers.set(new nS),r.includes("sha3-384")&&this.providers.set(new nA),r.includes("sha3-512")&&this.providers.set(new nE),t&&parseInt(t,10)>=14&&(this.providers.set(new nI),this.providers.set(new nT),this.providers.set(new nH),this.providers.set(new nD))}}class nX extends iB{constructor(){super(...arguments),this.subtle=new nY}getRandomValues(e){if(!ArrayBuffer.isView(e))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let t=iU.Buffer.from(e.buffer,e.byteOffset,e.byteLength);return iN().randomFillSync(t),e}}},509:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.AuditLogs=void 0;let n=r(1320);class o{constructor(e){this.workos=e}createEvent(e,t,r={}){return i(this,void 0,void 0,function*(){yield this.workos.post("/audit_logs/events",{event:(0,n.serializeCreateAuditLogEventOptions)(t),organization_id:e},r)})}createExport(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/audit_logs/exports",(0,n.serializeAuditLogExportOptions)(e));return(0,n.deserializeAuditLogExport)(t)})}getExport(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/audit_logs/exports/${e}`);return(0,n.deserializeAuditLogExport)(t)})}createSchema(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post(`/audit_logs/actions/${e.action}/schemas`,(0,n.serializeCreateAuditLogSchemaOptions)(e),t);return(0,n.deserializeAuditLogSchema)(r)})}}t.AuditLogs=o},7740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5163:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7740),t),n(r(3183),t),n(r(5677),t),n(r(7106),t)},6972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuditLogExportOptions=void 0;let r=e=>({actions:e.actions,actors:e.actors,actor_names:e.actorNames,actor_ids:e.actorIds,organization_id:e.organizationId,range_end:e.rangeEnd.toISOString(),range_start:e.rangeStart.toISOString(),targets:e.targets});t.serializeAuditLogExportOptions=r},2717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAuditLogExport=void 0;let r=e=>({object:e.object,id:e.id,state:e.state,url:e.url,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeAuditLogExport=r},8063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateAuditLogEventOptions=void 0;let r=e=>({action:e.action,version:e.version,occurred_at:e.occurredAt.toISOString(),actor:e.actor,targets:e.targets,context:{location:e.context.location,user_agent:e.context.userAgent},metadata:e.metadata});t.serializeCreateAuditLogEventOptions=r},7908:(e,t)=>{"use strict";function r(e){if(!e)return{};let t={};return Object.keys(e).forEach(r=>{t[r]={type:e[r]}}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateAuditLogSchemaOptions=void 0;let i=e=>{var t;return{actor:{metadata:{type:"object",properties:r(null===(t=e.actor)||void 0===t?void 0:t.metadata)}},targets:e.targets.map(e=>({type:e.type,metadata:e.metadata?{type:"object",properties:r(e.metadata)}:void 0})),metadata:{type:"object",properties:r(e.metadata)}}};t.serializeCreateAuditLogSchemaOptions=i},4453:(e,t)=>{"use strict";function r(e){if(!e||!e.properties)return{};let t={};return Object.keys(e.properties).forEach(r=>{e.properties&&(t[r]=e.properties[r].type)}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAuditLogSchema=void 0;let i=e=>{var t;return{object:e.object,version:e.version,targets:e.targets.map(e=>({type:e.type,metadata:e.metadata?r(e.metadata):void 0})),actor:{metadata:r(null===(t=e.actor)||void 0===t?void 0:t.metadata)},metadata:r(e.metadata),createdAt:e.created_at}};t.deserializeAuditLogSchema=i},1320:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2717),t),n(r(6972),t),n(r(8063),t),n(r(7908),t),n(r(4453),t)},4791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoProvider=void 0;class r{constructor(){this.encoder=new TextEncoder}}t.CryptoProvider=r},7244:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeCryptoProvider=void 0;let s=o(r(4624)),c=r(4791);class u extends c.CryptoProvider{computeHMACSignature(e,t){return s.createHmac("sha256",t).update(e,"utf8").digest("hex")}computeHMACSignatureAsync(e,t){return a(this,void 0,void 0,function*(){return yield this.computeHMACSignature(e,t)})}secureCompare(e,t){return a(this,void 0,void 0,function*(){let r=this.encoder.encode(e),i=this.encoder.encode(t);if(r.length!==i.length)return!1;let n=s.randomBytes(32),o=s.createHmac("sha256",n).update(r).digest(),a=s.createHmac("sha256",n).update(i).digest();return s.timingSafeEqual(o,a)})}}t.NodeCryptoProvider=u},8761:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SubtleCryptoProvider=void 0;let n=r(4791);class o extends n.CryptoProvider{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw Error("SubleCryptoProvider cannot be used in a synchronous context.")}computeHMACSignatureAsync(e,t){return i(this,void 0,void 0,function*(){let r=new TextEncoder,i=yield this.subtleCrypto.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=new Uint8Array((yield this.subtleCrypto.sign("hmac",i,r.encode(e)))),o=Array(n.length);for(let e=0;e<n.length;e++)o[e]=a[n[e]];return o.join("")})}secureCompare(e,t){return i(this,void 0,void 0,function*(){let r=this.encoder.encode(e),i=this.encoder.encode(t);if(r.length!==i.length)return!1;let n={name:"HMAC",hash:"SHA-256"},o=yield crypto.subtle.generateKey(n,!1,["sign","verify"]),a=yield crypto.subtle.sign(n,o,r);return yield crypto.subtle.verify(n,o,a,i)})}}t.SubtleCryptoProvider=o;let a=Array(256);for(let e=0;e<a.length;e++)a[e]=e.toString(16).padStart(2,"0")},6517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadRequestException=void 0;class r extends Error{constructor({code:e,errors:t,message:r,requestID:i}){super(),this.status=400,this.name="BadRequestException",this.message="Bad request",this.requestID=i,r&&(this.message=r),e&&(this.code=e),t&&(this.errors=t)}}t.BadRequestException=r},8265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericServerException=void 0;class r extends Error{constructor(e,t,r,i){super(),this.status=e,this.rawData=r,this.requestID=i,this.name="GenericServerException",this.message="The request could not be completed.",t&&(this.message=t)}}t.GenericServerException=r},1045:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(8265),t),n(r(6517),t),n(r(9718),t),n(r(5130),t),n(r(205),t),n(r(6592),t),n(r(3060),t),n(r(4396),t),n(r(6877),t)},9718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoApiKeyProvidedException=void 0;class r extends Error{constructor(){super(...arguments),this.status=500,this.name="NoApiKeyProvidedException",this.message='Missing API key. Pass it to the constructor (new WorkOS("sk_test_Sz3IQjepeSWaI4cMS4ms4sMuU")) or define it in the WORKOS_API_KEY environment variable.'}}t.NoApiKeyProvidedException=r},5130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundException=void 0;class r extends Error{constructor({code:e,message:t,path:r,requestID:i}){super(),this.status=404,this.name="NotFoundException",this.code=e,this.message=null!=t?t:`The requested path '${r}' could not be found.`,this.requestID=i}}t.NotFoundException=r},205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OauthException=void 0;class r extends Error{constructor(e,t,r,i,n){super(),this.status=e,this.requestID=t,this.error=r,this.errorDescription=i,this.rawData=n,this.name="OauthException",r&&i?this.message=`Error: ${r}
Error Description: ${i}`:r?this.message=`Error: ${r}`:this.message="An error has occurred."}}t.OauthException=r},6592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RateLimitExceededException=void 0;let i=r(8265);class n extends i.GenericServerException{constructor(e,t,r){super(429,e,{},t),this.retryAfter=r,this.name="RateLimitExceededException"}}t.RateLimitExceededException=n},3060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureVerificationException=void 0;class r extends Error{constructor(e){super(e||"Signature verification failed."),this.name="SignatureVerificationException"}}t.SignatureVerificationException=r},4396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnauthorizedException=void 0;class r extends Error{constructor(e){super(),this.requestID=e,this.status=401,this.name="UnauthorizedException",this.message="Could not authorize the request. Maybe your API key is invalid?"}}t.UnauthorizedException=r},6877:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnprocessableEntityException=void 0;let n=i(r(5127));class o extends Error{constructor({code:e,errors:t,message:r,requestID:i}){if(super(),this.status=422,this.name="UnprocessableEntityException",this.message="Unprocessable entity",this.requestID=i,r&&(this.message=r),e&&(this.code=e),t){let e=(0,n.default)("requirement",t.length);for(let{code:r}of(this.message=`The following ${e} must be met:
`,t))this.message=this.message.concat(`	${r}
`)}}}t.UnprocessableEntityException=o},3878:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6433:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4631:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(3878),t),n(r(6433),t),n(r(8598),t),n(r(8327),t),n(r(3264),t),n(r(2097),t),n(r(6390),t),n(r(576),t),n(r(2045),t),n(r(2454),t)},8598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2045:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8327:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},576:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IronSessionProvider=void 0;class r{}t.IronSessionProvider=r},7212:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.WebIronSessionProvider=void 0;let n=r(7807),o=r(9187);class a extends o.IronSessionProvider{sealData(e,t){return i(this,void 0,void 0,function*(){return(0,n.sealData)(e,t)})}unsealData(e,t){return i(this,void 0,void 0,function*(){return(0,n.unsealData)(e,t)})}}t.WebIronSessionProvider=a},4532:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchHttpClientResponse=t.FetchHttpClient=void 0;let n=r(2042);class o extends n.HttpClient{constructor(e,t,r){if(super(e,t),this.baseURL=e,this.options=t,!r){if(!globalThis.fetch)throw Error("Fetch function not defined in the global scope and no replacement was provided.");r=globalThis.fetch}this._fetchFn=r.bind(globalThis)}getClientName(){return"fetch"}get(e,t){return i(this,void 0,void 0,function*(){let r=n.HttpClient.getResourceURL(this.baseURL,e,t.params);return e.startsWith("/fga/")?yield this.fetchRequestWithRetry(r,"GET",null,t.headers):yield this.fetchRequest(r,"GET",null,t.headers)})}post(e,t,r){return i(this,void 0,void 0,function*(){let i=n.HttpClient.getResourceURL(this.baseURL,e,r.params);return e.startsWith("/fga/")?yield this.fetchRequestWithRetry(i,"POST",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.fetchRequest(i,"POST",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers))})}put(e,t,r){return i(this,void 0,void 0,function*(){let i=n.HttpClient.getResourceURL(this.baseURL,e,r.params);return e.startsWith("/fga/")?yield this.fetchRequestWithRetry(i,"PUT",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.fetchRequest(i,"PUT",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers))})}delete(e,t){return i(this,void 0,void 0,function*(){let r=n.HttpClient.getResourceURL(this.baseURL,e,t.params);return e.startsWith("/fga/")?yield this.fetchRequestWithRetry(r,"DELETE",null,t.headers):yield this.fetchRequest(r,"DELETE",null,t.headers)})}fetchRequest(e,t,r,o){var s,c;return i(this,void 0,void 0,function*(){let i="POST"===t||"PUT"===t||"PATCH"===t,u=r||(i?"":void 0),{"User-Agent":l}=null===(s=this.options)||void 0===s?void 0:s.headers,h=yield this._fetchFn(e,{method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null===(c=this.options)||void 0===c?void 0:c.headers),o),{"User-Agent":this.addClientToUserAgent(l.toString())}),body:u});if(!h.ok)throw new n.HttpClientError({message:h.statusText,response:{status:h.status,headers:h.headers,data:yield h.json()}});return new a(h)})}fetchRequestWithRetry(e,t,r,n){return i(this,void 0,void 0,function*(){let o;let a=1,s=()=>i(this,void 0,void 0,function*(){let i=null;try{o=yield this.fetchRequest(e,t,r,n)}catch(e){i=e}if(this.shouldRetryRequest(i,a))return a++,yield this.sleep(a),s();if(null!=i)throw i;return o});return s()})}shouldRetryRequest(e,t){return!(t>this.MAX_RETRY_ATTEMPTS)&&!!(null!=e&&(e instanceof TypeError||e instanceof n.HttpClientError&&this.RETRY_STATUS_CODES.includes(e.response.status)))}}t.FetchHttpClient=o;class a extends n.HttpClientResponse{constructor(e){super(e.status,a._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toJSON(){let e=this._res.headers.get("content-type");return(null==e?void 0:e.includes("application/json"))?this._res.json():null}static _transformHeadersToObject(e){let t={};for(let r of Object.entries(e)){if(!Array.isArray(r)||2!==r.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[r[0]]=r[1]}return t}}t.FetchHttpClientResponse=a},2042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClientError=t.HttpClientResponse=t.HttpClient=void 0;class r{constructor(e,t){this.baseURL=e,this.options=t,this.MAX_RETRY_ATTEMPTS=3,this.BACKOFF_MULTIPLIER=1.5,this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS=500,this.RETRY_STATUS_CODES=[500,502,504],this.sleep=e=>new Promise(t=>setTimeout(t,this.getSleepTimeInMilliseconds(e)))}getClientName(){throw Error("getClientName not implemented")}addClientToUserAgent(e){return e.indexOf(" ")>-1?e.replace(/\b\s/,`/${this.getClientName()} `):e+=`/${this.getClientName()}`}static getResourceURL(e,t,i){return new URL([t,r.getQueryString(i)].filter(Boolean).join("?"),e).toString()}static getQueryString(e){if(!e)return;let t={};return Object.entries(e).forEach(([e,r])=>{""!==r&&void 0!==r&&(t[e]=r)}),new URLSearchParams(t).toString()}static getContentTypeHeader(e){if(e instanceof URLSearchParams)return{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}static getBody(e){return null===e||e instanceof URLSearchParams?e:JSON.stringify(e)}getSleepTimeInMilliseconds(e){return this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS*Math.pow(this.BACKOFF_MULTIPLIER,e)*(Math.random()+.5)}}t.HttpClient=r;class i{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}}t.HttpClientResponse=i;class n extends Error{constructor({message:e,response:t}){super(e),this.name="HttpClientError",this.message="The request could not be completed.",this.message=e,this.response=t}}t.HttpClientError=n},4554:function(e,t,r){"use strict";var i=r(8287).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHttpClientResponse=t.NodeHttpClient=void 0;let c=r(2042),u=a(r(6313)),l=a(r(7780)),h=u.default||u,d=l.default||l;class f extends c.HttpClient{constructor(e,t){super(e,t),this.baseURL=e,this.options=t,this.httpAgent=new h.Agent({keepAlive:!0}),this.httpsAgent=new d.Agent({keepAlive:!0})}getClientName(){return"node"}static getBody(e){return null==e?null:e instanceof URLSearchParams?e.toString():JSON.stringify(e)}get(e,t){return s(this,void 0,void 0,function*(){let r=c.HttpClient.getResourceURL(this.baseURL,e,t.params);return e.startsWith("/fga/")?yield this.nodeRequestWithRetry(r,"GET",null,t.headers):yield this.nodeRequest(r,"GET",null,t.headers)})}post(e,t,r){return s(this,void 0,void 0,function*(){let i=c.HttpClient.getResourceURL(this.baseURL,e,r.params);return e.startsWith("/fga/")?yield this.nodeRequestWithRetry(i,"POST",f.getBody(t),Object.assign(Object.assign({},c.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.nodeRequest(i,"POST",f.getBody(t),Object.assign(Object.assign({},c.HttpClient.getContentTypeHeader(t)),r.headers))})}put(e,t,r){return s(this,void 0,void 0,function*(){let i=c.HttpClient.getResourceURL(this.baseURL,e,r.params);return e.startsWith("/fga/")?yield this.nodeRequestWithRetry(i,"PUT",f.getBody(t),Object.assign(Object.assign({},c.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.nodeRequest(i,"PUT",f.getBody(t),Object.assign(Object.assign({},c.HttpClient.getContentTypeHeader(t)),r.headers))})}delete(e,t){return s(this,void 0,void 0,function*(){let r=c.HttpClient.getResourceURL(this.baseURL,e,t.params);return e.startsWith("/fga/")?yield this.nodeRequestWithRetry(r,"DELETE",null,t.headers):yield this.nodeRequest(r,"DELETE",null,t.headers)})}nodeRequest(e,t,r,n){return s(this,void 0,void 0,function*(){return new Promise((o,a)=>{var u,l;let f=e.startsWith("https"),y=f?this.httpsAgent:this.httpAgent,g=f?d:h,{"User-Agent":m}=null===(u=this.options)||void 0===u?void 0:u.headers,v={method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null===(l=this.options)||void 0===l?void 0:l.headers),n),{"User-Agent":this.addClientToUserAgent(m.toString())}),agent:y},b=g.request(e,v,e=>s(this,void 0,void 0,function*(){let t=new p(e);e.statusCode&&(e.statusCode<200||e.statusCode>299)&&a(new c.HttpClientError({message:e.statusMessage,response:{status:e.statusCode,headers:e.headers,data:yield t.toJSON()}})),o(t)}));b.on("error",e=>{a(Error(e.message))}),r&&(b.setHeader("Content-Length",i.byteLength(r)),b.write(r)),b.end()})})}nodeRequestWithRetry(e,t,r,n){var o,a;return s(this,void 0,void 0,function*(){let u=e.startsWith("https"),l=u?this.httpsAgent:this.httpAgent,f=u?d:h,{"User-Agent":y}=null===(o=this.options)||void 0===o?void 0:o.headers,g={method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null===(a=this.options)||void 0===a?void 0:a.headers),n),{"User-Agent":this.addClientToUserAgent(y.toString())}),agent:l},m=1,v=()=>s(this,void 0,void 0,function*(){return new Promise((t,n)=>{let o=f.request(e,g,e=>s(this,void 0,void 0,function*(){let r=new p(e);if(this.shouldRetryRequest(e,m))return m++,yield this.sleep(m),v().then(t).catch(n);e.statusCode&&(e.statusCode<200||e.statusCode>299)&&n(new c.HttpClientError({message:e.statusMessage,response:{status:e.statusCode,headers:e.headers,data:yield r.toJSON()}})),t(new p(e))}));o.on("error",e=>s(this,void 0,void 0,function*(){if(null!=e&&e instanceof TypeError)return m++,yield this.sleep(m),v().then(t).catch(n);n(Error(e.message))})),r&&(o.setHeader("Content-Length",i.byteLength(r)),o.write(r)),o.end()})});return v()})}shouldRetryRequest(e,t){return!(t>this.MAX_RETRY_ATTEMPTS)&&!!(null!=e&&this.RETRY_STATUS_CODES.includes(e.statusCode))}}t.NodeHttpClient=f;class p extends c.HttpClientResponse{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toJSON(){return new Promise((e,t)=>{let r=this._res.headers["content-type"];(null==r?void 0:r.includes("application/json"))||e(null);let i="";this._res.setEncoding("utf8"),this._res.on("data",e=>{i+=e}),this._res.once("end",()=>{try{e(JSON.parse(i))}catch(e){t(e)}})})}}t.NodeHttpClientResponse=p},1904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeEvent=void 0;let i=r(3772),n=r(8395),o=r(8588),a=r(7858),s=r(5988),c=r(2672),u=r(316),l=r(1918),h=e=>{let t={id:e.id,createdAt:e.created_at};switch(e.event){case"authentication.email_verification_succeeded":case"authentication.magic_auth_failed":case"authentication.magic_auth_succeeded":case"authentication.mfa_succeeded":case"authentication.oauth_failed":case"authentication.oauth_succeeded":case"authentication.password_failed":case"authentication.password_succeeded":case"authentication.sso_failed":case"authentication.sso_succeeded":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeAuthenticationEvent)(e.data)});case"connection.activated":case"connection.deactivated":case"connection.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,o.deserializeConnection)(e.data)});case"dsync.activated":case"dsync.deactivated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeEventDirectory)(e.data)});case"dsync.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDeletedEventDirectory)(e.data)});case"dsync.group.created":case"dsync.group.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDirectoryGroup)(e.data)});case"dsync.group.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeUpdatedEventDirectoryGroup)(e.data)});case"dsync.group.user_added":case"dsync.group.user_removed":return Object.assign(Object.assign({},t),{event:e.event,data:{directoryId:e.data.directory_id,user:(0,i.deserializeDirectoryUser)(e.data.user),group:(0,i.deserializeDirectoryGroup)(e.data.group)}});case"dsync.user.created":case"dsync.user.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDirectoryUser)(e.data)});case"dsync.user.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeUpdatedEventDirectoryUser)(e.data)});case"email_verification.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeEmailVerificationEvent)(e.data)});case"invitation.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeInvitationEvent)(e.data)});case"magic_auth.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeMagicAuthEvent)(e.data)});case"password_reset.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializePasswordResetEvent)(e.data)});case"user.created":case"user.updated":case"user.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeUser)(e.data)});case"organization_membership.added":case"organization_membership.created":case"organization_membership.deleted":case"organization_membership.updated":case"organization_membership.removed":return Object.assign(Object.assign({},t),{event:e.event,data:(0,c.deserializeOrganizationMembership)(e.data)});case"role.created":case"role.deleted":case"role.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,u.deserializeRole)(e.data)});case"session.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,l.deserializeSession)(e.data)});case"organization.created":case"organization.updated":case"organization.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,n.deserializeOrganization)(e.data)});case"organization_domain.verified":case"organization_domain.verification_failed":return Object.assign(Object.assign({},t),{event:e.event,data:(0,s.deserializeOrganizationDomain)(e.data)})}};t.deserializeEvent=h},1276:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1904),t),n(r(38),t)},38:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeList=void 0;let r=(e,t)=>({object:"list",data:e.data.map(t),listMetadata:e.list_metadata});t.deserializeList=r},1638:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAndDeserialize=void 0;let n=r(1276),o=e=>Object.assign(Object.assign({},e),{order:(null==e?void 0:e.order)||"desc"}),a=(e,t,r,a,s)=>i(void 0,void 0,void 0,function*(){let{data:i}=yield e.get(t,Object.assign({query:o(a)},s));return(0,n.deserializeList)(i,r)});t.fetchAndDeserialize=a},734:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,o){n(i,o,(t=e[r](t)).done,t.value)})}}function n(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}},o=this&&this.__asyncDelegator||function(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:i(e[n](t)),done:!1}:o?o(t):t}:o}},a=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise(function(r,i){a.push([e,t,r,i])>1||c(e,t)})})}function c(e,t){try{u(o[e](t))}catch(e){d(a[0][3],e)}}function u(e){e.value instanceof i?Promise.resolve(e.value.v).then(l,h):d(a[0][2],e)}function l(e){c("next",e)}function h(e){c("throw",e)}function d(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPaginatable=void 0;class s{constructor(e,t,r){this.list=e,this.apiCall=t,this.object="list",this.options=Object.assign({},r)}get data(){return this.list.data}get listMetadata(){return this.list.listMetadata}generatePages(e){return a(this,arguments,function*(){let t=yield i(this.apiCall(Object.assign(Object.assign({},this.options),{limit:100,after:e.after})));yield yield i(t.data),t.listMetadata.after&&(yield i(new Promise(e=>setTimeout(e,250))),yield i((yield*o(n(this.generatePages({after:t.listMetadata.after}))))))})}autoPagination(){var e,t,i,o;return r(this,void 0,void 0,function*(){if(this.options.limit)return this.data;let r=[];try{for(var a,s=!0,c=n(this.generatePages({after:this.options.after}));!(e=(a=yield c.next()).done);s=!0){o=a.value,s=!1;let e=o;r.push(...e)}}catch(e){t={error:e}}finally{try{!s&&!e&&(i=c.return)&&(yield i.call(c))}finally{if(t)throw t.error}}return r})}}t.AutoPaginatable=s},3829:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectorySync=void 0;let n=r(734),o=r(3772),a=r(1638);class s{constructor(e){this.workos=e}listDirectories(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directories",o.deserializeDirectory,e?(0,o.serializeListDirectoriesOptions)(e):void 0)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directories",o.deserializeDirectory,e),e?(0,o.serializeListDirectoriesOptions)(e):void 0)})}getDirectory(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directories/${e}`);return(0,o.deserializeDirectory)(t)})}deleteDirectory(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/directories/${e}`)})}listGroups(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directory_groups",o.deserializeDirectoryGroup,e)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directory_groups",o.deserializeDirectoryGroup,e),e)})}listUsers(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directory_users",o.deserializeDirectoryUserWithGroups,e)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directory_users",o.deserializeDirectoryUserWithGroups,e),e)})}getUser(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directory_users/${e}`);return(0,o.deserializeDirectoryUserWithGroups)(t)})}getGroup(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directory_groups/${e}`);return(0,o.deserializeDirectoryGroup)(t)})}}t.DirectorySync=s},9967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4151:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5141),t),n(r(9967),t),n(r(6843),t),n(r(9558),t),n(r(4702),t),n(r(7551),t)},6843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUpdatedEventDirectoryGroup=t.deserializeDirectoryGroup=void 0;let r=e=>({id:e.id,idpId:e.idp_id,directoryId:e.directory_id,organizationId:e.organization_id,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,rawAttributes:e.raw_attributes});t.deserializeDirectoryGroup=r;let i=e=>({id:e.id,idpId:e.idp_id,directoryId:e.directory_id,organizationId:e.organization_id,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,rawAttributes:e.raw_attributes,previousAttributes:e.previous_attributes});t.deserializeUpdatedEventDirectoryGroup=i},6945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUpdatedEventDirectoryUser=t.deserializeDirectoryUserWithGroups=t.deserializeDirectoryUser=void 0;let i=r(5975),n=e=>({object:e.object,id:e.id,directoryId:e.directory_id,organizationId:e.organization_id,rawAttributes:e.raw_attributes,customAttributes:e.custom_attributes,idpId:e.idp_id,firstName:e.first_name,emails:e.emails,username:e.username,lastName:e.last_name,jobTitle:e.job_title,state:e.state,role:e.role,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeDirectoryUser=n;let o=e=>Object.assign(Object.assign({},(0,t.deserializeDirectoryUser)(e)),{groups:e.groups.map(i.deserializeDirectoryGroup)});t.deserializeDirectoryUserWithGroups=o;let a=e=>({object:"directory_user",id:e.id,directoryId:e.directory_id,organizationId:e.organization_id,rawAttributes:e.raw_attributes,customAttributes:e.custom_attributes,idpId:e.idp_id,firstName:e.first_name,emails:e.emails,username:e.username,lastName:e.last_name,jobTitle:e.job_title,state:e.state,role:e.role,createdAt:e.created_at,updatedAt:e.updated_at,previousAttributes:e.previous_attributes});t.deserializeUpdatedEventDirectoryUser=a},9085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeDeletedEventDirectory=t.deserializeEventDirectory=t.deserializeDirectoryState=t.deserializeDirectory=void 0;let r=e=>({object:e.object,id:e.id,domain:e.domain,externalKey:e.external_key,name:e.name,organizationId:e.organization_id,state:(0,t.deserializeDirectoryState)(e.state),type:e.type,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeDirectory=r;let i=e=>"linked"===e?"active":"unlinked"===e?"inactive":e;t.deserializeDirectoryState=i;let n=e=>({object:e.object,id:e.id,externalKey:e.external_key,type:e.type,state:e.state,name:e.name,organizationId:e.organization_id,domains:e.domains,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeEventDirectory=n;let o=e=>({object:e.object,id:e.id,type:e.type,state:e.state,name:e.name,organizationId:e.organization_id,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeDeletedEventDirectory=o},3772:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5975),t),n(r(6945),t),n(r(9085),t),n(r(7941),t)},7941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListDirectoriesOptions=void 0;let r=e=>({organization_id:e.organizationId,search:e.search,limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeListDirectoriesOptions=r},3570:(e,t)=>{"use strict";function r(e){var t;let r=null===(t=e.emails)||void 0===t?void 0:t.find(e=>e.primary);return null==r?void 0:r.value}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrimaryEmail=void 0,t.getPrimaryEmail=r},173:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;let n=r(1276),o=r(8056);class a{constructor(e){this.workos=e}listEvents(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get("/events",{query:e?(0,o.serializeListEventOptions)(e):void 0});return(0,n.deserializeList)(t,n.deserializeEvent)})}}t.Events=a},859:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7163),t)},7163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8056:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1220),t)},1220:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListEventOptions=void 0;let r=e=>({events:e.events,organization_id:e.organizationId,range_start:e.rangeStart,range_end:e.rangeEnd,limit:e.limit,after:e.after});t.serializeListEventOptions=r},3837:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FGA=void 0;let n=r(3800),o=r(9413),a=r(6559),s=r(734),c=r(1638);class u{constructor(e){this.workos=e}check(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/fga/v1/check",(0,o.serializeCheckOptions)(e),t);return new n.CheckResult(r)})}checkBatch(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/fga/v1/check",(0,o.serializeCheckBatchOptions)(e),t);return r.map(e=>new n.CheckResult(e))})}createResource(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/resources",(0,o.serializeCreateResourceOptions)(e));return(0,o.deserializeResource)(t)})}getResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e)?e.getResourceType():e.resourceType,r=(0,a.isResourceInterface)(e)?e.getResourceId():e.resourceId,{data:i}=yield this.workos.get(`/fga/v1/resources/${t}/${r}`);return(0,o.deserializeResource)(i)})}listResources(e){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/resources",o.deserializeResource,e?(0,o.serializeListResourceOptions)(e):void 0)),e=>(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/resources",o.deserializeResource,e),e?(0,o.serializeListResourceOptions)(e):void 0)})}updateResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,r=(0,a.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId,{data:i}=yield this.workos.put(`/fga/v1/resources/${t}/${r}`,{meta:e.meta});return(0,o.deserializeResource)(i)})}deleteResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e)?e.getResourceType():e.resourceType,r=(0,a.isResourceInterface)(e)?e.getResourceId():e.resourceId;yield this.workos.delete(`/fga/v1/resources/${t}/${r}`)})}batchWriteResources(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/resources/batch",(0,o.serializeBatchWriteResourcesOptions)(e));return(0,o.deserializeBatchWriteResourcesResponse)(t)})}writeWarrant(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/warrants",(0,o.serializeWriteWarrantOptions)(e));return(0,o.deserializeWarrantToken)(t)})}batchWriteWarrants(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/warrants",e.map(o.serializeWriteWarrantOptions));return(0,o.deserializeWarrantToken)(t)})}listWarrants(e,t){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",o.deserializeWarrant,e?(0,o.serializeListWarrantsOptions)(e):void 0,t)),e=>(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",o.deserializeWarrant,e,t),e?(0,o.serializeListWarrantsOptions)(e):void 0)})}query(e,t={}){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/query",o.deserializeQueryResult,(0,o.serializeQueryOptions)(e),t)),e=>(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/query",o.deserializeQueryResult,e,t),(0,o.serializeQueryOptions)(e))})}}t.FGA=u},1599:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckOp=void 0,function(e){e.AllOf="all_of",e.AnyOf="any_of"}(r||(t.CheckOp=r={}))},9253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckResult=void 0;let i=r(2154),n="authorized";class o{constructor(e){this.result=e.result,this.isImplicit=e.is_implicit,this.debugInfo=e.debug_info?{processingTime:e.debug_info.processing_time,decisionTree:(0,i.deserializeDecisionTreeNode)(e.debug_info.decision_tree)}:void 0}isAuthorized(){return this.result===n}}t.CheckResult=o},3800:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1599),t),n(r(9253),t),n(r(4353),t),n(r(4813),t),n(r(267),t),n(r(7950),t),n(r(3760),t),n(r(5080),t)},4353:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4813:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceOp=void 0,function(e){e.Create="create",e.Delete="delete"}(r||(t.ResourceOp=r={}))},267:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7950:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WarrantOp=void 0,function(e){e.Create="create",e.Delete="delete"}(r||(t.WarrantOp=r={}))},3760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5080:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeBatchWriteResourcesOptions=void 0;let i=r(3800),n=r(1027),o=r(3224),a=e=>{let t=[];return e.op===i.ResourceOp.Create?t=e.resources.map(e=>(0,n.serializeCreateResourceOptions)(e)):e.op===i.ResourceOp.Delete&&(t=e.resources.map(e=>(0,o.serializeDeleteResourceOptions)(e))),{op:e.op,resources:t}};t.serializeBatchWriteResourcesOptions=a},2154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeDecisionTreeNode=t.serializeCheckBatchOptions=t.serializeCheckOptions=void 0;let i=r(6559),n=e=>({op:e.op,checks:e.checks.map(a),debug:e.debug});t.serializeCheckOptions=n;let o=e=>({op:"batch",checks:e.checks.map(a),debug:e.debug});t.serializeCheckBatchOptions=o;let a=e=>{var t;return{resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",relation:e.relation,subject:(0,i.isSubject)(e.subject)?{resource_type:e.subject.resourceType,resource_id:e.subject.resourceId}:{resource_type:e.subject.getResourceType(),resource_id:e.subject.getResourceId()},context:null!==(t=e.context)&&void 0!==t?t:{}}},s=e=>({check:{resource:{resourceType:e.check.resource_type,resourceId:e.check.resource_id},relation:e.check.relation,subject:{resourceType:e.check.subject.resource_type,resourceId:e.check.subject.resource_id},context:e.check.context},policy:e.policy,decision:e.decision,processingTime:e.processing_time,children:e.children.map(t.deserializeDecisionTreeNode)});t.deserializeDecisionTreeNode=s},1027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateResourceOptions=void 0;let i=r(6559),n=e=>({resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",meta:e.meta});t.serializeCreateResourceOptions=n},3224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeDeleteResourceOptions=void 0;let i=r(6559),n=e=>({resource_type:(0,i.isResourceInterface)(e)?e.getResourceType():e.resourceType,resource_id:(0,i.isResourceInterface)(e)?e.getResourceId():e.resourceId?e.resourceId:""});t.serializeDeleteResourceOptions=n},9413:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2154),t),n(r(9519),t),n(r(1027),t),n(r(3224),t),n(r(910),t),n(r(6553),t),n(r(9262),t),n(r(3157),t),n(r(883),t),n(r(679),t),n(r(6176),t),n(r(9395),t)},910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListResourceOptions=void 0;let r=e=>({resource_type:e.resourceType,search:e.search,limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeListResourceOptions=r},6553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListWarrantsOptions=void 0;let r=e=>({resource_type:e.resourceType,resource_id:e.resourceId,relation:e.relation,subject_type:e.subjectType,subject_id:e.subjectId,subject_relation:e.subjectRelation,limit:e.limit,after:e.after});t.serializeListWarrantsOptions=r},9262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeQueryOptions=void 0;let r=e=>({q:e.q,context:JSON.stringify(e.context),limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeQueryOptions=r},3157:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeQueryResult=void 0;let r=e=>({resourceType:e.resource_type,resourceId:e.resource_id,relation:e.relation,warrant:{resourceType:e.warrant.resource_type,resourceId:e.warrant.resource_id,relation:e.warrant.relation,subject:{resourceType:e.warrant.subject.resource_type,resourceId:e.warrant.subject.resource_id,relation:e.warrant.subject.relation}},isImplicit:e.is_implicit,meta:e.meta});t.deserializeQueryResult=r},883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeBatchWriteResourcesResponse=t.deserializeResource=void 0;let r=e=>({resourceType:e.resource_type,resourceId:e.resource_id,meta:e.meta});t.deserializeResource=r;let i=e=>e.data.map(e=>(0,t.deserializeResource)(e));t.deserializeBatchWriteResourcesResponse=i},679:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeWarrantToken=void 0;let r=e=>({warrantToken:e.warrant_token});t.deserializeWarrantToken=r},6176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeWarrant=void 0;let r=e=>({resourceType:e.resource_type,resourceId:e.resource_id,relation:e.relation,subject:{resourceType:e.subject.resource_type,resourceId:e.subject.resource_id,relation:e.subject.relation},policy:e.policy});t.deserializeWarrant=r},9395:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeWriteWarrantOptions=void 0;let i=r(6559),n=e=>({op:e.op,resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",relation:e.relation,subject:(0,i.isSubject)(e.subject)?{resource_type:e.subject.resourceType,resource_id:e.subject.resourceId}:{resource_type:e.subject.getResourceType(),resource_id:e.subject.getResourceId()},policy:e.policy});t.serializeWriteWarrantOptions=n},6559:(e,t)=>{"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,"resourceType")&&Object.prototype.hasOwnProperty.call(e,"resourceId")}function i(e){return!!e&&"object"==typeof e&&"getResouceType"in e&&"getResourceId"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isResourceInterface=t.isSubject=void 0,t.isSubject=r,t.isResourceInterface=i},2374:function(e,t,r){"use strict";var i=r(7836),n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkOS=void 0;let a=r(7244),s=r(8761),c=r(4532),u=r(4554),l=r(8439),h=r(1555),d=r(7212);o(r(5163),t),o(r(1045),t),o(r(4631),t),o(r(734),t),o(r(4151),t),o(r(3570),t),o(r(859),t),o(r(3800),t),o(r(1090),t),o(r(7841),t),o(r(7448),t),o(r(7710),t),o(r(2439),t),o(r(4185),t);class f extends h.WorkOS{createHttpClient(e,t){var r;let i=Object.assign(Object.assign({},e.config),{headers:Object.assign(Object.assign({},null===(r=e.config)||void 0===r?void 0:r.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":t})});return"undefined"!=typeof fetch||void 0!==e.fetchFn?new c.FetchHttpClient(this.baseURL,i,e.fetchFn):new u.NodeHttpClient(this.baseURL,i)}createWebhookClient(){let e;return"undefined"!=typeof crypto&&void 0!==crypto.subtle?e=new s.SubtleCryptoProvider:e=new a.NodeCryptoProvider,new l.Webhooks(e)}createIronSessionProvider(){return new d.WebIronSessionProvider}emitWarning(e){return i.emitWarning(e,"WorkOS")}}t.WorkOS=f},5365:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Mfa=void 0;let n=r(5681);class o{constructor(e){this.workos=e}deleteFactor(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/auth/factors/${e}`)})}getFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/auth/factors/${e}`);return(0,n.deserializeFactor)(t)})}enrollFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/auth/factors/enroll",Object.assign({type:e.type},(()=>{switch(e.type){case"sms":return{phone_number:e.phoneNumber};case"totp":return{totp_issuer:e.issuer,totp_user:e.user};default:return{}}})()));return(0,n.deserializeFactorWithSecrets)(t)})}challengeFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/auth/factors/${e.authenticationFactorId}/challenge`,{sms_template:"smsTemplate"in e?e.smsTemplate:void 0});return(0,n.deserializeChallenge)(t)})}verifyFactor(e){return i(this,void 0,void 0,function*(){return this.verifyChallenge(e)})}verifyChallenge(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/auth/challenges/${e.authenticationChallengeId}/verify`,{code:e.code});return(0,n.deserializeVerifyResponse)(t)})}}t.Mfa=o},2760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeChallenge=void 0;let r=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,expiresAt:e.expires_at,code:e.code,authenticationFactorId:e.authentication_factor_id});t.deserializeChallenge=r},1470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFactorWithSecrets=t.deserializeFactor=void 0;let i=r(4776),n=r(1984),o=e=>Object.assign(Object.assign({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type},e.sms?{sms:(0,i.deserializeSms)(e.sms)}:{}),e.totp?{totp:(0,n.deserializeTotp)(e.totp)}:{});t.deserializeFactor=o;let a=e=>Object.assign(Object.assign({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type},e.sms?{sms:(0,i.deserializeSms)(e.sms)}:{}),e.totp?{totp:(0,n.deserializeTotpWithSecrets)(e.totp)}:{});t.deserializeFactorWithSecrets=a},5681:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2760),t),n(r(1470),t),n(r(1806),t)},4776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeSms=void 0;let r=e=>({phoneNumber:e.phone_number});t.deserializeSms=r},1984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeTotpWithSecrets=t.deserializeTotp=void 0;let r=e=>({issuer:e.issuer,user:e.user});t.deserializeTotp=r;let i=e=>({issuer:e.issuer,user:e.user,qrCode:e.qr_code,secret:e.secret,uri:e.uri});t.deserializeTotpWithSecrets=i},1806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeVerifyResponse=void 0;let i=r(2760),n=e=>({challenge:(0,i.deserializeChallenge)(e.challenge),valid:e.valid});t.deserializeVerifyResponse=n},6088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7841:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6088),t),n(r(4774),t)},4774:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationDomainVerificationStrategy=t.OrganizationDomainState=void 0,function(e){e.LegacyVerified="legacy_verified",e.Verified="verified",e.Pending="pending",e.Failed="failed"}(r||(t.OrganizationDomainState=r={})),function(e){e.Dns="dns",e.Manual="manual"}(i||(t.OrganizationDomainVerificationStrategy=i={}))},5137:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OrganizationDomains=void 0;let n=r(6332),o=r(5988);class a{constructor(e){this.workos=e}get(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/organization_domains/${e}`);return(0,o.deserializeOrganizationDomain)(t)})}verify(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/organization_domains/${e}/verify`,{});return(0,o.deserializeOrganizationDomain)(t)})}create(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/organization_domains",(0,n.serializeCreateOrganizationDomainOptions)(e));return(0,o.deserializeOrganizationDomain)(t)})}}t.OrganizationDomains=a},6332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateOrganizationDomainOptions=void 0;let r=e=>({domain:e.domain,organization_id:e.organizationId});t.serializeCreateOrganizationDomainOptions=r},5988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeOrganizationDomain=void 0;let r=e=>({object:e.object,id:e.id,domain:e.domain,state:e.state,verificationToken:e.verification_token,verificationStrategy:e.verification_strategy});t.deserializeOrganizationDomain=r},680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1339:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DomainDataState=void 0,function(e){e.Verified="verified",e.Pending="pending"}(r||(t.DomainDataState=r={}))},1090:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(680),t),n(r(1339),t),n(r(3195),t),n(r(4742),t),n(r(9667),t)},3195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9667:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5397:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.Organizations=void 0;let o=r(734),a=r(8395),s=r(1638);class c{constructor(e){this.workos=e}listOrganizations(e){return i(this,void 0,void 0,function*(){return new o.AutoPaginatable((yield(0,s.fetchAndDeserialize)(this.workos,"/organizations",a.deserializeOrganization,e)),e=>(0,s.fetchAndDeserialize)(this.workos,"/organizations",a.deserializeOrganization,e),e)})}createOrganization(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/organizations",(0,a.serializeCreateOrganizationOptions)(e),t);return(0,a.deserializeOrganization)(r)})}deleteOrganization(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/organizations/${e}`)})}getOrganization(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/organizations/${e}`);return(0,a.deserializeOrganization)(t)})}updateOrganization(e){return i(this,void 0,void 0,function*(){let{organization:t}=e,r=n(e,["organization"]),{data:i}=yield this.workos.put(`/organizations/${t}`,(0,a.serializeUpdateOrganizationOptions)(r));return(0,a.deserializeOrganization)(i)})}setStripeCustomerId(e){return i(this,void 0,void 0,function*(){return(yield this.updateOrganization(e)).stripeCustomerId})}getStripeCustomerId(e){return i(this,void 0,void 0,function*(){return(yield this.getOrganization(e)).stripeCustomerId})}}t.Organizations=c},9484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateOrganizationOptions=void 0;let r=e=>({name:e.name,allow_profiles_outside_organization:e.allowProfilesOutsideOrganization,domain_data:e.domainData,domains:e.domains});t.serializeCreateOrganizationOptions=r},8395:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9484),t),n(r(1124),t),n(r(9317),t)},1124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeOrganization=void 0;let i=r(5988),n=e=>Object.assign(Object.assign({object:e.object,id:e.id,name:e.name,allowProfilesOutsideOrganization:e.allow_profiles_outside_organization,domains:e.domains.map(i.deserializeOrganizationDomain)},void 0===e.stripe_customer_id?void 0:{stripeCustomerId:e.stripe_customer_id}),{createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeOrganization=n},9317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUpdateOrganizationOptions=void 0;let r=e=>({name:e.name,allow_profiles_outside_organization:e.allowProfilesOutsideOrganization,domain_data:e.domainData,domains:e.domains,stripe_customer_id:e.stripeCustomerId});t.serializeUpdateOrganizationOptions=r},6267:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7448:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(8426),t),n(r(6267),t),n(r(6920),t)},8426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},323:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.Passwordless=void 0;let o=r(5864);class a{constructor(e){this.workos=e}createSession(e){var{redirectURI:t,expiresIn:r}=e,a=n(e,["redirectURI","expiresIn"]);return i(this,void 0,void 0,function*(){let{data:e}=yield this.workos.post("/passwordless/sessions",Object.assign(Object.assign({},a),{redirect_uri:t,expires_in:r}));return(0,o.deserializePasswordlessSession)(e)})}sendSession(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/passwordless/sessions/${e}/send`,{});return t})}}t.Passwordless=a},5864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializePasswordlessSession=void 0;let r=e=>({id:e.id,email:e.email,expiresAt:e.expires_at,link:e.link,object:e.object});t.deserializePasswordlessSession=r},7291:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratePortalLinkIntent=void 0,function(e){e.AuditLogs="audit_logs",e.DomainVerification="domain_verification",e.DSync="dsync",e.LogStreams="log_streams",e.SSO="sso",e.CertificateRenewal="certificate_renewal"}(r||(t.GeneratePortalLinkIntent=r={}))},7710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratePortalLinkIntent=void 0;var i=r(7291);Object.defineProperty(t,"GeneratePortalLinkIntent",{enumerable:!0,get:function(){return i.GeneratePortalLinkIntent}})},9939:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Portal=void 0;class i{constructor(e){this.workos=e}generateLink({intent:e,organization:t,returnUrl:i,successUrl:n}){return r(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/portal/generate_link",{intent:e,organization:t,return_url:i,success_url:n});return r})}}t.Portal=i},5844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1769:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionType=void 0,function(e){e.ADFSSAML="ADFSSAML",e.AdpOidc="AdpOidc",e.AppleOAuth="AppleOAuth",e.Auth0SAML="Auth0SAML",e.AzureSAML="AzureSAML",e.CasSAML="CasSAML",e.ClassLinkSAML="ClassLinkSAML",e.CloudflareSAML="CloudflareSAML",e.CyberArkSAML="CyberArkSAML",e.DuoSAML="DuoSAML",e.GenericOIDC="GenericOIDC",e.GenericSAML="GenericSAML",e.GitHubOAuth="GitHubOAuth",e.GoogleOAuth="GoogleOAuth",e.GoogleSAML="GoogleSAML",e.JumpCloudSAML="JumpCloudSAML",e.KeycloakSAML="KeycloakSAML",e.LastPassSAML="LastPassSAML",e.LoginGovOidc="LoginGovOidc",e.MagicLink="MagicLink",e.MicrosoftOAuth="MicrosoftOAuth",e.MiniOrangeSAML="MiniOrangeSAML",e.NetIqSAML="NetIqSAML",e.OktaSAML="OktaSAML",e.OneLoginSAML="OneLoginSAML",e.OracleSAML="OracleSAML",e.PingFederateSAML="PingFederateSAML",e.PingOneSAML="PingOneSAML",e.RipplingSAML="RipplingSAML",e.SalesforceSAML="SalesforceSAML",e.ShibbolethGenericSAML="ShibbolethGenericSAML",e.ShibbolethSAML="ShibbolethSAML",e.SimpleSamlPhpSAML="SimpleSamlPhpSAML",e.VMwareSAML="VMwareSAML"}(r||(t.ConnectionType=r={}))},5414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2269:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2439:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5844),t),n(r(1769),t),n(r(5414),t),n(r(4417),t),n(r(2269),t),n(r(4129),t),n(r(4555),t),n(r(8023),t)},4129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeConnection=void 0;let r=e=>({object:e.object,id:e.id,organizationId:e.organization_id,name:e.name,connectionType:e.connection_type,type:e.connection_type,state:e.state,domains:e.domains,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeConnection=r},8588:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7454),t),n(r(9943),t),n(r(2379),t),n(r(1551),t)},9943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListConnectionsOptions=void 0;let r=e=>({connection_type:e.connectionType,domain:e.domain,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeListConnectionsOptions=r},2379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeProfileAndToken=void 0;let i=r(1551),n=e=>({accessToken:e.access_token,profile:(0,i.deserializeProfile)(e.profile)});t.deserializeProfileAndToken=n},1551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeProfile=void 0;let r=e=>({id:e.id,idpId:e.idp_id,organizationId:e.organization_id,connectionId:e.connection_id,connectionType:e.connection_type,email:e.email,firstName:e.first_name,lastName:e.last_name,role:e.role,groups:e.groups,rawAttributes:e.raw_attributes});t.deserializeProfile=r},7045:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SSO=void 0;let n=r(734),o=r(8588),a=r(1638),s=e=>{let t=new URLSearchParams;for(let r of Object.keys(e).sort()){let i=e[r];i&&t.append(r,i)}return t.toString()};class c{constructor(e){this.workos=e}listConnections(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/connections",o.deserializeConnection,e?(0,o.serializeListConnectionsOptions)(e):void 0)),e=>(0,a.fetchAndDeserialize)(this.workos,"/connections",o.deserializeConnection,e),e?(0,o.serializeListConnectionsOptions)(e):void 0)})}deleteConnection(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/connections/${e}`)})}getAuthorizationUrl({connection:e,clientId:t,domain:r,domainHint:i,loginHint:n,organization:o,provider:a,redirectUri:c,state:u}){if(!r&&!a&&!e&&!o)throw Error("Incomplete arguments. Need to specify either a 'connection', 'organization', 'domain', or 'provider'.");r&&this.workos.emitWarning("The `domain` parameter for `getAuthorizationURL` is deprecated. Please use `organization` instead.");let l=s({connection:e,organization:o,domain:r,domain_hint:i,login_hint:n,provider:a,client_id:t,redirect_uri:c,response_type:"code",state:u});return`${this.workos.baseURL}/sso/authorize?${l}`}getConnection(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/connections/${e}`);return(0,o.deserializeConnection)(t)})}getProfileAndToken({code:e,clientId:t}){return i(this,void 0,void 0,function*(){let r=new URLSearchParams({client_id:t,client_secret:this.workos.key,grant_type:"authorization_code",code:e}),{data:i}=yield this.workos.post("/sso/token",r);return(0,o.deserializeProfileAndToken)(i)})}getProfile({accessToken:e}){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get("/sso/profile",{accessToken:e});return(0,o.deserializeProfile)(t)})}}t.SSO=c},3629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3350:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticateWithSessionCookieFailureReason=void 0,function(e){e.INVALID_JWT="invalid_jwt",e.INVALID_SESSION_COOKIE="invalid_session_cookie",e.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided"}(r||(t.AuthenticateWithSessionCookieFailureReason=r={}))},5225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4875:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1431:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5011:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4185:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9745),t),n(r(5984),t),n(r(3921),t),n(r(3629),t),n(r(2332),t),n(r(5984),t),n(r(3875),t),n(r(4067),t),n(r(3921),t),n(r(1057),t),n(r(3350),t),n(r(5225),t),n(r(2724),t),n(r(6652),t),n(r(4568),t),n(r(4875),t),n(r(7759),t),n(r(300),t),n(r(1431),t),n(r(5011),t),n(r(4447),t),n(r(2799),t),n(r(2787),t),n(r(5246),t),n(r(6187),t),n(r(9194),t),n(r(76),t),n(r(9106),t),n(r(9151),t),n(r(221),t),n(r(4868),t),n(r(2620),t),n(r(6830),t),n(r(9102),t),n(r(1252),t),n(r(1944),t),n(r(6712),t),n(r(6625),t),n(r(2784),t),n(r(7876),t),n(r(2632),t),n(r(7775),t)},2799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},221:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshAndSealSessionDataFailureReason=void 0,function(e){e.INVALID_SESSION_COOKE="invalid_session_cookie",e.INVALID_SESSION_COOKIE="invalid_session_cookie",e.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided",e.INVALID_GRANT="invalid_grant",e.MFA_ENROLLMENT="mfa_enrollment",e.SSO_REQUIRED="sso_required",e.ORGANIZATION_NOT_AUTHORIZED="organization_not_authorized"}(r||(t.RefreshAndSealSessionDataFailureReason=r={}))},4868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeRevokeSessionOptions=void 0;let r=e=>({session_id:e.sessionId});t.serializeRevokeSessionOptions=r},6830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithCodeOptions=void 0;let r=e=>({grant_type:"authorization_code",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,code_verifier:e.codeVerifier,invitation_token:e.invitationToken,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithCodeOptions=r},3349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithEmailVerificationOptions=void 0;let r=e=>({grant_type:"urn:workos:oauth:grant-type:email-verification:code",client_id:e.clientId,client_secret:e.clientSecret,pending_authentication_token:e.pendingAuthenticationToken,code:e.code,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithEmailVerificationOptions=r},908:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithMagicAuthOptions=void 0;let r=e=>({grant_type:"urn:workos:oauth:grant-type:magic-auth:code",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,email:e.email,invitation_token:e.invitationToken,link_authorization_code:e.linkAuthorizationCode,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithMagicAuthOptions=r},7772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithOrganizationSelectionOptions=void 0;let r=e=>({grant_type:"urn:workos:oauth:grant-type:organization-selection",client_id:e.clientId,client_secret:e.clientSecret,pending_authentication_token:e.pendingAuthenticationToken,organization_id:e.organizationId,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithOrganizationSelectionOptions=r},5579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithPasswordOptions=void 0;let r=e=>({grant_type:"password",client_id:e.clientId,client_secret:e.clientSecret,email:e.email,password:e.password,invitation_token:e.invitationToken,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithPasswordOptions=r},3112:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithRefreshTokenOptions=void 0;let r=e=>({grant_type:"refresh_token",client_id:e.clientId,client_secret:e.clientSecret,refresh_token:e.refreshToken,organization_id:e.organizationId,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithRefreshTokenOptions=r},2447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAuthenticateWithTotpOptions=void 0;let r=e=>({grant_type:"urn:workos:oauth:grant-type:mfa-totp",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,authentication_challenge_id:e.authenticationChallengeId,pending_authentication_token:e.pendingAuthenticationToken,ip_address:e.ipAddress,user_agent:e.userAgent});t.serializeAuthenticateWithTotpOptions=r},4071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAuthenticationEvent=void 0;let r=e=>({email:e.email,error:e.error,ipAddress:e.ip_address,status:e.status,type:e.type,userAgent:e.user_agent,userId:e.user_id});t.deserializeAuthenticationEvent=r},7250:function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeAuthenticationResponse=void 0;let n=r(8001),o=e=>{let{user:t,organization_id:r,access_token:o,refresh_token:a,authentication_method:s,impersonator:c}=e,u=i(e,["user","organization_id","access_token","refresh_token","authentication_method","impersonator"]);return Object.assign({user:(0,n.deserializeUser)(t),organizationId:r,accessToken:o,refreshToken:a,impersonator:c,authenticationMethod:s},u)};t.deserializeAuthenticationResponse=o},70:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateMagicAuthOptions=void 0;let r=e=>({email:e.email,invitation_token:e.invitationToken});t.serializeCreateMagicAuthOptions=r},8648:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateOrganizationMembershipOptions=void 0;let r=e=>({organization_id:e.organizationId,user_id:e.userId,role_slug:e.roleSlug});t.serializeCreateOrganizationMembershipOptions=r},7663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreatePasswordResetOptions=void 0;let r=e=>({email:e.email});t.serializeCreatePasswordResetOptions=r},8955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeCreateUserOptions=void 0;let r=e=>({email:e.email,password:e.password,password_hash:e.passwordHash,password_hash_type:e.passwordHashType,first_name:e.firstName,last_name:e.lastName,email_verified:e.emailVerified});t.serializeCreateUserOptions=r},332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeEmailVerificationEvent=t.deserializeEmailVerification=void 0;let r=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,code:e.code,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeEmailVerification=r;let i=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeEmailVerificationEvent=i},7844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEnrollAuthFactorOptions=void 0;let r=e=>({type:e.type,totp_issuer:e.totpIssuer,totp_user:e.totpUser,totp_secret:e.totpSecret});t.serializeEnrollAuthFactorOptions=r},421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFactorWithSecrets=t.deserializeFactor=void 0;let i=r(1984),n=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type,totp:(0,i.deserializeTotp)(e.totp),userId:e.user_id});t.deserializeFactor=n;let o=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type,totp:(0,i.deserializeTotpWithSecrets)(e.totp),userId:e.user_id});t.deserializeFactorWithSecrets=o},166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeIdentities=void 0;let r=e=>e.map(e=>({idpId:e.idp_id,type:e.type,provider:e.provider}));t.deserializeIdentities=r},7858:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6079),t),n(r(908),t),n(r(5579),t),n(r(3112),t),n(r(2447),t),n(r(4071),t),n(r(7250),t),n(r(70),t),n(r(7663),t),n(r(332),t),n(r(7844),t),n(r(421),t),n(r(6277),t),n(r(8912),t),n(r(4449),t),n(r(9008),t),n(r(6851),t),n(r(8955),t),n(r(322),t),n(r(2478),t),n(r(4584),t),n(r(8001),t)},6277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeInvitationEvent=t.deserializeInvitation=void 0;let r=e=>({object:e.object,id:e.id,email:e.email,state:e.state,acceptedAt:e.accepted_at,revokedAt:e.revoked_at,expiresAt:e.expires_at,organizationId:e.organization_id,inviterUserId:e.inviter_user_id,token:e.token,acceptInvitationUrl:e.accept_invitation_url,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeInvitation=r;let i=e=>({object:e.object,id:e.id,email:e.email,state:e.state,acceptedAt:e.accepted_at,revokedAt:e.revoked_at,expiresAt:e.expires_at,organizationId:e.organization_id,inviterUserId:e.inviter_user_id,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeInvitationEvent=i},9562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListInvitationsOptions=void 0;let r=e=>({email:e.email,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeListInvitationsOptions=r},3839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListOrganizationMembershipsOptions=void 0;let r=e=>{var t;return{user_id:e.userId,organization_id:e.organizationId,statuses:null===(t=e.statuses)||void 0===t?void 0:t.join(","),limit:e.limit,before:e.before,after:e.after,order:e.order}};t.serializeListOrganizationMembershipsOptions=r},9758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeListUsersOptions=void 0;let r=e=>({email:e.email,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order});t.serializeListUsersOptions=r},8912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeMagicAuthEvent=t.deserializeMagicAuth=void 0;let r=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,code:e.code,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeMagicAuth=r;let i=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeMagicAuthEvent=i},2672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeOrganizationMembership=void 0;let r=e=>({object:e.object,id:e.id,userId:e.user_id,organizationId:e.organization_id,status:e.status,createdAt:e.created_at,updatedAt:e.updated_at,role:e.role});t.deserializeOrganizationMembership=r},4449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializePasswordResetEvent=t.deserializePasswordReset=void 0;let r=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,passwordResetToken:e.password_reset_token,passwordResetUrl:e.password_reset_url,expiresAt:e.expires_at,createdAt:e.created_at});t.deserializePasswordReset=r;let i=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at});t.deserializePasswordResetEvent=i},9008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeResetPasswordOptions=void 0;let r=e=>({token:e.token,new_password:e.newPassword});t.serializeResetPasswordOptions=r},316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeRole=void 0;let r=e=>({object:"role",slug:e.slug});t.deserializeRole=r},1145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSendInvitationOptions=void 0;let r=e=>({email:e.email,organization_id:e.organizationId,expires_in_days:e.expiresInDays,inviter_user_id:e.inviterUserId,role_slug:e.roleSlug});t.serializeSendInvitationOptions=r},322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSendMagicAuthCodeOptions=void 0;let r=e=>({email:e.email});t.serializeSendMagicAuthCodeOptions=r},6851:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSendPasswordResetEmailOptions=void 0;let r=e=>({email:e.email,password_reset_url:e.passwordResetUrl});t.serializeSendPasswordResetEmailOptions=r},1918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeSession=void 0;let r=e=>({object:"session",id:e.id,userId:e.user_id,ipAddress:e.ip_address,userAgent:e.user_agent,organizationId:e.organization_id,impersonator:e.impersonator});t.deserializeSession=r},7167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUpdateOrganizationMembershipOptions=void 0;let r=e=>({role_slug:e.roleSlug});t.serializeUpdateOrganizationMembershipOptions=r},2478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUpdateUserOptions=void 0;let r=e=>({first_name:e.firstName,last_name:e.lastName,email_verified:e.emailVerified,password:e.password,password_hash:e.passwordHash,password_hash_type:e.passwordHashType});t.serializeUpdateUserOptions=r},4584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUpdateUserPasswordOptions=void 0;let r=e=>({password:e.password});t.serializeUpdateUserPasswordOptions=r},8001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUser=void 0;let r=e=>({object:e.object,id:e.id,email:e.email,emailVerified:e.email_verified,firstName:e.first_name,profilePictureUrl:e.profile_picture_url,lastName:e.last_name,createdAt:e.created_at,updatedAt:e.updated_at});t.deserializeUser=r},1972:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;let n=r(3679),o=r(205),a=r(4185);class s{constructor(e,t,r){if(!r)throw Error("cookiePassword is required");this.userManagement=e,this.ironSessionProvider=e.ironSessionProvider,this.cookiePassword=r,this.sessionData=t;let{clientId:i}=this.userManagement;this.jwks=i?(0,n.createRemoteJWKSet)(new URL(e.getJwksUrl(i))):void 0}authenticate(){return i(this,void 0,void 0,function*(){let e;if(!this.sessionData)return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};try{e=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword})}catch(e){return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE}}if(!e.accessToken)return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(e.accessToken)))return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:t,org_id:r,role:i,permissions:o,entitlements:s}=(0,n.decodeJwt)(e.accessToken);return{authenticated:!0,sessionId:t,organizationId:r,role:i,permissions:o,entitlements:s,user:e.user,impersonator:e.impersonator}})}refresh(e={}){var t,r;return i(this,void 0,void 0,function*(){let i=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword});if(!i.refreshToken||!i.user)return{authenticated:!1,reason:a.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};try{let n=null!==(t=e.cookiePassword)&&void 0!==t?t:this.cookiePassword,o=yield this.userManagement.authenticateWithRefreshToken({clientId:this.userManagement.clientId,refreshToken:i.refreshToken,organizationId:null!==(r=e.organizationId)&&void 0!==r?r:void 0,session:{sealSession:!0,cookiePassword:n}});return e.cookiePassword&&(this.cookiePassword=e.cookiePassword),this.sessionData=o.sealedSession,{authenticated:!0,sealedSession:o.sealedSession,session:o}}catch(e){if(e instanceof o.OauthException&&(e.error===a.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||e.error===a.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||e.error===a.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:e.error};throw e}})}getLogoutUrl(){return i(this,void 0,void 0,function*(){let e=yield this.authenticate();if(!e.authenticated){let{reason:t}=e;throw Error(`Failed to extract session ID for logout URL: ${t}`)}return this.userManagement.getLogoutUrl({sessionId:e.sessionId})})}isValidJwt(e){return i(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Missing client ID. Did you provide it when initializing WorkOS?");try{return yield(0,n.jwtVerify)(e,this.jwks),!0}catch(e){return!1}})}}t.Session=s},1113:function(e,t,r){"use strict";var i=r(7836),n=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},o=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagement=void 0;let a=r(3679),s=r(205),c=r(1638),u=r(734),l=r(5681),h=r(3350),d=r(221),f=r(2620),p=r(7858),y=r(3349),g=r(7772),m=r(8648),v=r(421),b=r(166),w=r(6277),_=r(9562),S=r(3839),A=r(9758),E=r(2672),k=r(1145),O=r(7167),P=r(1972),x=e=>{let t=new URLSearchParams;for(let r of Object.keys(e).sort()){let i=e[r];i&&t.append(r,i)}return t.toString()};class C{constructor(e,t){this.workos=e;let{clientId:r}=e.options;this.clientId=r,this.ironSessionProvider=t,this.jwks=r?(0,a.createRemoteJWKSet)(new URL(this.getJwksUrl(r))):void 0}loadSealedSession(e){return new P.Session(this,e.sessionData,e.cookiePassword)}getUser(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/users/${e}`);return(0,p.deserializeUser)(t)})}listUsers(e){return n(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/user_management/users",p.deserializeUser,e?(0,A.serializeListUsersOptions)(e):void 0)),e=>(0,c.fetchAndDeserialize)(this.workos,"/user_management/users",p.deserializeUser,e),e?(0,A.serializeListUsersOptions)(e):void 0)})}createUser(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/users",(0,p.serializeCreateUserOptions)(e));return(0,p.deserializeUser)(t)})}authenticateWithMagicAuth(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithMagicAuthOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithPassword(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithPasswordOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithCode(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithCodeOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithRefreshToken(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithRefreshTokenOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithTotp(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithTotpOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithEmailVerification(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,y.serializeAuthenticateWithEmailVerificationOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithOrganizationSelection(e){return n(this,void 0,void 0,function*(){let{session:t}=e,r=o(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithOrganizationSelectionOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithSessionCookie({sessionData:e,cookiePassword:t=i.env.WORKOS_COOKIE_PASSWORD}){return n(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");if(!e)return{authenticated:!1,reason:h.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};let r=yield this.ironSessionProvider.unsealData(e,{password:t});if(!r.accessToken)return{authenticated:!1,reason:h.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(r.accessToken)))return{authenticated:!1,reason:h.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:i,org_id:n,role:o,permissions:s,entitlements:c}=(0,a.decodeJwt)(r.accessToken);return{authenticated:!0,sessionId:i,organizationId:n,role:o,user:r.user,permissions:s,entitlements:c}})}isValidJwt(e){return n(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");try{return yield(0,a.jwtVerify)(e,this.jwks),!0}catch(e){return!1}})}refreshAndSealSessionData({sessionData:e,organizationId:t,cookiePassword:r=i.env.WORKOS_COOKIE_PASSWORD}){return n(this,void 0,void 0,function*(){if(!r)throw Error("Cookie password is required");if(!e)return{authenticated:!1,reason:d.RefreshAndSealSessionDataFailureReason.NO_SESSION_COOKIE_PROVIDED};let i=yield this.ironSessionProvider.unsealData(e,{password:r});if(!i.refreshToken||!i.user)return{authenticated:!1,reason:d.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:n}=(0,a.decodeJwt)(i.accessToken);try{let{sealedSession:e}=yield this.authenticateWithRefreshToken({clientId:this.workos.clientId,refreshToken:i.refreshToken,organizationId:null!=t?t:n,session:{sealSession:!0,cookiePassword:r}});if(!e)return{authenticated:!1,reason:d.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};return{authenticated:!0,sealedSession:e}}catch(e){if(e instanceof s.OauthException&&(e.error===d.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||e.error===d.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||e.error===d.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:e.error};throw e}})}prepareAuthenticationResponse({authenticationResponse:e,session:t}){return n(this,void 0,void 0,function*(){return(null==t?void 0:t.sealSession)?Object.assign(Object.assign({},e),{sealedSession:yield this.sealSessionDataFromAuthenticationResponse({authenticationResponse:e,cookiePassword:t.cookiePassword})}):e})}sealSessionDataFromAuthenticationResponse({authenticationResponse:e,cookiePassword:t}){return n(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");let{org_id:r}=(0,a.decodeJwt)(e.accessToken),i={organizationId:r,user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,impersonator:e.impersonator};return this.ironSessionProvider.sealData(i,{password:t})})}getSessionFromCookie({sessionData:e,cookiePassword:t=i.env.WORKOS_COOKIE_PASSWORD}){return n(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");if(e)return this.ironSessionProvider.unsealData(e,{password:t})})}getEmailVerification(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/email_verification/${e}`);return(0,p.deserializeEmailVerification)(t)})}sendVerificationEmail({userId:e}){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/users/${e}/email_verification/send`,{});return{user:(0,p.deserializeUser)(t.user)}})}getMagicAuth(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/magic_auth/${e}`);return(0,p.deserializeMagicAuth)(t)})}createMagicAuth(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/magic_auth",(0,p.serializeCreateMagicAuthOptions)(Object.assign({},e)));return(0,p.deserializeMagicAuth)(t)})}sendMagicAuthCode(e){return n(this,void 0,void 0,function*(){yield this.workos.post("/user_management/magic_auth/send",(0,p.serializeSendMagicAuthCodeOptions)(e))})}verifyEmail({code:e,userId:t}){return n(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post(`/user_management/users/${t}/email_verification/confirm`,{code:e});return{user:(0,p.deserializeUser)(r.user)}})}getPasswordReset(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/password_reset/${e}`);return(0,p.deserializePasswordReset)(t)})}createPasswordReset(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/password_reset",(0,p.serializeCreatePasswordResetOptions)(Object.assign({},e)));return(0,p.deserializePasswordReset)(t)})}sendPasswordResetEmail(e){return n(this,void 0,void 0,function*(){yield this.workos.post("/user_management/password_reset/send",(0,p.serializeSendPasswordResetEmailOptions)(e))})}resetPassword(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/password_reset/confirm",(0,p.serializeResetPasswordOptions)(e));return{user:(0,p.deserializeUser)(t.user)}})}updateUser(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/users/${e.userId}`,(0,p.serializeUpdateUserOptions)(e));return(0,p.deserializeUser)(t)})}enrollAuthFactor(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/users/${e.userId}/auth_factors`,(0,p.serializeEnrollAuthFactorOptions)(e));return{authenticationFactor:(0,p.deserializeFactorWithSecrets)(t.authentication_factor),authenticationChallenge:(0,l.deserializeChallenge)(t.authentication_challenge)}})}listAuthFactors(e){return n(this,void 0,void 0,function*(){let{userId:t}=e,r=o(e,["userId"]);return new u.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/auth_factors`,v.deserializeFactor,r)),e=>(0,c.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/auth_factors`,v.deserializeFactor,e),r)})}deleteUser(e){return n(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/users/${e}`)})}getUserIdentities(e){return n(this,void 0,void 0,function*(){if(!e)throw TypeError("Incomplete arguments. Need to specify 'userId'.");let{data:t}=yield this.workos.get(`/user_management/users/${e}/identities`);return(0,b.deserializeIdentities)(t)})}getOrganizationMembership(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/organization_memberships/${e}`);return(0,E.deserializeOrganizationMembership)(t)})}listOrganizationMemberships(e){return n(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",E.deserializeOrganizationMembership,e?(0,S.serializeListOrganizationMembershipsOptions)(e):void 0)),e=>(0,c.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",E.deserializeOrganizationMembership,e),e?(0,S.serializeListOrganizationMembershipsOptions)(e):void 0)})}createOrganizationMembership(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/organization_memberships",(0,m.serializeCreateOrganizationMembershipOptions)(e));return(0,E.deserializeOrganizationMembership)(t)})}updateOrganizationMembership(e,t){return n(this,void 0,void 0,function*(){let{data:r}=yield this.workos.put(`/user_management/organization_memberships/${e}`,(0,O.serializeUpdateOrganizationMembershipOptions)(t));return(0,E.deserializeOrganizationMembership)(r)})}deleteOrganizationMembership(e){return n(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/organization_memberships/${e}`)})}deactivateOrganizationMembership(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/organization_memberships/${e}/deactivate`,{});return(0,E.deserializeOrganizationMembership)(t)})}reactivateOrganizationMembership(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/organization_memberships/${e}/reactivate`,{});return(0,E.deserializeOrganizationMembership)(t)})}getInvitation(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/invitations/${e}`);return(0,w.deserializeInvitation)(t)})}findInvitationByToken(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/invitations/by_token/${e}`);return(0,w.deserializeInvitation)(t)})}listInvitations(e){return n(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/user_management/invitations",w.deserializeInvitation,e?(0,_.serializeListInvitationsOptions)(e):void 0)),e=>(0,c.fetchAndDeserialize)(this.workos,"/user_management/invitations",w.deserializeInvitation,e),e?(0,_.serializeListInvitationsOptions)(e):void 0)})}sendInvitation(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/invitations",(0,k.serializeSendInvitationOptions)(Object.assign({},e)));return(0,w.deserializeInvitation)(t)})}revokeInvitation(e){return n(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/invitations/${e}/revoke`,null);return(0,w.deserializeInvitation)(t)})}revokeSession(e){return n(this,void 0,void 0,function*(){yield this.workos.post("/user_management/sessions/revoke",(0,f.serializeRevokeSessionOptions)(e))})}getAuthorizationUrl({connectionId:e,codeChallenge:t,codeChallengeMethod:r,context:i,clientId:n,domainHint:o,loginHint:a,organizationId:s,provider:c,redirectUri:u,state:l,screenHint:h}){if(!c&&!e&&!s)throw TypeError("Incomplete arguments. Need to specify either a 'connectionId', 'organizationId', or 'provider'.");if("authkit"!==c&&h)throw TypeError("'screenHint' is only supported for 'authkit' provider");let d=x({connection_id:e,code_challenge:t,code_challenge_method:r,context:i,organization_id:s,domain_hint:o,login_hint:a,provider:c,client_id:n,redirect_uri:u,response_type:"code",state:l,screen_hint:h});return`${this.workos.baseURL}/user_management/authorize?${d}`}getLogoutUrl({sessionId:e}){if(!e)throw TypeError("Incomplete arguments. Need to specify 'sessionId'.");return`${this.workos.baseURL}/user_management/sessions/logout?session_id=${e}`}getLogoutUrlFromSessionCookie({sessionData:e,cookiePassword:t=i.env.WORKOS_COOKIE_PASSWORD}){return n(this,void 0,void 0,function*(){let r=yield this.authenticateWithSessionCookie({sessionData:e,cookiePassword:t});if(!r.authenticated){let{reason:e}=r;throw Error(`Failed to extract session ID for logout URL: ${e}`)}return this.getLogoutUrl({sessionId:r.sessionId})})}getJwksUrl(e){if(!e)throw TypeError("clientId must be a valid clientId");return`${this.workos.baseURL}/sso/jwks/${e}`}}t.UserManagement=C},8439:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Webhooks=void 0;let n=r(1045),o=r(1276);class a{constructor(e){this.cryptoProvider=e}constructEvent({payload:e,sigHeader:t,secret:r,tolerance:n=18e4}){return i(this,void 0,void 0,function*(){let i={payload:e,sigHeader:t,secret:r,tolerance:n};yield this.verifyHeader(i);let a=e;return(0,o.deserializeEvent)(a)})}verifyHeader({payload:e,sigHeader:t,secret:r,tolerance:o=18e4}){return i(this,void 0,void 0,function*(){let[i,a]=this.getTimestampAndSignatureHash(t);if(!a||0===Object.keys(a).length)throw new n.SignatureVerificationException("No signature hash found with expected scheme v1");if(parseInt(i,10)<Date.now()-o)throw new n.SignatureVerificationException("Timestamp outside the tolerance zone");let s=yield this.computeSignature(i,e,r);if((yield this.cryptoProvider.secureCompare(s,a))===!1)throw new n.SignatureVerificationException("Signature hash does not match the expected signature hash for payload");return!0})}getTimestampAndSignatureHash(e){let[t,r]=e.split(",");if(void 0===t||void 0===r)throw new n.SignatureVerificationException("Signature or timestamp missing");let{1:i}=t.split("="),{1:o}=r.split("=");return[i,o]}computeSignature(e,t,r){return i(this,void 0,void 0,function*(){t=JSON.stringify(t);let i=`${e}.${t}`;return yield this.cryptoProvider.computeHMACSignatureAsync(i,r)})}}t.Webhooks=a},2437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeGetTokenResponse=t.serializeGetTokenOptions=void 0;let r=e=>({organization_id:e.organizationId,user_id:e.userId,scopes:e.scopes});t.serializeGetTokenOptions=r;let i=e=>({token:e.token});t.deserializeGetTokenResponse=i},6689:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Widgets=void 0;let n=r(2437);class o{constructor(e){this.workos=e}getToken(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/widgets/token",(0,n.serializeGetTokenOptions)(e));return(0,n.deserializeGetTokenResponse)(t).token})}}t.Widgets=o},1555:function(e,t,r){"use strict";var i=r(7836),n=this&&this.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):n(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkOS=void 0;let o=r(1045),a=r(3829),s=r(173),c=r(5397),u=r(5137),l=r(323),h=r(9939),d=r(7045),f=r(8439),p=r(5365),y=r(509),g=r(1113),m=r(3837),v=r(6517),b=r(2042),w=r(8761),_=r(4532),S=r(6689),A="7.30.1",E="api.workos.com",k="Authorization",O="Idempotency-Key",P="Warrant-Token";class x{constructor(e,t={}){if(this.key=e,this.options=t,this.auditLogs=new y.AuditLogs(this),this.directorySync=new a.DirectorySync(this),this.organizations=new c.Organizations(this),this.organizationDomains=new u.OrganizationDomains(this),this.passwordless=new l.Passwordless(this),this.portal=new h.Portal(this),this.sso=new d.SSO(this),this.mfa=new p.Mfa(this),this.events=new s.Events(this),this.fga=new m.FGA(this),this.widgets=new S.Widgets(this),!e&&(this.key=void 0!==i?null==i?void 0:i.env.WORKOS_API_KEY:void 0,!this.key))throw new o.NoApiKeyProvidedException;void 0===this.options.https&&(this.options.https=!0),this.clientId=this.options.clientId,this.clientId||void 0===i||(this.clientId=null==i?void 0:i.env.WORKOS_CLIENT_ID);let r=this.options.https?"https":"http",n=this.options.apiHostname||E,f=this.options.port;this.baseURL=`${r}://${n}`,f&&(this.baseURL=this.baseURL+`:${f}`);let v=`workos-node/${A}`;if(t.appInfo){let{name:e,version:r}=t.appInfo;v+=` ${e}: ${r}`}this.webhooks=this.createWebhookClient(),this.userManagement=new g.UserManagement(this,this.createIronSessionProvider()),this.client=this.createHttpClient(t,v)}createWebhookClient(){return new f.Webhooks(new w.SubtleCryptoProvider)}createHttpClient(e,t){var r;return new _.FetchHttpClient(this.baseURL,Object.assign(Object.assign({},e.config),{headers:Object.assign(Object.assign({},null===(r=e.config)||void 0===r?void 0:r.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":t})}))}createIronSessionProvider(){throw Error("IronSessionProvider not implemented. Use WorkOSNode or WorkOSWorker instead.")}get version(){return A}post(e,t,r={}){return n(this,void 0,void 0,function*(){let i={};r.idempotencyKey&&(i[O]=r.idempotencyKey),r.warrantToken&&(i[P]=r.warrantToken);try{let n=yield this.client.post(e,t,{params:r.query,headers:i});return{data:yield n.toJSON()}}catch(t){throw this.handleHttpError({path:e,error:t}),t}})}get(e,t={}){return n(this,void 0,void 0,function*(){let r={};t.accessToken&&(r[k]=`Bearer ${t.accessToken}`),t.warrantToken&&(r[P]=t.warrantToken);try{let i=yield this.client.get(e,{params:t.query,headers:r});return{data:yield i.toJSON()}}catch(t){throw this.handleHttpError({path:e,error:t}),t}})}put(e,t,r={}){return n(this,void 0,void 0,function*(){let i={};r.idempotencyKey&&(i[O]=r.idempotencyKey);try{let n=yield this.client.put(e,t,{params:r.query,headers:i});return{data:yield n.toJSON()}}catch(t){throw this.handleHttpError({path:e,error:t}),t}})}delete(e,t){return n(this,void 0,void 0,function*(){try{yield this.client.delete(e,{params:t})}catch(t){throw this.handleHttpError({path:e,error:t}),t}})}emitWarning(e){console.warn(`WorkOS: ${e}`)}handleHttpError({path:e,error:t}){var r;if(!(t instanceof b.HttpClientError))throw Error(`Unexpected error: ${t}`,{cause:t});let{response:i}=t;if(i){let{status:t,data:n,headers:a}=i,s=null!==(r=a["X-Request-ID"])&&void 0!==r?r:"",{code:c,error_description:u,error:l,errors:h,message:d}=n;switch(t){case 401:throw new o.UnauthorizedException(s);case 422:throw new o.UnprocessableEntityException({code:c,errors:h,message:d,requestID:s});case 404:throw new o.NotFoundException({code:c,message:d,path:e,requestID:s});case 429:{let e=a.get("Retry-After");throw new o.RateLimitExceededException(n.message,s,e?Number(e):null)}default:if(l||u)throw new o.OauthException(t,s,l,u,n);if(c&&h)throw new v.BadRequestException({code:c,errors:h,message:d,requestID:s});throw new o.GenericServerException(t,n.message,n,s)}}}}t.WorkOS=x},7526:(e,t)=>{"use strict";t.byteLength=u,t.toByteArray=h,t.fromByteArray=p;for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function u(e){var t=c(e),r=t[0],i=t[1];return(r+i)*3/4-i}function l(e,t,r){return(t+r)*3/4-r}function h(e){var t,r,o=c(e),a=o[0],s=o[1],u=new n(l(e,a,s)),h=0,d=s>0?a-4:a;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u}function d(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function f(e,t,r){for(var i=[],n=t;n<r;n+=3)i.push(d((e[n]<<16&0xff0000)+(e[n+1]<<8&65280)+(255&e[n+2])));return i.join("")}function p(e){for(var t,i=e.length,n=i%3,o=[],a=16383,s=0,c=i-n;s<c;s+=a)o.push(f(e,s,s+a>c?c:s+a));return 1===n?o.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&o.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},8287:(e,t,r)=>{"use strict";let i=r(7526),n=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;let a=0x7fffffff;function s(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function c(e){if(e>a)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ea(e,ArrayBuffer)||e&&ea(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ea(e,SharedArrayBuffer)||e&&ea(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return u.from(i,t,r);let n=v(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return(h(e),e<=0)?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function f(e){return h(e),c(e<0?0:0|b(e))}function p(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!u.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|_(e,t),i=c(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function y(e){let t=e.length<0?0:0|b(e.length),r=c(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function g(e){if(ea(e,Uint8Array)){let t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function m(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),u.prototype),i}function v(e){if(u.isBuffer(e)){let t=0|b(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||es(e.length)?c(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function b(e){if(e>=a)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function w(e){return+e!=e&&(e=0),u.alloc(+e)}function _(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ea(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return en(e).length;default:if(n)return i?-1:et(e).length;t=(""+t).toLowerCase(),n=!0}}function S(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return j(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function A(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function E(e,t,r,i,n){if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),es(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,i,n);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function k(e,t,r,i,n){let o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;a=2,s/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let i=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===c)return i*a}else -1!==i&&(o-=o-i),i=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){let r=!0;for(let i=0;i<c;i++)if(u(e,o+i)!==u(t,i)){r=!1;break}if(r)return o}return -1}function O(e,t,r,i){let n;r=Number(r)||0;let o=e.length-r;i?(i=Number(i))>o&&(i=o):i=o;let a=t.length;for(i>a/2&&(i=a/2),n=0;n<i;++n){let i=parseInt(t.substr(2*n,2),16);if(es(i))break;e[r+n]=i}return n}function P(e,t,r,i){return eo(et(t,e.length-r),e,r,i)}function x(e,t,r,i){return eo(er(t),e,r,i)}function C(e,t,r,i){return eo(en(t),e,r,i)}function B(e,t,r,i){return eo(ei(t,e.length-r),e,r,i)}function R(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function j(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],o=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[n+1]))==128&&(c=(31&t)<<6|63&r)>127&&(o=c);break;case 3:r=e[n+1],i=e[n+2],(192&r)==128&&(192&i)==128&&(c=(15&t)<<12|(63&r)<<6|63&i)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:r=e[n+1],i=e[n+2],s=e[n+3],(192&r)==128&&(192&i)==128&&(192&s)==128&&(c=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=a}return T(i)}t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=s(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(ea(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),ea(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let i=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(ea(t,Uint8Array))n+t.length>i.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else if(u.isBuffer(t))t.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return i},u.byteLength=_,u.prototype._isBuffer=!0,u.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?j(this,0,e):S.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,i,n){if(ea(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;let o=n-i,a=r-t,s=Math.min(o,a),c=this.slice(i,n),l=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==l[e]){o=c[e],a=l[e];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return O(this,e,t,r);case"utf8":case"utf-8":return P(this,e,t,r);case"ascii":case"latin1":case"binary":return x(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,r);default:if(o)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let I=4096;function T(e){let t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}function U(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function M(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function N(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=ec[e[i]];return n}function K(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function H(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function D(e,t,r,i,n,o){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function L(e,t,r,i,n){Y(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function z(e,t,r,i,n){Y(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function $(e,t,r,i,n,o){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function W(e,t,r,i,o){return t=+t,r>>>=0,o||$(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function F(e,t,r,i,o){return t=+t,r>>>=0,o||$(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,u.prototype),i},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||H(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||H(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||H(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||H(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||H(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||H(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=eu(function(e){X(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),u.prototype.readBigUInt64BE=eu(function(e){X(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&Z(e,this.length-8);let i=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],n=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||H(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||H(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return(e>>>=0,t||H(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||H(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||H(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=eu(function(e){X(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&Z(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),u.prototype.readBigInt64BE=eu(function(e){X(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&Z(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||H(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||H(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||H(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||H(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;D(this,e,t,r,i,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=eu(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=eu(function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}let n=0,o=1,a=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}let n=r-1,o=1,a=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=eu(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=eu(function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(e,t,r){return W(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return W(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},u.prototype.fill=function(e,t,r,i){let n;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let o=u.isBuffer(e)?e:u.from(e,i),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};let V={};function J(e,t,r){V[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function q(e,t,r){X(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&Z(t,e.length-(r+1))}function Y(e,t,r,i,n,o){if(e>r||e<t){let i;let n="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new V.ERR_OUT_OF_RANGE("value",i,e)}q(i,n,o)}function X(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,r){if(Math.floor(e)!==e)throw X(e,r),new V.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}J("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),J("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?n=G(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=G(n)),n+="n"),i+=` It must be ${t}. Received ${n}`},RangeError);let Q=/[^+/0-9A-Za-z-_]/g;function ee(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function et(e,t){let r;t=t||1/0;let i=e.length,n=null,o=[];for(let a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319||a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function er(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ei(e,t){let r,i;let n=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}function en(e){return i.toByteArray(ee(e))}function eo(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function ea(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function es(e){return e!=e}let ec=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function eu(e){return"undefined"==typeof BigInt?el:e}function el(){throw Error("BigInt not supported")}},7427:(e,t)=>{"use strict";t.parse=n,t.serialize=o;var r=Object.prototype.toString,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},i=(t||{}).decode||a,n=0;n<e.length;){var o=e.indexOf("=",n);if(-1===o)break;var s=e.indexOf(";",n);if(-1===s)s=e.length;else if(s<o){n=e.lastIndexOf(";",o-1)+1;continue}var c=e.slice(n,o).trim();if(void 0===r[c]){var l=e.slice(o+1,s).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[c]=u(l,i)}n=s+1}return r}function o(e,t,r){var n=r||{},o=n.encode||s;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=o(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var u=e+"="+a;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(l)}if(n.domain){if(!i.test(n.domain))throw TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){var h=n.expires;if(!c(h)||isNaN(h.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+h.toUTCString()}if(n.httpOnly&&(u+="; HttpOnly"),n.secure&&(u+="; Secure"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u}function a(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function s(e){return encodeURIComponent(e)}function c(e){return"[object Date]"===r.call(e)||e instanceof Date}function u(e,t){try{return t(e)}catch(t){return e}}},251:(e,t)=>{t.read=function(e,t,r,i,n){var o,a,s=8*n-i-1,c=(1<<s)-1,u=c>>1,l=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=256*a+e[t+h],h+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var a,s,c,u=8*o-n-1,l=(1<<u)-1,h=l>>1,d=23===n?5960464477539062e-23:0,f=i?0:o-1,p=i?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?t+=d/c:t+=d*Math.pow(2,1-h),t*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;e[r+f]=255&a,f+=p,a/=256,u-=8);e[r+f-p]|=128*y}},7807:(e,t,r)=>{"use strict";var i=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))c.call(e,s)||s===r||n(e,s,{get:()=>t[s],enumerable:!(i=o(t,s))||i.enumerable});return e},l=(e,t,r)=>(r=null!=e?i(s(e)):{},u(!t&&e&&e.__esModule?r:n(r,"default",{value:e,enumerable:!0}),e)),h=e=>u(n({},"__esModule",{value:!0}),e),d={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(d,{createGetIronSession:()=>w,createSealData:()=>k,createUnsealData:()=>A,getIronSession:()=>B,sealData:()=>C,unsealData:()=>x}),e.exports=h(d);var f=l(r(4190)),p=l(r(7427)),y=60,g=1296e3,m=2,v="~",b={ttl:g,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function w(e,t,r){return async(e,i,n)=>{if(!e||!i||!n||!n.cookieName||!n.password)throw Error('iron-session: Bad usage. Minimum usage is const session = await getIronSession(req, res, { cookieName: "...", password: "...". Check the usage here: https://github.com/vvo/iron-session');let o=O(n.password);Object.values(O(n.password)).forEach(e=>{if(e.length<32)throw Error("iron-session: Bad usage. Password must be at least 32 characters long.")});let a={...b,...n,cookieOptions:{...b.cookieOptions,...n.cookieOptions||{}}};0===a.ttl&&(a.ttl=0x7fffffff),n.cookieOptions&&"maxAge"in n.cookieOptions?void 0===n.cookieOptions.maxAge?a.ttl=0:a.cookieOptions.maxAge=S(n.cookieOptions.maxAge):a.cookieOptions.maxAge=S(a.ttl);let s=p.default.parse("credentials"in e?e.headers.get("cookie")||"":e.headers.cookie||"")[a.cookieName],c=void 0===s?{}:await t(s,{password:o,ttl:a.ttl});return Object.defineProperties(c,{save:{value:async function(){if("headersSent"in i&&!0===i.headersSent)throw Error("iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()");let e=await r(c,{password:o,ttl:a.ttl}),t=p.default.serialize(a.cookieName,e,a.cookieOptions);if(t.length>4096)throw Error(`iron-session: Cookie length is too big ${t.length}, browsers will refuse it. Try to remove some data.`);_(t,i)}},destroy:{value:function(){Object.keys(c).forEach(e=>{delete c[e]}),_(p.default.serialize(a.cookieName,"",{...a.cookieOptions,maxAge:0}),i)}}}),c}}function _(e,t){var r;if("headers"in t){t.headers.append("set-cookie",e);return}let i=null!=(r=t.getHeader("set-cookie"))?r:[];"string"==typeof i&&(i=[i]),t.setHeader("set-cookie",[...i,e])}function S(e){return e-y}function A(e){return async(t,{password:r,ttl:i=g})=>{let n=O(r),{sealWithoutVersion:o,tokenVersion:a}=E(t);try{let t=await f.unseal(e,o,n,{...f.defaults,ttl:1e3*i})||{};if(2===a)return t;return{...t.persistent}}catch(e){if(e instanceof Error&&("Expired seal"===e.message||"Bad hmac value"===e.message||e.message.startsWith("Cannot find password: ")||"Incorrect number of sealed components"===e.message))return{};throw e}}}function E(e){if(e[e.length-2]===v){let[t,r]=e.split(v);return{sealWithoutVersion:t,tokenVersion:parseInt(r,10)}}return{sealWithoutVersion:e,tokenVersion:null}}function k(e){return async(t,{password:r,ttl:i=g})=>{let n=O(r),o=Math.max(...Object.keys(n).map(e=>parseInt(e,10))),a={id:o.toString(),secret:n[o]},s=await f.seal(e,t,a,{...f.defaults,ttl:1e3*i});return`${s}${v}${m}`}}function O(e){return"string"==typeof e?{1:e}:e}var P=new(r(8511)).Crypto,x=A(P),C=k(P),B=w(P,x,C)},4190:(e,t,r)=>{"use strict";var i=r(8287),n=e=>(i.Buffer.isBuffer(e)?e:i.Buffer.from(e)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),o={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},a=e=>({...e,encryption:{...e.encryption},integrity:{...e.integrity}}),s={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},c="2",u=`Fe26.${c}`,l=(e,t)=>{let r=i.Buffer.allocUnsafe(t);return e.getRandomValues(r),r},h=(e,t)=>{if(t<1)throw Error("Invalid random bits count");return l(e,Math.ceil(t/8))},d=async(e,t,r,n,o,a)=>{let s=new TextEncoder,c=s.encode(t),u=await e.subtle.importKey("raw",c,"PBKDF2",!1,["deriveBits"]),l={name:"PBKDF2",hash:a,salt:s.encode(r),iterations:n},h=await e.subtle.deriveBits(l,u,8*o);return i.Buffer.from(h)},f=async(e,t,r)=>{var i;if(null==t||!t.length)throw Error("Empty password");if(null==r||"object"!=typeof r)throw Error("Bad options");if(!(r.algorithm in s))throw Error(`Unknown algorithm: ${r.algorithm}`);let n=s[r.algorithm],o={},a=null!=(i=r.hmac)&&i,c=a?{name:"HMAC",hash:n.name}:{name:n.name},u=a?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof t){if(t.length<r.minPasswordlength)throw Error(`Password string too short (min ${r.minPasswordlength} characters required)`);let{salt:i=""}=r;if(!i){let{saltBits:t=0}=r;if(!t)throw Error("Missing salt and saltBits options");i=h(e,t).toString("hex")}let a=await d(e,t,i,r.iterations,n.keyBits/8,"SHA-1"),s=await e.subtle.importKey("raw",a,c,!1,u);o.key=s,o.salt=i}else{if(t.length<n.keyBits/8)throw Error("Key buffer (password) too small");o.key=await e.subtle.importKey("raw",t,c,!1,u),o.salt=""}return r.iv?o.iv=r.iv:"ivBits"in n&&(o.iv=h(e,n.ivBits)),o},p=async(e,t,r,n)=>{let o=await f(e,t,r),a=new TextEncoder().encode(n),c=await e.subtle.encrypt({name:s[r.algorithm].name,iv:o.iv},o.key,a);return{encrypted:i.Buffer.from(c),key:o}},y=async(e,t,r,n)=>{let o=await f(e,t,r),a=await e.subtle.decrypt({name:s[r.algorithm].name,iv:o.iv},o.key,i.Buffer.isBuffer(n)?n:i.Buffer.from(n));return new TextDecoder().decode(a)},g=async(e,t,r,o)=>{let a=await f(e,t,{...r,hmac:!0}),s=new TextEncoder().encode(o),c=await e.subtle.sign({name:"HMAC"},a.key,s);return{digest:n(i.Buffer.from(c)),salt:a.salt}},m=e=>"object"!=typeof e||i.Buffer.isBuffer(e)?{encryption:e,integrity:e}:"secret"in e?{id:e.id,encryption:e.secret,integrity:e.secret}:{id:e.id,encryption:e.encryption,integrity:e.integrity},v=async(e,t,r,i)=>{if(!r)throw Error("Empty password");let o=a(i),s=Date.now()+(o.localtimeOffsetMsec||0),c=JSON.stringify(t),l=m(r),{id:h=""}=l;if(h&&!/^\w+$/.test(h))throw Error("Invalid password id");let{encrypted:d,key:f}=await p(e,l.encryption,o.encryption,c),y=n(d),v=n(f.iv),b=o.ttl?s+o.ttl:"",w=`${u}*${h}*${f.salt}*${v}*${y}*${b}`,_=await g(e,l.integrity,o.integrity,w);return`${w}*${_.salt}*${_.digest}`},b=(e,t)=>{let r=e.length===t.length?0:1;r&&(t=e);for(let i=0;i<e.length;i+=1)r|=e.charCodeAt(i)^t.charCodeAt(i);return 0===r},w=async(e,t,r,n)=>{let o;if(!r)throw Error("Empty password");let s=a(n),c=Date.now()+(s.localtimeOffsetMsec||0),l=t.split("*");if(8!==l.length)throw Error("Incorrect number of sealed components");let h=l[0],d=l[1],f=l[2],p=l[3],v=l[4],w=l[5],_=l[6],S=l[7],A=`${h}*${d}*${f}*${p}*${v}*${w}`;if(u!==h)throw Error("Wrong mac prefix");if(w){if(!/^\d+$/.exec(w))throw Error("Invalid expiration");if(parseInt(w,10)<=c-1e3*s.timestampSkewSec)throw Error("Expired seal")}if(void 0===r||"string"==typeof r&&0===r.length)throw Error("Empty password");if("object"!=typeof r||i.Buffer.isBuffer(r))o=r;else{if(!((d||"default")in r))throw Error(`Cannot find password: ${d}`);o=r[d||"default"]}o=m(o);let E=s.integrity;if(E.salt=_,!b((await g(e,o.integrity,E,A)).digest,S))throw Error("Bad hmac value");let k=i.Buffer.from(v,"base64"),O=s.encryption;O.salt=f,O.iv=i.Buffer.from(p,"base64");let P=await y(e,o.encryption,O,k);return P?JSON.parse(P):null};Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return i.Buffer}}),t.algorithms=s,t.base64urlEncode=n,t.clone=a,t.decrypt=y,t.defaults=o,t.encrypt=p,t.generateKey=f,t.hmacWithPassword=g,t.macFormatVersion=c,t.macPrefix=u,t.randomBits=h,t.seal=v,t.unseal=w},5766:e=>{var t="/";!function(){"use strict";var r={864:function(e){var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function n(e){console&&console.warn&&console.warn(e)}t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=v,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){if(c(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(o=u(e))>0&&s.length>o&&!s.warned){s.warned=!0;var o,a,s,l=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,n(l)}return e}function h(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=h.bind(i);return n.listener=r,i.wrapFn=n,n}function f(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?m(n):y(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function m(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function v(e,t){return new Promise(function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}w(e,t,o,{once:!0}),"error"!==t&&b(e,n,{once:!0})})}function b(e,t,r){"function"==typeof e.on&&w(e,"error",t,r)}function w(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(o){i.once&&e.removeEventListener(t,n),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,s=Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else for(var u=c.length,l=y(c,u),r=0;r<u;++r)i(l[r],this,t);return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,i,n,o,a;if(c(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():g(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={exports:{}},a=!0;try{r[e](o,o.exports,n),a=!1}finally{a&&delete i[e]}return o.exports}n.ab=t+"/";var o=n(864);e.exports=o}()},7780:(e,t,r)=>{var i="/";!function(){var t={528:function(e,t,r){var i=r(685),n=r(310),o=e.exports;for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);function s(e){if("string"==typeof e&&(e=n.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=s(e),i.request.call(this,e,t)},o.get=function(e,t){return e=s(e),i.get.call(this,e,t)}},685:function(e){"use strict";e.exports=r(6313)},310:function(e){"use strict";e.exports=r(8797)}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,o),a=!1}finally{a&&delete n[e]}return i.exports}o.ab=i+"/";var a=o(528);e.exports=a}()},8797:(e,t,r)=>{var i="/";!function(){var t={452:function(e){"use strict";e.exports=r(6271)}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,o),a=!1}finally{a&&delete n[e]}return i.exports}o.ab=i+"/";var a={};!function(){var e,t=a,r=(e=o(452))&&"object"==typeof e&&"default"in e?e.default:e,i=/https?|ftp|gopher|file/;function n(e){"string"==typeof e&&(e=b(e));var t=function(e,t,r){var i=e.auth,n=e.hostname,o=e.protocol||"",a=e.pathname||"",s=e.hash||"",c=e.query||"",u=!1;i=i?encodeURIComponent(i).replace(/%3A/i,":")+"@":"",e.host?u=i+e.host:n&&(u=i+(~n.indexOf(":")?"["+n+"]":n),e.port&&(u+=":"+e.port)),c&&"object"==typeof c&&(c=t.encode(c));var l=e.search||c&&"?"+c||"";return o&&":"!==o.substr(-1)&&(o+=":"),e.slashes||(!o||r.test(o))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),s&&"#"!==s[0]&&(s="#"+s),l&&"?"!==l[0]&&(l="?"+l),{protocol:o,host:u,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:l=l.replace("#","%23"),hash:s}}(e,r,i);return""+t.protocol+t.host+t.pathname+t.search+t.hash}var s="http://",c="w.w",u=s+c,l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,h=/https?|ftp|gopher|file/;function d(e,t){var r="string"==typeof e?b(e):e;e="object"==typeof e?n(e):e;var i=b(t),o="";r.protocol&&!r.slashes&&(o=r.protocol,e=e.replace(r.protocol,""),o+="/"===t[0]||"/"===e[0]?"/":""),o&&i.protocol&&(o="",i.slashes||(o=i.protocol,t=t.replace(i.protocol,"")));var a=e.match(l);a&&!i.protocol&&(e=e.substr((o=a[1]+(a[2]||"")).length),/^\/\/[^/]/.test(t)&&(o=o.slice(0,-1)));var c=new URL(e,u+"/"),d=new URL(t,c).toString().replace(u,""),f=i.protocol||r.protocol;return f+=r.slashes||i.slashes?"//":"",!o&&f?d=d.replace(s,f):o&&(d=d.replace(s,"")),h.test(d)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==d.slice(-1)||(d=d.slice(0,-1)),o&&(d=o+("/"===d[0]?d.substr(1):d)),d}function f(){}f.prototype.parse=b,f.prototype.format=n,f.prototype.resolve=d,f.prototype.resolveObject=d;var p=/^https?|ftp|gopher|file/,y=/^(.*?)([#?].*)/,g=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,m=/^([a-z0-9.+-]*:)?\/\/\/*/i,v=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function b(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),e&&"object"==typeof e&&e instanceof f)return e;var o=(e=e.trim()).match(y);e=o?o[1].replace(/\\/g,"/")+o[2]:e.replace(/\\/g,"/"),v.test(e)&&"/"!==e.slice(-1)&&(e+="/");var a=!/(^javascript)/.test(e)&&e.match(g),s=m.test(e),l="";a&&(p.test(a[1])||(l=a[1].toLowerCase(),e=""+a[2]+a[3]),a[2]||(s=!1,p.test(a[1])?(l=a[1],e=""+a[3]):e="//"+a[3]),3!==a[2].length&&1!==a[2].length||(l=a[1],e="/"+a[3]));var h,d=(o?o[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),b=d&&d[1],w=new f,_="",S="";try{h=new URL(e)}catch(t){_=t,l||i||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(S="/",e=e.substr(1));try{h=new URL(e,u)}catch(e){return w.protocol=l,w.href=l,w}}w.slashes=s&&!S,w.host=h.host===c?"":h.host,w.hostname=h.hostname===c?"":h.hostname.replace(/(\[|\])/g,""),w.protocol=_?l||null:h.protocol,w.search=h.search.replace(/\\/g,"%5C"),w.hash=h.hash.replace(/\\/g,"%5C");var A=e.split("#");!w.search&&~A[0].indexOf("?")&&(w.search="?"),w.hash||""!==A[1]||(w.hash="#"),w.query=t?r.decode(h.search.substr(1)):w.search.substr(1),w.pathname=S+(a?function(e){return e.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}})}(h.pathname):h.pathname),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),_&&"/"!==e[0]&&(w.pathname=w.pathname.substr(1)),l&&!p.test(l)&&"/"!==e.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[h.username,h.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=h.port,b&&!w.host.endsWith(b)&&(w.host+=b,w.port=b.slice(1)),w.href=S?""+w.pathname+w.search+w.hash:n(w);var E=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){~E.indexOf(e)||(w[e]=w[e]||null)}),w}t.parse=b,t.format=n,t.resolve=d,t.resolveObject=function(e,t){return b(d(e,t))},t.Url=f}(),e.exports=a}()},6271:e=>{var t="/";!function(){"use strict";var r={815:function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,i,n,o){i=i||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(i);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,d,f,p,y=e[l].replace(s,"%20"),g=y.indexOf(n);g>=0?(h=y.substr(0,g),d=y.substr(g+1)):(h=y,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),t(a,f)?r(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,o,a,s){return(o=o||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e)?i(n(e),function(n){var s=encodeURIComponent(t(n))+a;return r(e[n])?i(e[n],function(e){return s+encodeURIComponent(t(e))}).join(o):s+encodeURIComponent(t(e[n]))}).join(o):s?encodeURIComponent(t(s))+a+encodeURIComponent(t(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var n=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={exports:{}},a=!0;try{r[e](o,o.exports,n),a=!1}finally{a&&delete i[e]}return o.exports}n.ab=t+"/";var o={};!function(){var e=o;e.decode=e.parse=n(815),e.encode=e.stringify=n(577)}(),e.exports=o}()},471:(e,t,r)=>{var i="/",n=r(7836);!function(){var t={782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function r(e,r,i){function n(e,t,i){return"string"==typeof r?r:r(e,t,i)}i||(i=Error);class o extends i{constructor(e,t,r){super(n(e,t,r))}}o.prototype.name=i.name,o.prototype.code=e,t[e]=o}function i(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function n(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function o(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function a(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){let s,c;if("string"==typeof t&&n(t,"not ")?(s="must not be",t=t.replace(/^not /,"")):s="must be",o(e," argument"))c=`The ${e} ${s} ${i(t,"type")}`;else{let r=a(e,".")?"property":"argument";c=`The "${e}" ${r} ${s} ${i(t,"type")}`}return c+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(709),a=r(337);r(782)(l,o);for(var s=i(a.prototype),c=0;c<s.length;c++){var u=s[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=n;var i=r(170);function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(782)(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},709:function(e,t,i){"use strict";e.exports=C,C.ReadableState=x,i(361).EventEmitter;var o,a,s,c,u,l=function(e,t){return e.listeners(t).length},h=i(678),d=i(300).Buffer,f=r.g.Uint8Array||function(){};function p(e){return d.from(e)}function y(e){return d.isBuffer(e)||e instanceof f}var g=i(837);a=g&&g.debuglog?g.debuglog("stream"):function(){};var m=i(379),v=i(25),b=i(776).getHighWaterMark,w=i(646).q,_=w.ERR_INVALID_ARG_TYPE,S=w.ERR_STREAM_PUSH_AFTER_EOF,A=w.ERR_METHOD_NOT_IMPLEMENTED,E=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(782)(C,h);var k=v.errorOrDestroy,O=["error","close","destroy","pause","resume"];function P(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function x(e,t,r){o=o||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=i(704).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function C(e){if(o=o||i(403),!(this instanceof C))return new C(e);var t=this instanceof o;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),h.call(this)}function B(e,t,r,i,n){a("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,M(e,s);else if(n||(o=j(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0){if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=p(t)),i)s.endEmitted?k(e,new E):R(e,s,t,!0);else if(s.ended)k(e,new S);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?R(e,s,t,!1):H(e,s)):R(e,s,t,!1)}}else i||(s.reading=!1,H(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function R(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),H(e,t)}function j(e,t){var r;return y(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=v.destroy,C.prototype._undestroy=v.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=d.from(e,t),t=""),r=!0),B(this,e,t,!1,r)},C.prototype.unshift=function(e){return B(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){s||(s=i(704).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var I=0x40000000;function T(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function U(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=T(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function M(e,t){if(a("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,K(e)))}}function N(e){var t=e._readableState;a("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(a("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(K,e))}function K(e){var t=e._readableState;a("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,V(e)}function H(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(a("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function L(e){return function(){var t=e._readableState;a("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,V(e))}}function z(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function $(e){a("readable nexttick read 0"),e.read(0)}function W(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(F,e,t))}function F(e,t){a("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),V(e),t.flowing&&!t.reading&&e.read(0)}function V(e){var t=e._readableState;for(a("flow",t.flowing);t.flowing&&null!==e.read(););}function J(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function G(e){var t=e._readableState;a("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(q,t,e))}function q(e,t){if(a("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Y(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}C.prototype.read=function(e){a("read",e),e=parseInt(e,10);var t,r=this._readableState,i=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return a("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?G(this):N(this),null;if(0===(e=U(e,r))&&r.ended)return 0===r.length&&G(this),null;var n=r.needReadable;return a("need readable",n),(0===r.length||r.length-e<r.highWaterMark)&&a("length less than watermark",n=!0),r.ended||r.reading?a("reading or ended",n=!1):n&&(a("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=U(i,r))),null===(t=e>0?J(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&G(this)),null!==t&&this.emit("data",t),t},C.prototype._read=function(e){k(this,new A("_read()"))},C.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,a("pipe count=%d opts=%j",i.pipesCount,t);var o=t&&!1===t.end||e===n.stdout||e===n.stderr?m:c;function s(e,t){a("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,d())}function c(){a("onend"),e.end()}i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",s);var u=L(r);e.on("drain",u);var h=!1;function d(){a("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",f),h=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}function f(t){a("ondata");var n=e.write(t);a("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Y(i.pipes,e))&&!h&&(a("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(t){a("onerror",t),m(),e.removeListener("error",p),0===l(e,"error")&&k(e,t)}function y(){e.removeListener("finish",g),m()}function g(){a("onfinish"),e.removeListener("close",y),m()}function m(){a("unpipe"),r.unpipe(e)}return r.on("data",f),P(e,"error",p),e.once("close",y),e.once("finish",g),e.emit("pipe",r),i.flowing||(a("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Y(t.pipes,e);return -1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var r=h.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,a("on readable",i.length,i.reading),i.length?N(this):i.reading||n.nextTick($,this)),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=h.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(z,this),r},C.prototype.removeAllListeners=function(e){var t=h.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(z,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(a("resume"),e.flowing=!e.readableListening,W(this,e)),e.paused=!1,this},C.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(a("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){a("wrapped data"),r.decoder&&(n=r.decoder.write(n)),(!r.objectMode||null!=n)&&(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<O.length;o++)e.on(O[o],this.emit.bind(this,O[o]));return this._read=function(t){a("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=i(871)),c(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=J,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===u&&(u=i(727)),u(C,e,t)})},170:function(e,t,r){"use strict";e.exports=l;var i=r(646).q,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,c=r(403);function u(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r)})}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(782)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new n("_transform()"))},l.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,i){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}e.exports=x,x.WritableState=P;var a,s,c={deprecate:i(769)},u=i(678),l=i(300).Buffer,h=r.g.Uint8Array||function(){};function d(e){return l.from(e)}function f(e){return l.isBuffer(e)||e instanceof h}var p=i(25),y=i(776).getHighWaterMark,g=i(646).q,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,w=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,S=g.ERR_STREAM_NULL_VALUES,A=g.ERR_STREAM_WRITE_AFTER_END,E=g.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function O(){}function P(e,t,r){a=a||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof a),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=y(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){M(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function x(e){var t=this instanceof(a=a||i(403));if(!t&&!s.call(x,this))return new x(e);this._writableState=new P(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function C(e,t){var r=new A;k(e,r),n.nextTick(t,r)}function B(e,t,r,i){var o;return null===r?o=new S:"string"==typeof r||t.objectMode||(o=new m("chunk",["string","Buffer"],r)),!o||(k(e,o),n.nextTick(i,o),!1)}function R(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}function j(e,t,r,i,n,o){if(!r){var a=R(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,s,i,n,o);return c}function I(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function T(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick($,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),$(e,t))}function U(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function M(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new b;if(U(r),t)T(e,r,i,t,o);else{var a=D(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||H(e,r),i?n.nextTick(N,e,r,a,o):N(e,r,a,o)}}function N(e,t,r,i){r||K(e,t),t.pendingcb--,i(),$(e,t)}function K(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function H(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=Array(t.bufferedRequestCount),n=t.corkedRequestsFree;n.entry=r;for(var a=0,s=!0;r;)i[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;i.allBuffers=s,I(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback,h=t.objectMode?1:c.length;if(I(e,t,!1,h,c,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final(function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),$(e,t)})}function z(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(L,e,t)))}function $(e,t){var r=D(t);if(r&&(z(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function W(e,t,r){t.ending=!0,$(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function F(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}i(782)(x,u),P.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(P.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===x&&e&&e._writableState instanceof P}})):s=function(e){return e instanceof this},x.prototype.pipe=function(){k(this,new w)},x.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&f(e);return o&&!l.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=O),i.ending?C(this,r):(o||B(this,i,e,r))&&(i.pendingcb++,n=j(this,i,o,e,t,r)),n},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||H(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new v("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||W(this,i,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,a=r(698),s=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function y(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[h]=null,e[s]=null,e[c]=null,t(p(r,!1)))}}function g(e){n.nextTick(y,e)}function m(e,t){return function(r,i){e.then(function(){if(t[l]){r(p(void 0,!0));return}t[d](r,i)},i)}}var v=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((i(o={get stream(){return this[f]},next:function(){var e,t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,r){n.nextTick(function(){t[u]?r(t[u]):e(p(void 0,!0))})});var i=this[h];if(i)e=new Promise(m(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));e=new Promise(this[d])}return this[h]=e,e}},Symbol.asyncIterator,function(){return this}),i(o,"return",function(){var e=this;return new Promise(function(t,r){e[f].destroy(null,function(e){if(e){r(e);return}t(p(void 0,!0))})})}),o),v),w=function(e){var t,r=Object.create(b,(i(t={},f,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var i=r[f].read();i?(r[h]=null,r[s]=null,r[c]=null,e(p(i,!1))):(r[s]=e,r[c]=t)},writable:!0}),t));return r[h]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[c];null!==t&&(r[h]=null,r[s]=null,r[c]=null,t(e)),r[u]=e;return}var i=r[s];null!==i&&(r[h]=null,r[s]=null,r[c]=null,i(p(void 0,!0))),r[l]=!0}),e.on("readable",g.bind(null,r)),r};e.exports=w},379:function(e,t,r){"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var u=r(300).Buffer,l=r(837).inspect,h=l&&l.custom||"inspect";function d(e,t,r){u.prototype.copy.call(e,t,r)}e.exports=function(){function e(){a(this,e),this.head=null,this.tail=null,this.length=0}return c(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),r=this.head,i=0;r;)d(r.data,t,i),i+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,o=e>n.length?n.length:e;if(o===n.length?i+=n:i+=n.slice(0,e),0==(e-=o)){o===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,o),0==(e-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,t}},{key:h,value:function(e,t){return l(this,n({},t,{depth:0,customInspect:!1}))}}]),e}()},25:function(e){"use strict";function t(e,t){var o=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?o._writableState?o._writableState.errorEmitted?n.nextTick(i,o):(o._writableState.errorEmitted=!0,n.nextTick(r,o,e)):n.nextTick(r,o,e):t?(n.nextTick(i,o),t(e)):n.nextTick(i,o)})),this}function r(e,t){a(e,t),i(e)}function i(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}function s(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:t,undestroy:o,errorOrDestroy:s}},698:function(e,t,r){"use strict";var i=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function n(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function o(){}function a(e){return e.setHeader&&"function"==typeof e.abort}function s(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=n(r||o);var c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||d()},h=e._writableState&&e._writableState.finished,d=function(){u=!1,h=!0,c||r.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){c=!1,f=!0,u||r.call(e)},y=function(t){r.call(e,t)},g=function(){var t;return c&&!f?(e._readableState&&e._readableState.ended||(t=new i),r.call(e,t)):u&&!h?(e._writableState&&e._writableState.ended||(t=new i),r.call(e,t)):void 0},m=function(){e.req.on("finish",d)};return a(e)?(e.on("complete",d),e.on("abort",g),e.req?m():e.on("request",m)):u&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",d),!1!==t.error&&e.on("error",y),e.on("close",g),function(){e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("end",p),e.removeListener("error",y),e.removeListener("close",g)}}e.exports=s},727:function(e,t,r){"use strict";function i(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function n(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)})}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(646).q.ERR_INVALID_ARG_TYPE;function u(e,t,r){if(t&&"function"==typeof t.next)i=t;else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new c("iterable",["Iterable"],t);var i,o=new e(a({objectMode:!0},r)),s=!1;function u(){return l.apply(this,arguments)}function l(){return(l=n(function*(){try{var e=yield i.next(),t=e.value;e.done?o.push(null):o.push((yield t))?u():s=!1}catch(e){o.destroy(e)}})).apply(this,arguments)}return o._read=function(){s||(s=!0,u())},o}e.exports=u},442:function(e,t,r){"use strict";function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var n,o=r(646).q,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function c(e){if(e)throw e}function u(e){return e.setHeader&&"function"==typeof e.abort}function l(e,t,o,a){a=i(a);var c=!1;e.on("close",function(){c=!0}),void 0===n&&(n=r(698)),n(e,{readable:t,writable:o},function(e){if(e)return a(e);c=!0,a()});var l=!1;return function(t){if(!c&&!l){if(l=!0,u(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();a(t||new s("pipe"))}}}function h(e){e()}function d(e,t){return e.pipe(t)}function f(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():c}function p(){for(var e,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=f(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new a("streams");var o=r.map(function(t,i){var a=i<r.length-1;return l(t,a,i>0,function(t){e||(e=t),t&&o.forEach(h),a||(o.forEach(h),n(e))})});return r.reduce(d)}e.exports=p},776:function(e,t,r){"use strict";var i=r(646).q.ERR_INVALID_OPT_VALUE;function n(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var a=n(t,o,r);if(null!=a){if(!(isFinite(a)&&Math.floor(a)===a)||a<0)throw new i(o?r:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},678:function(e,t,r){e.exports=r(781)},55:function(e,t,r){var i=r(300),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),a.prototype=Object.create(n.prototype),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},173:function(e,t,r){e.exports=n;var i=r(361).EventEmitter;function n(){i.call(this)}r(782)(n,i),n.Readable=r(709),n.Writable=r(337),n.Duplex=r(403),n.Transform=r(170),n.PassThrough=r(889),n.finished=r(698),n.pipeline=r(442),n.Stream=n,n.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",u),e.on("error",u),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},704:function(e,t,r){"use strict";var i=r(55).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=y,t=4;break;case"utf8":this.fillLast=h,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e,t,r){var i=t.length-1;if(i<r)return 0;var n=c(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}function l(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function h(e){var t=this.lastTotal-this.lastNeed,r=l(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function d(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=f,s.prototype.text=d,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){function t(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=t},300:function(e){"use strict";e.exports=r(8287)},361:function(e){"use strict";e.exports=r(5766)},781:function(e){"use strict";e.exports=r(5766).EventEmitter},837:function(e){"use strict";e.exports=r(7056)}},o={};function a(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}},n=!0;try{t[e](i,i.exports,a),n=!1}finally{n&&delete o[e]}return i.exports}a.ab=i+"/";var s=a(173);e.exports=s}()},6313:(e,t,r)=>{var i="/",n=r(7836),o=r(8287).Buffer;!function(){var t={523:function(e){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function r(e,r,i){function n(e,t,i){return"string"==typeof r?r:r(e,t,i)}i||(i=Error);class o extends i{constructor(e,t,r){super(n(e,t,r))}}o.prototype.name=i.name,o.prototype.code=e,t[e]=o}function i(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function n(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function o(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function a(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){let s,c;if("string"==typeof t&&n(t,"not ")?(s="must not be",t=t.replace(/^not /,"")):s="must be",o(e," argument"))c=`The ${e} ${s} ${i(t,"type")}`;else{let r=a(e,".")?"property":"argument";c=`The "${e}" ${r} ${s} ${i(t,"type")}`}return c+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(709),a=r(337);r(782)(l,o);for(var s=i(a.prototype),c=0;c<s.length;c++){var u=s[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=n;var i=r(170);function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(782)(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},709:function(e,t,i){"use strict";e.exports=C,C.ReadableState=x,i(361).EventEmitter;var o,a,s,c,u,l=function(e,t){return e.listeners(t).length},h=i(678),d=i(300).Buffer,f=r.g.Uint8Array||function(){};function p(e){return d.from(e)}function y(e){return d.isBuffer(e)||e instanceof f}var g=i(837);a=g&&g.debuglog?g.debuglog("stream"):function(){};var m=i(379),v=i(25),b=i(776).getHighWaterMark,w=i(646).q,_=w.ERR_INVALID_ARG_TYPE,S=w.ERR_STREAM_PUSH_AFTER_EOF,A=w.ERR_METHOD_NOT_IMPLEMENTED,E=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(782)(C,h);var k=v.errorOrDestroy,O=["error","close","destroy","pause","resume"];function P(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function x(e,t,r){o=o||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=i(704).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function C(e){if(o=o||i(403),!(this instanceof C))return new C(e);var t=this instanceof o;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),h.call(this)}function B(e,t,r,i,n){a("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,M(e,s);else if(n||(o=j(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0){if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=p(t)),i)s.endEmitted?k(e,new E):R(e,s,t,!0);else if(s.ended)k(e,new S);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?R(e,s,t,!1):H(e,s)):R(e,s,t,!1)}}else i||(s.reading=!1,H(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function R(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&N(e)),H(e,t)}function j(e,t){var r;return y(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=v.destroy,C.prototype._undestroy=v.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=d.from(e,t),t=""),r=!0),B(this,e,t,!1,r)},C.prototype.unshift=function(e){return B(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){s||(s=i(704).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var I=0x40000000;function T(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function U(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=T(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function M(e,t){if(a("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?N(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,K(e)))}}function N(e){var t=e._readableState;a("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(a("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(K,e))}function K(e){var t=e._readableState;a("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,V(e)}function H(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(a("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function L(e){return function(){var t=e._readableState;a("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,V(e))}}function z(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function $(e){a("readable nexttick read 0"),e.read(0)}function W(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(F,e,t))}function F(e,t){a("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),V(e),t.flowing&&!t.reading&&e.read(0)}function V(e){var t=e._readableState;for(a("flow",t.flowing);t.flowing&&null!==e.read(););}function J(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function G(e){var t=e._readableState;a("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(q,t,e))}function q(e,t){if(a("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Y(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}C.prototype.read=function(e){a("read",e),e=parseInt(e,10);var t,r=this._readableState,i=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return a("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?G(this):N(this),null;if(0===(e=U(e,r))&&r.ended)return 0===r.length&&G(this),null;var n=r.needReadable;return a("need readable",n),(0===r.length||r.length-e<r.highWaterMark)&&a("length less than watermark",n=!0),r.ended||r.reading?a("reading or ended",n=!1):n&&(a("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=U(i,r))),null===(t=e>0?J(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&G(this)),null!==t&&this.emit("data",t),t},C.prototype._read=function(e){k(this,new A("_read()"))},C.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,a("pipe count=%d opts=%j",i.pipesCount,t);var o=t&&!1===t.end||e===n.stdout||e===n.stderr?m:c;function s(e,t){a("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,d())}function c(){a("onend"),e.end()}i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",s);var u=L(r);e.on("drain",u);var h=!1;function d(){a("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",c),r.removeListener("end",m),r.removeListener("data",f),h=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}function f(t){a("ondata");var n=e.write(t);a("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Y(i.pipes,e))&&!h&&(a("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(t){a("onerror",t),m(),e.removeListener("error",p),0===l(e,"error")&&k(e,t)}function y(){e.removeListener("finish",g),m()}function g(){a("onfinish"),e.removeListener("close",y),m()}function m(){a("unpipe"),r.unpipe(e)}return r.on("data",f),P(e,"error",p),e.once("close",y),e.once("finish",g),e.emit("pipe",r),i.flowing||(a("pipe resume"),r.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Y(t.pipes,e);return -1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},C.prototype.on=function(e,t){var r=h.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,a("on readable",i.length,i.reading),i.length?N(this):i.reading||n.nextTick($,this)),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var r=h.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(z,this),r},C.prototype.removeAllListeners=function(e){var t=h.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(z,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(a("resume"),e.flowing=!e.readableListening,W(this,e)),e.paused=!1,this},C.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(a("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){a("wrapped data"),r.decoder&&(n=r.decoder.write(n)),(!r.objectMode||null!=n)&&(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<O.length;o++)e.on(O[o],this.emit.bind(this,O[o]));return this._read=function(t){a("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=i(871)),c(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=J,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===u&&(u=i(727)),u(C,e,t)})},170:function(e,t,r){"use strict";e.exports=l;var i=r(646).q,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,c=r(403);function u(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r)})}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(782)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new n("_transform()"))},l.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,i){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}e.exports=x,x.WritableState=P;var a,s,c={deprecate:i(769)},u=i(678),l=i(300).Buffer,h=r.g.Uint8Array||function(){};function d(e){return l.from(e)}function f(e){return l.isBuffer(e)||e instanceof h}var p=i(25),y=i(776).getHighWaterMark,g=i(646).q,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,w=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,S=g.ERR_STREAM_NULL_VALUES,A=g.ERR_STREAM_WRITE_AFTER_END,E=g.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function O(){}function P(e,t,r){a=a||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof a),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=y(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){M(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function x(e){var t=this instanceof(a=a||i(403));if(!t&&!s.call(x,this))return new x(e);this._writableState=new P(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function C(e,t){var r=new A;k(e,r),n.nextTick(t,r)}function B(e,t,r,i){var o;return null===r?o=new S:"string"==typeof r||t.objectMode||(o=new m("chunk",["string","Buffer"],r)),!o||(k(e,o),n.nextTick(i,o),!1)}function R(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}function j(e,t,r,i,n,o){if(!r){var a=R(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,s,i,n,o);return c}function I(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function T(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick($,e,t),e._writableState.errorEmitted=!0,k(e,i)):(o(i),e._writableState.errorEmitted=!0,k(e,i),$(e,t))}function U(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function M(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new b;if(U(r),t)T(e,r,i,t,o);else{var a=D(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||H(e,r),i?n.nextTick(N,e,r,a,o):N(e,r,a,o)}}function N(e,t,r,i){r||K(e,t),t.pendingcb--,i(),$(e,t)}function K(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function H(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=Array(t.bufferedRequestCount),n=t.corkedRequestsFree;n.entry=r;for(var a=0,s=!0;r;)i[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;i.allBuffers=s,I(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,l=r.callback,h=t.objectMode?1:c.length;if(I(e,t,!1,h,c,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final(function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),$(e,t)})}function z(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(L,e,t)))}function $(e,t){var r=D(t);if(r&&(z(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function W(e,t,r){t.ending=!0,$(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function F(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}i(782)(x,u),P.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(P.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===x&&e&&e._writableState instanceof P}})):s=function(e){return e instanceof this},x.prototype.pipe=function(){k(this,new w)},x.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&f(e);return o&&!l.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=O),i.ending?C(this,r):(o||B(this,i,e,r))&&(i.pendingcb++,n=j(this,i,o,e,t,r)),n},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||H(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,r){r(new v("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||W(this,i,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=p.destroy,x.prototype._undestroy=p.undestroy,x.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o,a=r(698),s=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function y(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[h]=null,e[s]=null,e[c]=null,t(p(r,!1)))}}function g(e){n.nextTick(y,e)}function m(e,t){return function(r,i){e.then(function(){if(t[l]){r(p(void 0,!0));return}t[d](r,i)},i)}}var v=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((i(o={get stream(){return this[f]},next:function(){var e,t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,r){n.nextTick(function(){t[u]?r(t[u]):e(p(void 0,!0))})});var i=this[h];if(i)e=new Promise(m(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));e=new Promise(this[d])}return this[h]=e,e}},Symbol.asyncIterator,function(){return this}),i(o,"return",function(){var e=this;return new Promise(function(t,r){e[f].destroy(null,function(e){if(e){r(e);return}t(p(void 0,!0))})})}),o),v),w=function(e){var t,r=Object.create(b,(i(t={},f,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var i=r[f].read();i?(r[h]=null,r[s]=null,r[c]=null,e(p(i,!1))):(r[s]=e,r[c]=t)},writable:!0}),t));return r[h]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[c];null!==t&&(r[h]=null,r[s]=null,r[c]=null,t(e)),r[u]=e;return}var i=r[s];null!==i&&(r[h]=null,r[s]=null,r[c]=null,i(p(void 0,!0))),r[l]=!0}),e.on("readable",g.bind(null,r)),r};e.exports=w},379:function(e,t,r){"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var u=r(300).Buffer,l=r(837).inspect,h=l&&l.custom||"inspect";function d(e,t,r){u.prototype.copy.call(e,t,r)}e.exports=function(){function e(){a(this,e),this.head=null,this.tail=null,this.length=0}return c(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),r=this.head,i=0;r;)d(r.data,t,i),i+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,o=e>n.length?n.length:e;if(o===n.length?i+=n:i+=n.slice(0,e),0==(e-=o)){o===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,o),0==(e-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,t}},{key:h,value:function(e,t){return l(this,n({},t,{depth:0,customInspect:!1}))}}]),e}()},25:function(e){"use strict";function t(e,t){var o=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?o._writableState?o._writableState.errorEmitted?n.nextTick(i,o):(o._writableState.errorEmitted=!0,n.nextTick(r,o,e)):n.nextTick(r,o,e):t?(n.nextTick(i,o),t(e)):n.nextTick(i,o)})),this}function r(e,t){a(e,t),i(e)}function i(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}function s(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:t,undestroy:o,errorOrDestroy:s}},698:function(e,t,r){"use strict";var i=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function n(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function o(){}function a(e){return e.setHeader&&"function"==typeof e.abort}function s(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=n(r||o);var c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||d()},h=e._writableState&&e._writableState.finished,d=function(){u=!1,h=!0,c||r.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){c=!1,f=!0,u||r.call(e)},y=function(t){r.call(e,t)},g=function(){var t;return c&&!f?(e._readableState&&e._readableState.ended||(t=new i),r.call(e,t)):u&&!h?(e._writableState&&e._writableState.ended||(t=new i),r.call(e,t)):void 0},m=function(){e.req.on("finish",d)};return a(e)?(e.on("complete",d),e.on("abort",g),e.req?m():e.on("request",m)):u&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",d),!1!==t.error&&e.on("error",y),e.on("close",g),function(){e.removeListener("complete",d),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",d),e.removeListener("end",p),e.removeListener("error",y),e.removeListener("close",g)}}e.exports=s},727:function(e,t,r){"use strict";function i(e,t,r,i,n,o,a){try{var s=e[o](a),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function n(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)})}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(646).q.ERR_INVALID_ARG_TYPE;function u(e,t,r){if(t&&"function"==typeof t.next)i=t;else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new c("iterable",["Iterable"],t);var i,o=new e(a({objectMode:!0},r)),s=!1;function u(){return l.apply(this,arguments)}function l(){return(l=n(function*(){try{var e=yield i.next(),t=e.value;e.done?o.push(null):o.push((yield t))?u():s=!1}catch(e){o.destroy(e)}})).apply(this,arguments)}return o._read=function(){s||(s=!0,u())},o}e.exports=u},442:function(e,t,r){"use strict";function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var n,o=r(646).q,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function c(e){if(e)throw e}function u(e){return e.setHeader&&"function"==typeof e.abort}function l(e,t,o,a){a=i(a);var c=!1;e.on("close",function(){c=!0}),void 0===n&&(n=r(698)),n(e,{readable:t,writable:o},function(e){if(e)return a(e);c=!0,a()});var l=!1;return function(t){if(!c&&!l){if(l=!0,u(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();a(t||new s("pipe"))}}}function h(e){e()}function d(e,t){return e.pipe(t)}function f(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():c}function p(){for(var e,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=f(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new a("streams");var o=r.map(function(t,i){var a=i<r.length-1;return l(t,a,i>0,function(t){e||(e=t),t&&o.forEach(h),a||(o.forEach(h),n(e))})});return r.reduce(d)}e.exports=p},776:function(e,t,r){"use strict";var i=r(646).q.ERR_INVALID_OPT_VALUE;function n(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function o(e,t,r,o){var a=n(t,o,r);if(null!=a){if(!(isFinite(a)&&Math.floor(a)===a)||a<0)throw new i(o?r:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},678:function(e,t,r){e.exports=r(781)},726:function(e,t,r){var i=r(781);"disable"===n.env.READABLE_STREAM&&i?(e.exports=i.Readable,Object.assign(e.exports,i),e.exports.Stream=i):((t=e.exports=r(709)).Stream=i||t,t.Readable=t,t.Writable=r(337),t.Duplex=r(403),t.Transform=r(170),t.PassThrough=r(889),t.finished=r(698),t.pipeline=r(442))},55:function(e,t,r){var i=r(300),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),a.prototype=Object.create(n.prototype),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},813:function(e,t,i){var n=i(450),o=i(254),a=i(911),s=i(523),c=i(310),u=t;u.request=function(e,t){e="string"==typeof e?c.parse(e):a(e);var i=-1===r.g.location.protocol.search(/^https?:$/)?"http:":"",o=e.protocol||i,s=e.hostname||e.host,u=e.port,l=e.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),e.url=(s?o+"//"+s:"")+(u?":"+u:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new n(e);return t&&h.on("response",t),h},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=n,u.IncomingMessage=o.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},301:function(e,t){var i;function n(){if(void 0!==i)return i;if(r.g.XMLHttpRequest){i=new r.g.XMLHttpRequest;try{i.open("GET",r.g.XDomainRequest?"/":"https://example.com")}catch(e){i=null}}else i=null;return i}function o(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function a(e){return"function"==typeof e}t.fetch=a(r.g.fetch)&&a(r.g.ReadableStream),t.writableStream=a(r.g.WritableStream),t.abortController=a(r.g.AbortController),t.arraybuffer=t.fetch||o("arraybuffer"),t.msstream=!t.fetch&&o("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&a(n().overrideMimeType),i=null},450:function(e,t,i){var a=i(301),s=i(782),c=i(254),u=i(726),l=c.IncomingMessage,h=c.readyStates;function d(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":"text"}var f=e.exports=function(e){var t,r=this;u.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+o.from(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)i=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!a.overrideMimeType;else if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw Error("Invalid value for opts.mode");else t=!0;r._mode=d(t,i),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};function p(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}s(f,u.Writable),f.prototype.setHeader=function(e,t){var r=this,i=e.toLowerCase();-1===y.indexOf(i)&&(r._headers[i]={name:e,value:t})},f.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},f.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},f.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,o=null;"GET"!==t.method&&"HEAD"!==t.method&&(o=new Blob(e._body,{type:(i["content-type"]||{}).value||""}));var s=[];if(Object.keys(i).forEach(function(e){var t=i[e].name,r=i[e].value;Array.isArray(r)?r.forEach(function(e){s.push([t,e])}):s.push([t,r])}),"fetch"===e._mode){var c=null;if(a.abortController){var u=new AbortController;c=u.signal,e._fetchAbortController=u,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.g.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}r.g.fetch(e._opts.url,{method:e._opts.method,headers:s,body:o||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:c}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.g.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var l=e._xhr=new r.g.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){n.nextTick(function(){e.emit("error",t)});return}"responseType"in l&&(l.responseType=e._mode),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(l.timeout=t.requestTimeout,l.ontimeout=function(){e.emit("requestTimeout")}),s.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",Error("XHR error"))};try{l.send(o)}catch(t){n.nextTick(function(){e.emit("error",t)});return}}}},f.prototype._onXHRProgress=function(){var e=this;p(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},f.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},f.prototype._write=function(e,t,r){var i=this;i._body.push(e),r()},f.prototype.abort=f.prototype.destroy=function(){var e=this;e._destroyed=!0,r.g.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},f.prototype.end=function(e,t,r){var i=this;"function"==typeof e&&(r=e,e=void 0),u.Writable.prototype.end.call(i,e,t,r)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},254:function(e,t,i){var a=i(301),s=i(782),c=i(726),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(e,t,i,s){var u=this;if(c.Readable.call(u),u._mode=i,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){n.nextTick(function(){u.emit("close")})}),"fetch"===i){if(u._fetchResponse=t,u.url=t.url,u.statusCode=t.status,u.statusMessage=t.statusText,t.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)}),a.writableStream){var l=new WritableStream({write:function(e){return new Promise(function(t,r){u._destroyed?r():u.push(o.from(e))?t():u._resumeFetch=t})},close:function(){r.g.clearTimeout(s),u._destroyed||u.push(null)},abort:function(e){u._destroyed||u.emit("error",e)}});try{t.body.pipeTo(l).catch(function(e){r.g.clearTimeout(s),u._destroyed||u.emit("error",e)});return}catch(e){}}var h=t.body.getReader();function d(){h.read().then(function(e){if(!u._destroyed){if(e.done){r.g.clearTimeout(s),u.push(null);return}u.push(o.from(e.value)),d()}}).catch(function(e){r.g.clearTimeout(s),u._destroyed||u.emit("error",e)})}d()}else if(u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!a.overrideMimeType){var f=u.rawHeaders["mime-type"];if(f){var p=f.match(/;\s*charset=([^;])(;|$)/);p&&(u._charset=p[1].toLowerCase())}u._charset||(u._charset="utf-8")}};s(l,c.Readable),l.prototype._read=function(){var e=this,t=e._resumeFetch;t&&(e._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,i=null;switch(e._mode){case"text":if((i=t.responseText).length>e._pos){var n=i.substr(e._pos);if("x-user-defined"===e._charset){for(var a=o.alloc(n.length),s=0;s<n.length;s++)a[s]=255&n.charCodeAt(s);e.push(a)}else e.push(n,e._charset);e._pos=i.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;i=t.response,e.push(o.from(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=t.response,t.readyState!==u.LOADING||!i)break;e.push(o.from(new Uint8Array(i)));break;case"ms-stream":if(i=t.response,t.readyState!==u.LOADING)break;var c=new r.g.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(o.from(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(i)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}},704:function(e,t,r){"use strict";var i=r(55).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=y,t=4;break;case"utf8":this.fillLast=h,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e,t,r){var i=t.length-1;if(i<r)return 0;var n=c(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}function l(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function h(e){var t=this.lastTotal-this.lastNeed,r=l(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function d(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=f,s.prototype.text=d,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){function t(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=t},911:function(e){e.exports=r;var t=Object.prototype.hasOwnProperty;function r(){for(var e={},r=0;r<arguments.length;r++){var i=arguments[r];for(var n in i)t.call(i,n)&&(e[n]=i[n])}return e}},300:function(e){"use strict";e.exports=r(8287)},361:function(e){"use strict";e.exports=r(5766)},781:function(e){"use strict";e.exports=r(471)},310:function(e){"use strict";e.exports=r(8797)},837:function(e){"use strict";e.exports=r(7056)}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var i=a[e]={exports:{}},n=!0;try{t[e](i,i.exports,s),n=!1}finally{n&&delete a[e]}return i.exports}s.ab=i+"/";var c=s(813);e.exports=c}()},7056:(e,t,r)=>{var i="/",n=r(8287).Buffer,o=r(7836);!function(){var t={992:function(e){e.exports=function(e,r,i){if(e.filter)return e.filter(r,i);if(null==e||"function"!=typeof r)throw TypeError();for(var n=[],o=0;o<e.length;o++)if(t.call(e,o)){var a=e[o];r.call(i,a,o,e)&&n.push(a)}return n};var t=Object.prototype.hasOwnProperty},256:function(e,t,r){"use strict";var i=r(192),n=r(139),o=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n(r):r}},139:function(e,t,r){"use strict";var i=r(212),n=r(192),o=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||i.call(a,o),c=n("%Object.getOwnPropertyDescriptor%",!0),u=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(i,a,arguments);return c&&u&&c(t,"length").configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))}),t};var h=function(){return s(i,o,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},181:function(e){"use strict";e.exports=EvalError},545:function(e){"use strict";e.exports=Error},22:function(e){"use strict";e.exports=RangeError},803:function(e){"use strict";e.exports=ReferenceError},182:function(e){"use strict";e.exports=SyntaxError},202:function(e){"use strict";e.exports=TypeError},284:function(e){"use strict";e.exports=URIError},144:function(e){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,i,n){if("[object Function]"!==r.call(i))throw TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;a<o;a++)i.call(n,e[a],a,e);else for(var s in e)t.call(e,s)&&i.call(n,e[s],s,e)}},136:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,i=Math.max,n="[object Function]",o=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},a=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r},s=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};e.exports=function(e){var c,u=this;if("function"!=typeof u||r.apply(u)!==n)throw TypeError(t+u);for(var l=a(arguments,1),h=function(){if(this instanceof c){var t=u.apply(this,o(l,arguments));return Object(t)===t?t:this}return u.apply(e,o(l,arguments))},d=i(0,u.length-l.length),f=[],p=0;p<d;p++)f[p]="$"+p;if(c=Function("binder","return function ("+s(f,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var y=function(){};y.prototype=u.prototype,c.prototype=new y,y.prototype=null}return c}},212:function(e,t,r){"use strict";var i=r(136);e.exports=Function.prototype.bind||i},192:function(e,t,r){"use strict";var i,n=r(545),o=r(181),a=r(22),s=r(803),c=r(182),u=r(202),l=r(284),h=Function,d=function(e){try{return h('"use strict"; return ('+e+").constructor;")()}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(e){f=null}var p=function(){throw new u},y=f?function(){try{return arguments.callee,p}catch(e){try{return f(arguments,"callee").get}catch(e){return p}}}():p,g=r(115)(),m=r(14)(),v=Object.getPrototypeOf||(m?function(e){return e.__proto__}:null),b={},w="undefined"!=typeof Uint8Array&&v?v(Uint8Array):i,_={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):i,"%Symbol%":g?Symbol:i,"%SyntaxError%":c,"%ThrowTypeError%":y,"%TypedArray%":w,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};if(v)try{null.error}catch(e){var S=v(v(e));_["%Error.prototype%"]=S}var A=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&v&&(r=v(n.prototype))}return _[t]=r,r},E={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=r(212),O=r(270),P=k.call(Function.call,Array.prototype.concat),x=k.call(Function.apply,Array.prototype.splice),C=k.call(Function.call,String.prototype.replace),B=k.call(Function.call,String.prototype.slice),R=k.call(Function.call,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,T=function(e){var t=B(e,0,1),r=B(e,-1);if("%"===t&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var i=[];return C(e,j,function(e,t,r,n){i[i.length]=r?C(n,I,"$1"):t||e}),i},U=function(e,t){var r,i=e;if(O(E,i)&&(i="%"+(r=E[i])[0]+"%"),O(_,i)){var n=_[i];if(n===b&&(n=A(i)),void 0===n&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===R(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=T(e),i=r.length>0?r[0]:"",n=U("%"+i+"%",t),o=n.name,a=n.value,s=!1,l=n.alias;l&&(i=l[0],x(r,P([0,1],l)));for(var h=1,d=!0;h<r.length;h+=1){var p=r[h],y=B(p,0,1),g=B(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&d||(s=!0),i+="."+p,O(_,o="%"+i+"%"))a=_[o];else if(null!=a){if(!(p in a)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(f&&h+1>=r.length){var m=f(a,p);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[p]}else d=O(a,p),a=a[p];d&&!s&&(_[o]=a)}}return a}},14:function(e){"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return({__proto__:t}).foo===t.foo&&!(t instanceof r)}},942:function(e,t,r){"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(773);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},773:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;var i=42;for(t in e[t]=i,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||!0!==o.enumerable)return!1}return!0}},115:function(e,t,r){"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(832);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},832:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;var i=42;for(t in e[t]=i,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||!0!==o.enumerable)return!1}return!0}},270:function(e,t,r){"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,o=r(212);e.exports=o.call(i,n)},782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},157:function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=Object.prototype.toString,i=function(e){return(!t||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===r.call(e)},n=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r.call(e)&&"[object Function]"===r.call(e.callee)},o=function(){return i(arguments)}();i.isLegacyArguments=n,e.exports=o?i:n},391:function(e){"use strict";var t=Object.prototype.toString,r=Function.prototype.toString,i=/^\s*(?:function)?\*/,n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.getPrototypeOf,a=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch(e){}}(),s=a?o(a):{};e.exports=function(e){return"function"==typeof e&&(!!i.test(r.call(e))||(n?o(e)===s:"[object GeneratorFunction]"===t.call(e)))}},994:function(e,t,i){"use strict";var n=i(144),o=i(349),a=i(256),s=a("Object.prototype.toString"),c=i(942)()&&"symbol"==typeof Symbol.toStringTag,u=o(),l=a("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return -1},h=a("String.prototype.slice"),d={},f=i(24),p=Object.getPrototypeOf;c&&f&&p&&n(u,function(e){var t=new r.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var i=p(t),n=f(i,Symbol.toStringTag);n||(n=f(p(i),Symbol.toStringTag)),d[e]=n.get});var y=function(e){var t=!1;return n(d,function(r,i){if(!t)try{t=r.call(e)===i}catch(e){}}),t};e.exports=function(e){return!!e&&"object"==typeof e&&(c?!!f&&y(e):l(u,h(s(e),8,-1))>-1)}},369:function(e){e.exports=function(e){return e instanceof n}},584:function(e,t,r){"use strict";var i=r(157),n=r(391),o=r(490),a=r(994);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=s(Object.prototype.toString),h=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(c)var p=s(BigInt.prototype.valueOf);if(u)var y=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function m(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch}function v(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||L(e)}function b(e){return"Uint8Array"===o(e)}function w(e){return"Uint8ClampedArray"===o(e)}function _(e){return"Uint16Array"===o(e)}function S(e){return"Uint32Array"===o(e)}function A(e){return"Int8Array"===o(e)}function E(e){return"Int16Array"===o(e)}function k(e){return"Int32Array"===o(e)}function O(e){return"Float32Array"===o(e)}function P(e){return"Float64Array"===o(e)}function x(e){return"BigInt64Array"===o(e)}function C(e){return"BigUint64Array"===o(e)}function B(e){return"[object Map]"===l(e)}function R(e){return"undefined"!=typeof Map&&(B.working?B(e):e instanceof Map)}function j(e){return"[object Set]"===l(e)}function I(e){return"undefined"!=typeof Set&&(j.working?j(e):e instanceof Set)}function T(e){return"[object WeakMap]"===l(e)}function U(e){return"undefined"!=typeof WeakMap&&(T.working?T(e):e instanceof WeakMap)}function M(e){return"[object WeakSet]"===l(e)}function N(e){return M(e)}function K(e){return"[object ArrayBuffer]"===l(e)}function H(e){return"undefined"!=typeof ArrayBuffer&&(K.working?K(e):e instanceof ArrayBuffer)}function D(e){return"[object DataView]"===l(e)}function L(e){return"undefined"!=typeof DataView&&(D.working?D(e):e instanceof DataView)}t.isArgumentsObject=i,t.isGeneratorFunction=n,t.isTypedArray=a,t.isPromise=m,t.isArrayBufferView=v,t.isUint8Array=b,t.isUint8ClampedArray=w,t.isUint16Array=_,t.isUint32Array=S,t.isInt8Array=A,t.isInt16Array=E,t.isInt32Array=k,t.isFloat32Array=O,t.isFloat64Array=P,t.isBigInt64Array=x,t.isBigUint64Array=C,B.working="undefined"!=typeof Map&&B(new Map),t.isMap=R,j.working="undefined"!=typeof Set&&j(new Set),t.isSet=I,T.working="undefined"!=typeof WeakMap&&T(new WeakMap),t.isWeakMap=U,M.working="undefined"!=typeof WeakSet&&M(new WeakSet),t.isWeakSet=N,K.working="undefined"!=typeof ArrayBuffer&&K(new ArrayBuffer),t.isArrayBuffer=H,D.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&D(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=L;var z="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function $(e){return"[object SharedArrayBuffer]"===l(e)}function W(e){return void 0!==z&&(void 0===$.working&&($.working=$(new z)),$.working?$(e):e instanceof z)}function F(e){return"[object AsyncFunction]"===l(e)}function V(e){return"[object Map Iterator]"===l(e)}function J(e){return"[object Set Iterator]"===l(e)}function G(e){return"[object Generator]"===l(e)}function q(e){return"[object WebAssembly.Module]"===l(e)}function Y(e){return g(e,h)}function X(e){return g(e,d)}function Z(e){return g(e,f)}function Q(e){return c&&g(e,p)}function ee(e){return u&&g(e,y)}function et(e){return Y(e)||X(e)||Z(e)||Q(e)||ee(e)}function er(e){return"undefined"!=typeof Uint8Array&&(H(e)||W(e))}t.isSharedArrayBuffer=W,t.isAsyncFunction=F,t.isMapIterator=V,t.isSetIterator=J,t.isGeneratorObject=G,t.isWebAssemblyCompiledModule=q,t.isNumberObject=Y,t.isStringObject=X,t.isBooleanObject=Z,t.isBigIntObject=Q,t.isSymbolObject=ee,t.isBoxedPrimitive=et,t.isAnyArrayBuffer=er,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},177:function(e,t,r){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},n=/%[sdj%]/g;t.format=function(e){if(!E(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,o=i.length,a=String(e).replace(n,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),s=i[r];r<o;s=i[++r])_(s)||!x(s)?a+=" "+s:a+=" "+u(s);return a},t.deprecate=function(e,r){if(void 0!==o&&!0===o.noDeprecation)return e;if(void 0===o)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(o.throwDeprecation)throw Error(r);o.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var a={},s=/^$/;if(o.env.NODE_DEBUG){var c=o.env.NODE_DEBUG;s=RegExp("^"+(c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function u(e,r){var i={seen:[],stylize:h};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),w(r)?i.showHidden=r:r&&t._extend(i,r),O(i.showHidden)&&(i.showHidden=!1),O(i.depth)&&(i.depth=2),O(i.colors)&&(i.colors=!1),O(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),f(i,e,i.depth)}function l(e,t){var r=u.styles[t];return r?"\x1b["+u.colors[r][0]+"m"+e+"\x1b["+u.colors[r][1]+"m":e}function h(e,t){return e}function d(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function f(e,r,i){if(e.customInspect&&r&&R(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var n,o=r.inspect(i,e);return E(o)||(o=f(e,o,i)),o}var a=p(e,r);if(a)return a;var s=Object.keys(r),c=d(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),B(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return y(r);if(0===s.length){if(R(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(P(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(C(r))return e.stylize(Date.prototype.toString.call(r),"date");if(B(r))return y(r)}var l="",h=!1,w=["{","}"];return(b(r)&&(h=!0,w=["[","]"]),R(r)&&(l=" [Function"+(r.name?": "+r.name:"")+"]"),P(r)&&(l=" "+RegExp.prototype.toString.call(r)),C(r)&&(l=" "+Date.prototype.toUTCString.call(r)),B(r)&&(l=" "+y(r)),0!==s.length||h&&0!=r.length)?i<0?P(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),n=h?g(e,r,i,c,s):s.map(function(t){return m(e,r,i,c,t,h)}),e.seen.pop(),v(n,l,w)):w[0]+l+w[1]}function p(e,t){if(O(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return A(t)?e.stylize(""+t,"number"):w(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function y(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,i,n){for(var o=[],a=0,s=t.length;a<s;++a)N(t,String(a))?o.push(m(e,t,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(m(e,t,r,i,n,!0))}),o}function m(e,t,r,i,n,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),N(i,n)||(a="["+n+"]"),!s&&(0>e.seen.indexOf(c.value)?(s=_(r)?f(e,c.value,null):f(e,c.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),O(a)){if(o&&n.match(/^\d+$/))return s;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function v(e,t,r){var i=0;return e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function b(e){return Array.isArray(e)}function w(e){return"boolean"==typeof e}function _(e){return null===e}function S(e){return null==e}function A(e){return"number"==typeof e}function E(e){return"string"==typeof e}function k(e){return"symbol"==typeof e}function O(e){return void 0===e}function P(e){return x(e)&&"[object RegExp]"===I(e)}function x(e){return"object"==typeof e&&null!==e}function C(e){return x(e)&&"[object Date]"===I(e)}function B(e){return x(e)&&("[object Error]"===I(e)||e instanceof Error)}function R(e){return"function"==typeof e}function j(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!a[e=e.toUpperCase()]){if(s.test(e)){var r=o.pid;a[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,i)}}else a[e]=function(){}}return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(584),t.isArray=b,t.isBoolean=w,t.isNull=_,t.isNullOrUndefined=S,t.isNumber=A,t.isString=E,t.isSymbol=k,t.isUndefined=O,t.isRegExp=P,t.types.isRegExp=P,t.isObject=x,t.isDate=C,t.types.isDate=C,t.isError=B,t.types.isNativeError=B,t.isFunction=R,t.isPrimitive=j,t.isBuffer=r(369);var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),U[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",M(),t.format.apply(t,arguments))},t.inherits=r(782),t._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var K="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function H(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function D(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw TypeError("The last argument must be of type Function");var n=this,a=function(){return i.apply(n,arguments)};e.apply(this,t).then(function(e){o.nextTick(a.bind(null,null,e))},function(e){o.nextTick(H.bind(null,e,a))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(K&&e[K]){var t=e[K];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,K,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise(function(e,i){t=e,r=i}),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push(function(e,i){e?r(e):t(i)});try{e.apply(this,n)}catch(e){r(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),K&&Object.defineProperty(t,K,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=K,t.callbackify=D},490:function(e,t,i){"use strict";var n=i(144),o=i(349),a=i(256),s=a("Object.prototype.toString"),c=i(942)()&&"symbol"==typeof Symbol.toStringTag,u=o(),l=a("String.prototype.slice"),h={},d=i(24),f=Object.getPrototypeOf;c&&d&&f&&n(u,function(e){if("function"==typeof r.g[e]){var t=new r.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var i=f(t),n=d(i,Symbol.toStringTag);n||(n=d(f(i),Symbol.toStringTag)),h[e]=n.get}});var p=function(e){var t=!1;return n(h,function(r,i){if(!t)try{var n=r.call(e);n===i&&(t=n)}catch(e){}}),t},y=i(994);e.exports=function(e){return!!y(e)&&(c?p(e):l(s(e),8,-1))}},349:function(e,t,i){"use strict";var n=i(992);e.exports=function(){return n(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(e){return"function"==typeof r.g[e]})}},24:function(e,t,r){"use strict";var i=r(192)("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(e){i=null}e.exports=i}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var i=a[e]={exports:{}},n=!0;try{t[e](i,i.exports,s),n=!1}finally{n&&delete a[e]}return i.exports}s.ab=i+"/";var c=s(177);e.exports=c}()},6364:module=>{var __dirname="/";!function(){var __webpack_modules__={950:function(__unused_webpack_module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,i=r.eval,n=r.execScript;!i&&n&&(n.call(r,"null"),i=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),a=i.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}};"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var __nested_webpack_exports__={};__webpack_modules__[950](0,__nested_webpack_exports__),module.exports=__nested_webpack_exports__}()},3368:(e,t,r)=>{e.exports=r(6085)},6715:(e,t,r)=>{e.exports=r(8440)},5127:function(e){!function(t,r){e.exports=r()}(0,function(){var e=[],t=[],r={},i={},n={};function o(e){return"string"==typeof e?RegExp("^"+e+"$","i"):e}function a(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t){return e.replace(/\$(\d{1,2})/g,function(e,r){return t[r]||""})}function c(e,t){return e.replace(t[0],function(r,i){var n=s(t[1],arguments);return""===r?a(e[i-1],n):a(r,n)})}function u(e,t,i){if(!e.length||r.hasOwnProperty(e))return t;for(var n=i.length;n--;){var o=i[n];if(o[0].test(t))return c(t,o)}return t}function l(e,t,r){return function(i){var n=i.toLowerCase();return t.hasOwnProperty(n)?a(i,n):e.hasOwnProperty(n)?a(i,e[n]):u(n,i,r)}}function h(e,t,r,i){return function(i){var n=i.toLowerCase();return!!t.hasOwnProperty(n)||!e.hasOwnProperty(n)&&u(n,n,r)===n}}function d(e,t,r){var i=1===t?d.singular(e):d.plural(e);return(r?t+" ":"")+i}return d.plural=l(n,i,e),d.isPlural=h(n,i,e),d.singular=l(i,n,t),d.isSingular=h(i,n,t),d.addPluralRule=function(t,r){e.push([o(t),r])},d.addSingularRule=function(e,r){t.push([o(e),r])},d.addUncountableRule=function(e){if("string"==typeof e){r[e.toLowerCase()]=!0;return}d.addPluralRule(e,"$0"),d.addSingularRule(e,"$0")},d.addIrregularRule=function(e,t){t=t.toLowerCase(),n[e=e.toLowerCase()]=t,i[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(e){return d.addIrregularRule(e[0],e[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(e){return d.addPluralRule(e[0],e[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(e){return d.addSingularRule(e[0],e[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(d.addUncountableRule),d})},152:(e,t,r)=>{"use strict";var i,n=r(8287).Buffer;let o="[object ArrayBuffer]";class a{static isArrayBuffer(e){return Object.prototype.toString.call(e)===o}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){let r=a.toUint8Array(e),i=a.toUint8Array(t);if(r.length!==i.byteLength)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(let e of t)r+=e.byteLength;let i=new Uint8Array(r),n=0;for(let e of t){let t=this.toUint8Array(e);i.set(t,n),n+=t.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}let s="string",c=/^[0-9a-f]+$/i,u=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,l=/^[a-zA-Z0-9-_]+$/;class h{static fromString(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){let t=a.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return decodeURIComponent(escape(r))}}class d{static toString(e,t=!1){let r=a.toArrayBuffer(e),i=new DataView(r),n="";for(let e=0;e<r.byteLength;e+=2)n+=String.fromCharCode(i.getUint16(e,t));return n}static fromString(e,t=!1){let r=new ArrayBuffer(2*e.length),i=new DataView(r);for(let r=0;r<e.length;r++)i.setUint16(2*r,e.charCodeAt(r),t);return r}}class f{static isHex(e){return typeof e===s&&c.test(e)}static isBase64(e){return typeof e===s&&u.test(e)}static isBase64Url(e){return typeof e===s&&l.test(e)}static ToString(e,t="utf8"){let r=a.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return d.toString(r,!0);case"utf16":case"utf16be":return d.toString(r);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return d.fromString(e,!0);case"utf16":case"utf16be":return d.fromString(e);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let t=a.toUint8Array(e);return"undefined"!=typeof btoa?btoa(this.ToString(t,"binary")):n.from(t).toString("base64")}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!f.isBase64(t))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(n.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!f.isBase64Url(t))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=f.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return h.fromString(e);case"utf16":case"utf16be":return d.fromString(e);case"utf16le":case"usc2":return d.fromString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=f.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return h.toString(e);case"utf16":case"utf16be":return d.toString(e);case"utf16le":case"usc2":return d.toString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r.buffer}static ToBinary(e){let t=a.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r}static ToHex(e){let t=a.toUint8Array(e),r="",i=t.length;for(let e=0;e<i;e++){let i=t[e];i<16&&(r+="0"),r+=i.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!f.isHex(t))throw TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let i=t.slice(e,e+2);r[e/2]=parseInt(i,16)}return r.buffer}static ToUtf16String(e,t=!1){return d.toString(e,t)}static FromUtf16String(e,t=!1){return d.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}function p(e,...t){let r=arguments[0];for(let e=1;e<arguments.length;e++){let t=arguments[e];for(let e in t)r[e]=t[e]}return r}function y(...e){let t=new Uint8Array(e.map(e=>e.byteLength).reduce((e,t)=>e+t)),r=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(let i of e)t[r++]=i}),t.buffer}function g(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==i[t])return!1;return!0}f.DEFAULT_UTF8_ENCODING="utf8",t._H=a,t.U$=f,i=p,t.kg=y,i=g},3141:(e,t,r)=>{"use strict";var i=r(5003).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=y,t=4;break;case"utf8":this.fillLast=h,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e,t,r){var i=t.length-1;if(i<r)return 0;var n=c(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=c(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}function l(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function h(e){var t=this.lastTotal-this.lastNeed,r=l(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function d(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=f,s.prototype.text=d,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},5003:(e,t,r)=>{var i=r(8287),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},3679:(e,t,r)=>{"use strict";let i,n,o;r.r(t),r.d(t,{CompactEncrypt:()=>tj,CompactSign:()=>tU,EmbeddedJWK:()=>tF,EncryptJWT:()=>tL,FlattenedEncrypt:()=>tl,FlattenedSign:()=>tT,GeneralEncrypt:()=>td,GeneralSign:()=>tN,SignJWT:()=>tD,UnsecuredJWT:()=>t6,base64url:()=>s,calculateJwkThumbprint:()=>t$,calculateJwkThumbprintUri:()=>tW,compactDecrypt:()=>tr,compactVerify:()=>tm,createLocalJWKSet:()=>tZ,createRemoteJWKSet:()=>t3,cryptoRuntime:()=>ro,decodeJwt:()=>t9,decodeProtectedHeader:()=>t7,errors:()=>a,experimental_jwksCache:()=>t1,exportJWK:()=>ts,exportPKCS8:()=>ta,exportSPKI:()=>to,flattenedDecrypt:()=>tt,flattenedVerify:()=>tg,generalDecrypt:()=>ti,generalVerify:()=>tv,generateKeyPair:()=>ri,generateSecret:()=>rn,importJWK:()=>eZ,importPKCS8:()=>eX,importSPKI:()=>eq,importX509:()=>eY,jwtDecrypt:()=>tR,jwtVerify:()=>tB});var a={};r.r(a),r.d(a,{JOSEAlgNotAllowed:()=>x,JOSEError:()=>k,JOSENotSupported:()=>C,JWEDecryptionFailed:()=>B,JWEInvalid:()=>R,JWKInvalid:()=>T,JWKSInvalid:()=>U,JWKSMultipleMatchingKeys:()=>N,JWKSNoMatchingKey:()=>M,JWKSTimeout:()=>K,JWSInvalid:()=>j,JWSSignatureVerificationFailed:()=>H,JWTClaimValidationFailed:()=>O,JWTExpired:()=>P,JWTInvalid:()=>I});var s={};r.r(s),r.d(s,{decode:()=>t4,encode:()=>t5});let c=crypto,u=e=>e instanceof CryptoKey,l=async(e,t)=>{let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await c.subtle.digest(r,t))},h=new TextEncoder,d=new TextDecoder,f=0x100000000;function p(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}function y(e,t){return p(h.encode(e),new Uint8Array([0]),t)}function g(e,t,r){if(t<0||t>=f)throw RangeError(`value must be >= 0 and <= ${f-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function m(e){let t=Math.floor(e/f),r=e%f,i=new Uint8Array(8);return g(i,t,0),g(i,r,4),i}function v(e){let t=new Uint8Array(4);return g(t,e),t}function b(e){return p(v(e.length),e)}async function w(e,t,r){let i=Math.ceil((t>>3)/32),n=new Uint8Array(32*i);for(let t=0;t<i;t++){let i=new Uint8Array(4+e.length+r.length);i.set(v(t+1)),i.set(e,4),i.set(r,4+e.length),n.set(await l("sha256",i),32*t)}return n.slice(0,t>>3)}let _=e=>{let t=e;"string"==typeof t&&(t=h.encode(t));let r=32768,i=[];for(let e=0;e<t.length;e+=r)i.push(String.fromCharCode.apply(null,t.subarray(e,e+r)));return btoa(i.join(""))},S=e=>_(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),A=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},E=e=>{let t=e;t instanceof Uint8Array&&(t=d.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return A(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}};class k extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class O extends k{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t,r="unspecified",i="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=i,this.payload=t}}class P extends k{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t,r="unspecified",i="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=i,this.payload=t}}class x extends k{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class C extends k{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class B extends k{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class R extends k{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class j extends k{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class I extends k{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class T extends k{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class U extends k{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class M extends k{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class N extends k{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator;class K extends k{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class H extends k{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}let D=c.getRandomValues.bind(c);function L(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new C(`Unsupported JWE Algorithm: ${e}`)}}let z=e=>D(new Uint8Array(L(e)>>3)),$=(e,t)=>{if(t.length<<3!==L(e))throw new R("Invalid Initialization Vector length")},W=(e,t)=>{let r=e.byteLength<<3;if(r!==t)throw new R(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},F=(e,t)=>{if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");if(e.length!==t.length)throw TypeError("Input buffers must have the same length");let r=e.length,i=0,n=-1;for(;++n<r;)i|=e[n]^t[n];return 0===i};function V(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function J(e,t){return e.name===t}function G(e){return parseInt(e.name.slice(4),10)}function q(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function Y(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}function X(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!J(e.algorithm,"HMAC"))throw V("HMAC");let r=parseInt(t.slice(2),10);if(G(e.algorithm.hash)!==r)throw V(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!J(e.algorithm,"RSASSA-PKCS1-v1_5"))throw V("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(G(e.algorithm.hash)!==r)throw V(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!J(e.algorithm,"RSA-PSS"))throw V("RSA-PSS");let r=parseInt(t.slice(2),10);if(G(e.algorithm.hash)!==r)throw V(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw V("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!J(e.algorithm,"ECDSA"))throw V("ECDSA");let r=q(t);if(e.algorithm.namedCurve!==r)throw V(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}Y(e,r)}function Z(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!J(e.algorithm,"AES-GCM"))throw V("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw V(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!J(e.algorithm,"AES-KW"))throw V("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw V(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw V("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!J(e.algorithm,"PBKDF2"))throw V("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!J(e.algorithm,"RSA-OAEP"))throw V("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(G(e.algorithm.hash)!==r)throw V(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}Y(e,r)}function Q(e,t,...r){if(r.length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let ee=(e,...t)=>Q("Key must be ",e,...t);function et(e,t,...r){return Q(`Key for the ${e} algorithm must be `,t,...r)}let er=e=>!!u(e)||e?.[Symbol.toStringTag]==="KeyObject",ei=["CryptoKey"];async function en(e,t,r,i,n,o){let a,s;if(!(t instanceof Uint8Array))throw TypeError(ee(t,"Uint8Array"));let u=parseInt(e.slice(1,4),10),l=await c.subtle.importKey("raw",t.subarray(u>>3),"AES-CBC",!1,["decrypt"]),h=await c.subtle.importKey("raw",t.subarray(0,u>>3),{hash:`SHA-${u<<1}`,name:"HMAC"},!1,["sign"]),d=p(o,i,r,m(o.length<<3)),f=new Uint8Array((await c.subtle.sign("HMAC",h,d)).slice(0,u>>3));try{a=F(n,f)}catch{}if(!a)throw new B;try{s=new Uint8Array(await c.subtle.decrypt({iv:i,name:"AES-CBC"},l,r))}catch{}if(!s)throw new B;return s}async function eo(e,t,r,i,n,o){let a;t instanceof Uint8Array?a=await c.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Z(t,e,"decrypt"),a=t);try{return new Uint8Array(await c.subtle.decrypt({additionalData:o,iv:i,name:"AES-GCM",tagLength:128},a,p(r,n)))}catch{throw new B}}let ea=async(e,t,r,i,n,o)=>{if(!u(t)&&!(t instanceof Uint8Array))throw TypeError(ee(t,...ei,"Uint8Array"));if(!i)throw new R("JWE Initialization Vector missing");if(!n)throw new R("JWE Authentication Tag missing");switch($(e,i),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&W(t,parseInt(e.slice(-3),10)),en(e,t,r,i,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&W(t,parseInt(e.slice(1,4),10)),eo(e,t,r,i,n,o);default:throw new C("Unsupported JWE Content Encryption Algorithm")}},es=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0};function ec(e){return"object"==typeof e&&null!==e}function eu(e){if(!ec(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let el=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function eh(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function ed(e,t,r){if(u(e))return Z(e,t,r),e;if(e instanceof Uint8Array)return c.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw TypeError(ee(e,...ei,"Uint8Array"))}let ef=async(e,t,r)=>{let i=await ed(t,e,"wrapKey");eh(i,e);let n=await c.subtle.importKey("raw",r,...el);return new Uint8Array(await c.subtle.wrapKey("raw",n,i,"AES-KW"))},ep=async(e,t,r)=>{let i=await ed(t,e,"unwrapKey");eh(i,e);let n=await c.subtle.unwrapKey("raw",r,i,"AES-KW",...el);return new Uint8Array(await c.subtle.exportKey("raw",n))};async function ey(e,t,r,i,n=new Uint8Array(0),o=new Uint8Array(0)){let a;if(!u(e))throw TypeError(ee(e,...ei));if(Z(e,"ECDH"),!u(t))throw TypeError(ee(t,...ei));Z(t,"ECDH","deriveBits");let s=p(b(h.encode(r)),b(n),b(o),v(i));return a="X25519"===e.algorithm.name?256:"X448"===e.algorithm.name?448:Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3,w(new Uint8Array(await c.subtle.deriveBits({name:e.algorithm.name,public:e},t,a)),i,s)}async function eg(e){if(!u(e))throw TypeError(ee(e,...ei));return c.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function em(e){if(!u(e))throw TypeError(ee(e,...ei));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||"X25519"===e.algorithm.name||"X448"===e.algorithm.name}function ev(e){if(!(e instanceof Uint8Array)||e.length<8)throw new R("PBES2 Salt Input must be 8 or more octets")}function eb(e,t){if(e instanceof Uint8Array)return c.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(u(e))return Z(e,t,"deriveBits","deriveKey"),e;throw TypeError(ee(e,...ei,"Uint8Array"))}async function ew(e,t,r,i){ev(e);let n=y(t,e),o=parseInt(t.slice(13,16),10),a={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:n},s={length:o,name:"AES-KW"},u=await eb(i,t);if(u.usages.includes("deriveBits"))return new Uint8Array(await c.subtle.deriveBits(a,u,o));if(u.usages.includes("deriveKey"))return c.subtle.deriveKey(a,u,s,!1,["wrapKey","unwrapKey"]);throw TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}let e_=async(e,t,r,i=2048,n=D(new Uint8Array(16)))=>{let o=await ew(n,e,i,t);return{encryptedKey:await ef(e.slice(-6),o,r),p2c:i,p2s:S(n)}},eS=async(e,t,r,i,n)=>{let o=await ew(n,e,i,t);return ep(e.slice(-6),o,r)};function eA(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new C(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}let eE=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},ek=async(e,t,r)=>{if(!u(t))throw TypeError(ee(t,...ei));if(Z(t,e,"encrypt","wrapKey"),eE(e,t),t.usages.includes("encrypt"))return new Uint8Array(await c.subtle.encrypt(eA(e),t,r));if(t.usages.includes("wrapKey")){let i=await c.subtle.importKey("raw",r,...el);return new Uint8Array(await c.subtle.wrapKey("raw",i,t,eA(e)))}throw TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},eO=async(e,t,r)=>{if(!u(t))throw TypeError(ee(t,...ei));if(Z(t,e,"decrypt","unwrapKey"),eE(e,t),t.usages.includes("decrypt"))return new Uint8Array(await c.subtle.decrypt(eA(e),t,r));if(t.usages.includes("unwrapKey")){let i=await c.subtle.unwrapKey("raw",r,t,eA(e),...el);return new Uint8Array(await c.subtle.exportKey("raw",i))}throw TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function eP(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new C('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}let ex=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=eP(e),i=[t,e.ext??!1,e.key_ops??r],n={...e};return delete n.alg,delete n.use,c.subtle.importKey("jwk",n,...i)},eC=e=>E(e),eB=e=>e?.[Symbol.toStringTag]==="KeyObject",eR=async(e,t,r,i)=>{let n=e.get(t);if(n?.[i])return n[i];let o=await ex({...r,alg:i});return n?n[i]=o:e.set(t,{[i]:o}),o},ej={normalizePublicKey:(e,t)=>{if(eB(e)){let r=e.export({format:"jwk"});return(delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k)?eC(r.k):(n||(n=new WeakMap),eR(n,e,r,t))}return e},normalizePrivateKey:(e,t)=>{if(eB(e)){let r=e.export({format:"jwk"});return r.k?eC(r.k):(i||(i=new WeakMap),eR(i,e,r,t))}return e}};function eI(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new C(`Unsupported JWE Algorithm: ${e}`)}}let eT=e=>D(new Uint8Array(eI(e)>>3)),eU=(e,t)=>{let r=(e.match(/.{1,64}/g)||[]).join("\n");return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},eM=async(e,t,r)=>{if(!u(r))throw TypeError(ee(r,...ei));if(!r.extractable)throw TypeError("CryptoKey is not extractable");if(r.type!==e)throw TypeError(`key is not a ${e} key`);return eU(_(new Uint8Array(await c.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},eN=e=>eM("public","spki",e),eK=e=>eM("private","pkcs8",e),eH=(e,t,r=0)=>{0===r&&(t.unshift(t.length),t.unshift(6));let i=e.indexOf(t[0],r);if(-1===i)return!1;let n=e.subarray(i,i+t.length);return n.length===t.length&&(n.every((e,r)=>e===t[r])||eH(e,t,i+1))},eD=e=>{switch(!0){case eH(e,[42,134,72,206,61,3,1,7]):return"P-256";case eH(e,[43,129,4,0,34]):return"P-384";case eH(e,[43,129,4,0,35]):return"P-521";case eH(e,[43,101,110]):return"X25519";case eH(e,[43,101,111]):return"X448";case eH(e,[43,101,112]):return"Ed25519";case eH(e,[43,101,113]):return"Ed448";default:throw new C("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},eL=async(e,t,r,i,n)=>{let o,a;let s=new Uint8Array(atob(r.replace(e,"")).split("").map(e=>e.charCodeAt(0))),u="spki"===t;switch(i){case"PS256":case"PS384":case"PS512":o={name:"RSA-PSS",hash:`SHA-${i.slice(-3)}`},a=u?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":o={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${i.slice(-3)}`},a=u?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o={name:"RSA-OAEP",hash:`SHA-${parseInt(i.slice(-3),10)||1}`},a=u?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":o={name:"ECDSA",namedCurve:"P-256"},a=u?["verify"]:["sign"];break;case"ES384":o={name:"ECDSA",namedCurve:"P-384"},a=u?["verify"]:["sign"];break;case"ES512":o={name:"ECDSA",namedCurve:"P-521"},a=u?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e=eD(s);o=e.startsWith("P-")?{name:"ECDH",namedCurve:e}:{name:e},a=u?[]:["deriveBits"];break}case"EdDSA":o={name:eD(s)},a=u?["verify"]:["sign"];break;default:throw new C('Invalid or unsupported "alg" (Algorithm) value')}return c.subtle.importKey(t,s,o,n?.extractable??!1,a)},ez=(e,t,r)=>eL(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),e$=(e,t,r)=>eL(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function eW(e){let t=[],r=0;for(;r<e.length;){let i=eF(e.subarray(r));t.push(i),r+=i.byteLength}return t}function eF(e){let t=0,r=31&e[0];if(t++,31===r){for(r=0;e[t]>=128;)r=128*r+e[t]-128,t++;r=128*r+e[t]-128,t++}let i=0;if(e[t]<128)i=e[t],t++;else if(128===i){for(i=0;0!==e[t+i]||0!==e[t+i+1];){if(i>e.byteLength)throw TypeError("invalid indefinite form length");i++}let r=t+i+2;return{byteLength:r,contents:e.subarray(t,t+i),raw:e.subarray(0,r)}}else{let r=127&e[t];t++,i=0;for(let n=0;n<r;n++)i=256*i+e[t],t++}let n=t+i;return{byteLength:n,contents:e.subarray(t,n),raw:e.subarray(0,n)}}function eV(e){let t=eW(eW(eF(e).contents)[0].contents);return _(t[160===t[0].raw[0]?6:5].raw)}function eJ(e){return eU(eV(A(e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""))),"PUBLIC KEY")}let eG=(e,t,r)=>{let i;try{i=eJ(e)}catch(e){throw TypeError("Failed to parse the X.509 certificate",{cause:e})}return e$(i,t,r)};async function eq(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return e$(e,t,r)}async function eY(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return eG(e,t,r)}async function eX(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return ez(e,t,r)}async function eZ(e,t){if(!eu(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return E(e.k);case"RSA":if(void 0!==e.oth)throw new C('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return ex({...e,alg:t});default:throw new C('Unsupported "kty" (Key Type) Parameter value')}}let eQ=e=>e?.[Symbol.toStringTag],e0=(e,t)=>{if(!(t instanceof Uint8Array)){if(!er(t))throw TypeError(et(e,t,...ei,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${eQ(t)} instances for symmetric algorithms must be of type "secret"`)}},e1=(e,t,r)=>{if(!er(t))throw TypeError(et(e,t,...ei));if("secret"===t.type)throw TypeError(`${eQ(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${eQ(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${eQ(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${eQ(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${eQ(t)} instances for asymmetric algorithm encryption must be of type "public"`)},e2=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?e0(e,t):e1(e,t,r)};async function e8(e,t,r,i,n){if(!(r instanceof Uint8Array))throw TypeError(ee(r,"Uint8Array"));let o=parseInt(e.slice(1,4),10),a=await c.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["encrypt"]),s=await c.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),u=new Uint8Array(await c.subtle.encrypt({iv:i,name:"AES-CBC"},a,t)),l=p(n,i,u,m(n.length<<3));return{ciphertext:u,tag:new Uint8Array((await c.subtle.sign("HMAC",s,l)).slice(0,o>>3)),iv:i}}async function e3(e,t,r,i,n){let o;r instanceof Uint8Array?o=await c.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Z(r,e,"encrypt"),o=r);let a=new Uint8Array(await c.subtle.encrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},o,t)),s=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:s,iv:i}}let e6=async(e,t,r,i,n)=>{if(!u(r)&&!(r instanceof Uint8Array))throw TypeError(ee(r,...ei,"Uint8Array"));switch(i?$(e,i):i=z(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&W(r,parseInt(e.slice(-3),10)),e8(e,t,r,i,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&W(r,parseInt(e.slice(1,4),10)),e3(e,t,r,i,n);default:throw new C("Unsupported JWE Content Encryption Algorithm")}};async function e5(e,t,r,i){let n=e.slice(0,7),o=await e6(n,r,t,i,new Uint8Array(0));return{encryptedKey:o.ciphertext,iv:S(o.iv),tag:S(o.tag)}}async function e4(e,t,r,i,n){return ea(e.slice(0,7),t,r,i,n,new Uint8Array(0))}let e7=async function(e,t,r,i,n){switch(e2(e,t,"decrypt"),t=await ej.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new R("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new R("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let n,o;if(!eu(i.epk))throw new R('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!em(t))throw new C("ECDH with the provided key is not allowed or not supported by your javascript runtime");let a=await eZ(i.epk,e);if(void 0!==i.apu){if("string"!=typeof i.apu)throw new R('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{n=E(i.apu)}catch{throw new R("Failed to base64url decode the apu")}}if(void 0!==i.apv){if("string"!=typeof i.apv)throw new R('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=E(i.apv)}catch{throw new R("Failed to base64url decode the apv")}}let s=await ey(a,t,"ECDH-ES"===e?i.enc:e,"ECDH-ES"===e?eI(i.enc):parseInt(e.slice(-5,-2),10),n,o);if("ECDH-ES"===e)return s;if(void 0===r)throw new R("JWE Encrypted Key missing");return ep(e.slice(-6),s,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new R("JWE Encrypted Key missing");return eO(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let o;if(void 0===r)throw new R("JWE Encrypted Key missing");if("number"!=typeof i.p2c)throw new R('JOSE Header "p2c" (PBES2 Count) missing or invalid');let a=n?.maxPBES2Count||1e4;if(i.p2c>a)throw new R('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof i.p2s)throw new R('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{o=E(i.p2s)}catch{throw new R("Failed to base64url decode the p2s")}return eS(e,t,r,i.p2c,o)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new R("JWE Encrypted Key missing");return ep(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,o;if(void 0===r)throw new R("JWE Encrypted Key missing");if("string"!=typeof i.iv)throw new R('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof i.tag)throw new R('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=E(i.iv)}catch{throw new R("Failed to base64url decode the iv")}try{o=E(i.tag)}catch{throw new R("Failed to base64url decode the tag")}return e4(e,t,r,n,o)}default:throw new C('Invalid or unsupported "alg" (JWE Algorithm) header value')}},e9=function(e,t,r,i,n){let o;if(void 0!==n.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!o.has(a))throw new C(`Extension Header Parameter "${a}" is not recognized`);if(void 0===n[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&void 0===i[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)},te=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function tt(e,t,r){let i,n,o,a,s,c,u;if(!eu(e))throw new R("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new R("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new R("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new R("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new R("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new R("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new R("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new R("JWE AAD incorrect type");if(void 0!==e.header&&!eu(e.header))throw new R("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!eu(e.unprotected))throw new R("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=E(e.protected);i=JSON.parse(d.decode(t))}catch{throw new R("JWE Protected Header is invalid")}if(!es(i,e.header,e.unprotected))throw new R("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...i,...e.header,...e.unprotected};if(e9(R,new Map,r?.crit,i,l),void 0!==l.zip)throw new C('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:f,enc:y}=l;if("string"!=typeof f||!f)throw new R("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof y||!y)throw new R("missing JWE Encryption Algorithm (enc) in JWE Header");let g=r&&te("keyManagementAlgorithms",r.keyManagementAlgorithms),m=r&&te("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(g&&!g.has(f)||!g&&f.startsWith("PBES2"))throw new x('"alg" (Algorithm) Header Parameter value not allowed');if(m&&!m.has(y))throw new x('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{n=E(e.encrypted_key)}catch{throw new R("Failed to base64url decode the encrypted_key")}let v=!1;"function"==typeof t&&(t=await t(i,e),v=!0);try{o=await e7(f,t,n,l,r)}catch(e){if(e instanceof TypeError||e instanceof R||e instanceof C)throw e;o=eT(y)}if(void 0!==e.iv)try{a=E(e.iv)}catch{throw new R("Failed to base64url decode the iv")}if(void 0!==e.tag)try{s=E(e.tag)}catch{throw new R("Failed to base64url decode the tag")}let b=h.encode(e.protected??"");c=void 0!==e.aad?p(b,h.encode("."),h.encode(e.aad)):b;try{u=E(e.ciphertext)}catch{throw new R("Failed to base64url decode the ciphertext")}let w={plaintext:await ea(y,o,u,a,s,c)};if(void 0!==e.protected&&(w.protectedHeader=i),void 0!==e.aad)try{w.additionalAuthenticatedData=E(e.aad)}catch{throw new R("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(w.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(w.unprotectedHeader=e.header),v)?{...w,key:t}:w}async function tr(e,t,r){if(e instanceof Uint8Array&&(e=d.decode(e)),"string"!=typeof e)throw new R("Compact JWE must be a string or Uint8Array");let{0:i,1:n,2:o,3:a,4:s,length:c}=e.split(".");if(5!==c)throw new R("Invalid Compact JWE");let u=await tt({ciphertext:a,iv:o||void 0,protected:i,tag:s||void 0,encrypted_key:n||void 0},t,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return"function"==typeof t?{...l,key:u.key}:l}async function ti(e,t,r){if(!eu(e))throw new R("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(eu))throw new R("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new R("JWE Recipients has no members");for(let i of e.recipients)try{return await tt({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new B}let tn=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:S(e)};if(!u(e))throw TypeError(ee(e,...ei,"Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:i,use:n,...o}=await c.subtle.exportKey("jwk",e);return o};async function to(e){return eN(e)}async function ta(e){return eK(e)}async function ts(e){return tn(e)}let tc=async function(e,t,r,i,n={}){let o,a,s;switch(e2(e,r,"encrypt"),r=await ej.normalizePublicKey?.(r,e)||r,e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!em(r))throw new C("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=n,{epk:l}=n;l||(l=(await eg(r)).privateKey);let{x:h,y:d,crv:f,kty:p}=await ts(l),y=await ey(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?eI(t):parseInt(e.slice(-5,-2),10),c,u);if(a={epk:{x:h,crv:f,kty:p}},"EC"===p&&(a.epk.y=d),c&&(a.apu=S(c)),u&&(a.apv=S(u)),"ECDH-ES"===e){s=y;break}s=i||eT(t);let g=e.slice(-6);o=await ef(g,y,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=i||eT(t),o=await ek(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=i||eT(t);let{p2c:c,p2s:u}=n;({encryptedKey:o,...a}=await e_(e,r,s,c,u));break}case"A128KW":case"A192KW":case"A256KW":s=i||eT(t),o=await ef(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=i||eT(t);let{iv:c}=n;({encryptedKey:o,...a}=await e5(e,r,s,c));break}default:throw new C('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:o,parameters:a}},tu=Symbol();class tl{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,i,n,o,a;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new R("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!es(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new R("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let s={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(e9(R,new Map,t?.crit,this._protectedHeader,s),void 0!==s.zip)throw new C('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:u}=s;if("string"!=typeof c||!c)throw new R('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof u||!u)throw new R('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);{let n;({cek:i,encryptedKey:r,parameters:n}=await tc(c,u,e,this._cek,this._keyManagementParameters)),n&&(t&&tu in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}o=this._protectedHeader?h.encode(S(JSON.stringify(this._protectedHeader))):h.encode(""),this._aad?(a=S(this._aad),n=p(o,h.encode("."),h.encode(a))):n=o;let{ciphertext:l,tag:f,iv:y}=await e6(u,this._plaintext,i,this._iv,n),g={ciphertext:S(l)};return y&&(g.iv=S(y)),f&&(g.tag=S(f)),r&&(g.encrypted_key=S(r)),a&&(g.aad=a),this._protectedHeader&&(g.protected=d.decode(o)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class th{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class td{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){let r=new th(this,e,{crit:t?.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(){let e;if(!this._recipients.length)throw new R("at least one recipient must be added");if(1===this._recipients.length){let[e]=this._recipients,t=await new tl(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(e.unprotectedHeader).encrypt(e.key,{...e.options}),r={ciphertext:t.ciphertext,iv:t.iv,recipients:[{}],tag:t.tag};return t.aad&&(r.aad=t.aad),t.protected&&(r.protected=t.protected),t.unprotected&&(r.unprotected=t.unprotected),t.encrypted_key&&(r.recipients[0].encrypted_key=t.encrypted_key),t.header&&(r.recipients[0].header=t.header),r}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!es(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new R("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:n}=i;if("string"!=typeof n||!n)throw new R('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===n||"ECDH-ES"===n)throw new R('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof i.enc||!i.enc)throw new R('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==i.enc)throw new R('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=i.enc;if(e9(R,new Map,r.options.crit,this._protectedHeader,i),void 0!==i.zip)throw new C('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let t=eT(e),r={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){let n=this._recipients[i],o={};r.recipients.push(o);let a=({...this._protectedHeader,...this._unprotectedHeader,...n.unprotectedHeader}).alg.startsWith("PBES2")?2048+i:void 0;if(0===i){let e=await new tl(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(t).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(n.unprotectedHeader).setKeyManagementParameters({p2c:a}).encrypt(n.key,{...n.options,[tu]:!0});r.ciphertext=e.ciphertext,r.iv=e.iv,r.tag=e.tag,e.aad&&(r.aad=e.aad),e.protected&&(r.protected=e.protected),e.unprotected&&(r.unprotected=e.unprotected),o.encrypted_key=e.encrypted_key,e.header&&(o.header=e.header);continue}let{encryptedKey:s,parameters:c}=await tc(n.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,e,n.key,t,{p2c:a});o.encrypted_key=S(s),(n.unprotectedHeader||c)&&(o.header={...n.unprotectedHeader,...c})}return r}}function tf(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new C(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function tp(e,t,r){if("sign"===r&&(t=await ej.normalizePrivateKey(t,e)),"verify"===r&&(t=await ej.normalizePublicKey(t,e)),u(t))return X(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(ee(t,...ei));return c.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw TypeError(ee(t,...ei,"Uint8Array"))}let ty=async(e,t,r,i)=>{let n=await tp(e,t,"verify");eE(e,n);let o=tf(e,n.algorithm);try{return await c.subtle.verify(o,n,r,i)}catch{return!1}};async function tg(e,t,r){let i,n;if(!eu(e))throw new j("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new j('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new j("JWS Protected Header incorrect type");if(void 0===e.payload)throw new j("JWS Payload missing");if("string"!=typeof e.signature)throw new j("JWS Signature missing or incorrect type");if(void 0!==e.header&&!eu(e.header))throw new j("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let t=E(e.protected);o=JSON.parse(d.decode(t))}catch{throw new j("JWS Protected Header is invalid")}if(!es(o,e.header))throw new j("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...o,...e.header},s=e9(j,new Map([["b64",!0]]),r?.crit,o,a),c=!0;if(s.has("b64")&&"boolean"!=typeof(c=o.b64))throw new j('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=a;if("string"!=typeof u||!u)throw new j('JWS "alg" (Algorithm) Header Parameter missing or invalid');let l=r&&te("algorithms",r.algorithms);if(l&&!l.has(u))throw new x('"alg" (Algorithm) Header Parameter value not allowed');if(c){if("string"!=typeof e.payload)throw new j("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new j("JWS Payload must be a string or an Uint8Array instance");let f=!1;"function"==typeof t&&(t=await t(o,e),f=!0),e2(u,t,"verify");let y=p(h.encode(e.protected??""),h.encode("."),"string"==typeof e.payload?h.encode(e.payload):e.payload);try{i=E(e.signature)}catch{throw new j("Failed to base64url decode the signature")}if(!await ty(u,t,i,y))throw new H;if(c)try{n=E(e.payload)}catch{throw new j("Failed to base64url decode the payload")}else n="string"==typeof e.payload?h.encode(e.payload):e.payload;let g={payload:n};return(void 0!==e.protected&&(g.protectedHeader=o),void 0!==e.header&&(g.unprotectedHeader=e.header),f)?{...g,key:t}:g}async function tm(e,t,r){if(e instanceof Uint8Array&&(e=d.decode(e)),"string"!=typeof e)throw new j("Compact JWS must be a string or Uint8Array");let{0:i,1:n,2:o,length:a}=e.split(".");if(3!==a)throw new j("Invalid Compact JWS");let s=await tg({payload:n,protected:i,signature:o},t,r),c={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...c,key:s.key}:c}async function tv(e,t,r){if(!eu(e))throw new j("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(eu))throw new j("JWS Signatures missing or incorrect type");for(let i of e.signatures)try{return await tg({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch{}throw new H}let tb=e=>Math.floor(e.getTime()/1e3),tw=60,t_=3600,tS=86400,tA=604800,tE=0x1e187e0,tk=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tO=e=>{let t;let r=tk.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let i=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(i*tw);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(i*t_);break;case"day":case"days":case"d":t=Math.round(i*tS);break;case"week":case"weeks":case"w":t=Math.round(i*tA);break;default:t=Math.round(i*tE)}return"-"===r[1]||"ago"===r[4]?-t:t},tP=e=>e.toLowerCase().replace(/^application\//,""),tx=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),tC=(e,t,r={})=>{let i,n;try{i=JSON.parse(d.decode(t))}catch{}if(!eu(i))throw new I("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||tP(e.typ)!==tP(o)))throw new O('unexpected "typ" JWT header value',i,"typ","check_failed");let{requiredClaims:a=[],issuer:s,subject:c,audience:u,maxTokenAge:l}=r,h=[...a];for(let e of(void 0!==l&&h.push("iat"),void 0!==u&&h.push("aud"),void 0!==c&&h.push("sub"),void 0!==s&&h.push("iss"),new Set(h.reverse())))if(!(e in i))throw new O(`missing required "${e}" claim`,i,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(i.iss))throw new O('unexpected "iss" claim value',i,"iss","check_failed");if(c&&i.sub!==c)throw new O('unexpected "sub" claim value',i,"sub","check_failed");if(u&&!tx(i.aud,"string"==typeof u?[u]:u))throw new O('unexpected "aud" claim value',i,"aud","check_failed");switch(typeof r.clockTolerance){case"string":n=tO(r.clockTolerance);break;case"number":n=r.clockTolerance;break;case"undefined":n=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,p=tb(f||new Date);if((void 0!==i.iat||l)&&"number"!=typeof i.iat)throw new O('"iat" claim must be a number',i,"iat","invalid");if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new O('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>p+n)throw new O('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new O('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=p-n)throw new P('"exp" claim timestamp check failed',i,"exp","check_failed")}if(l){let e=p-i.iat;if(e-n>("number"==typeof l?l:tO(l)))throw new P('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(e<0-n)throw new O('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i};async function tB(e,t,r){let i=await tm(e,t,r);if(i.protectedHeader.crit?.includes("b64")&&!1===i.protectedHeader.b64)throw new I("JWTs MUST NOT use unencoded payload");let n={payload:tC(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"==typeof t?{...n,key:i.key}:n}async function tR(e,t,r){let i=await tr(e,t,r),n=tC(i.protectedHeader,i.plaintext,r),{protectedHeader:o}=i;if(void 0!==o.iss&&o.iss!==n.iss)throw new O('replicated "iss" claim header parameter mismatch',n,"iss","mismatch");if(void 0!==o.sub&&o.sub!==n.sub)throw new O('replicated "sub" claim header parameter mismatch',n,"sub","mismatch");if(void 0!==o.aud&&JSON.stringify(o.aud)!==JSON.stringify(n.aud))throw new O('replicated "aud" claim header parameter mismatch',n,"aud","mismatch");let a={payload:n,protectedHeader:o};return"function"==typeof t?{...a,key:i.key}:a}class tj{constructor(e){this._flattened=new tl(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let tI=async(e,t,r)=>{let i=await tp(e,t,"sign");return eE(e,i),new Uint8Array(await c.subtle.sign(tf(e,i.algorithm),i,r))};class tT{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new j("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!es(this._protectedHeader,this._unprotectedHeader))throw new j("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...this._protectedHeader,...this._unprotectedHeader},n=e9(j,new Map([["b64",!0]]),t?.crit,this._protectedHeader,i),o=!0;if(n.has("b64")&&"boolean"!=typeof(o=this._protectedHeader.b64))throw new j('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=i;if("string"!=typeof a||!a)throw new j('JWS "alg" (Algorithm) Header Parameter missing or invalid');e2(a,e,"sign");let s=this._payload;o&&(s=h.encode(S(s)));let c=p(r=this._protectedHeader?h.encode(S(JSON.stringify(this._protectedHeader))):h.encode(""),h.encode("."),s),u={signature:S(await tI(a,e,c)),payload:""};return o&&(u.payload=d.decode(s)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=d.decode(r)),u}}class tU{constructor(e){this._flattened=new tT(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class tM{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class tN{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){let r=new tM(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new j("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],i=new tT(this._payload);i.setProtectedHeader(r.protectedHeader),i.setUnprotectedHeader(r.unprotectedHeader);let{payload:n,...o}=await i.sign(r.key,r.options);if(0===t)e.payload=n;else if(e.payload!==n)throw new j("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(o)}return e}}function tK(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class tH{constructor(e={}){if(!eu(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:tK("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:tK("setNotBefore",tb(e))}:this._payload={...this._payload,nbf:tb(new Date)+tO(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:tK("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:tK("setExpirationTime",tb(e))}:this._payload={...this._payload,exp:tb(new Date)+tO(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:tb(new Date)}:e instanceof Date?this._payload={...this._payload,iat:tK("setIssuedAt",tb(e))}:"string"==typeof e?this._payload={...this._payload,iat:tK("setIssuedAt",tb(new Date)+tO(e))}:this._payload={...this._payload,iat:tK("setIssuedAt",e)},this}}class tD extends tH{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new tU(h.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new I("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}class tL extends tH{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new tj(h.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}let tz=(e,t)=>{if("string"!=typeof e||!e)throw new T(`${t} missing or invalid`)};async function t$(e,t){let r;if(!eu(e))throw TypeError("JWK must be an object");if(t??(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":tz(e.crv,'"crv" (Curve) Parameter'),tz(e.x,'"x" (X Coordinate) Parameter'),tz(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":tz(e.crv,'"crv" (Subtype of Key Pair) Parameter'),tz(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":tz(e.e,'"e" (Exponent) Parameter'),tz(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":tz(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new C('"kty" (Key Type) Parameter missing or unsupported')}let i=h.encode(JSON.stringify(r));return S(await l(t,i))}async function tW(e,t){t??(t="sha256");let r=await t$(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function tF(e,t){let r={...e,...t?.header};if(!eu(r.jwk))throw new j('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let i=await eZ({...r.jwk,ext:!0},r.alg);if(i instanceof Uint8Array||"public"!==i.type)throw new j('"jwk" (JSON Web Key) Header Parameter must be a public key');return i}function tV(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new C('Unsupported "alg" value for a JSON Web Key Set')}}function tJ(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(tG)}function tG(e){return eu(e)}function tq(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class tY{constructor(e){if(this._cached=new WeakMap,!tJ(e))throw new U("JSON Web Key Set malformed");this._jwks=tq(e)}async getKey(e,t){let{alg:r,kid:i}={...e,...t?.header},n=tV(r),o=this._jwks.keys.filter(e=>{let t=n===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:a,length:s}=o;if(0===s)throw new M;if(1!==s){let e=new N,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of o)try{yield await tX(t,e,r)}catch{}},e}return tX(this._cached,a,r)}}async function tX(e,t,r){let i=e.get(t)||e.set(t,{}).get(t);if(void 0===i[r]){let e=await eZ({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new U("JSON Web Key Set members must be public keys");i[r]=e}return i[r]}function tZ(e){let t=new tY(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>tq(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}let tQ=async(e,t,r)=>{let i,n;let o=!1;"function"==typeof AbortController&&(i=new AbortController,n=setTimeout(()=>{o=!0,i.abort()},t));let a=await fetch(e.href,{signal:i?i.signal:void 0,redirect:"manual",headers:r.headers}).catch(e=>{if(o)throw new K;throw e});if(void 0!==n&&clearTimeout(n),200!==a.status)throw new k("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new k("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function t0(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}if("undefined"==typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){let e="jose",t="v5.6.3";o=`${e}/${t}`}let t1=Symbol();function t2(e,t){return!!(!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&eu(e.jwks)&&Array.isArray(e.jwks.keys)&&Array.prototype.every.call(e.jwks.keys,eu))}class t8{constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[t1]!==void 0&&(this._cache=t?.[t1],t2(t?.[t1],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=tZ(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof M&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&t0()&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);o&&!e.has("User-Agent")&&(e.set("User-Agent",o),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=tQ(this._url,this._timeoutDuration,this._options).then(e=>{this._local=tZ(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function t3(e,t){let r=new t8(e,t),i=async(e,t)=>r.getKey(e,t);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}class t6 extends tH{encode(){let e=S(JSON.stringify({alg:"none"})),t=S(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new I("Unsecured JWT must be a string");let{0:i,1:n,2:o,length:a}=e.split(".");if(3!==a||""!==o)throw new I("Invalid Unsecured JWT");try{if(r=JSON.parse(d.decode(E(i))),"none"!==r.alg)throw Error()}catch{throw new I("Invalid Unsecured JWT")}return{payload:tC(r,E(n),t),header:r}}}let t5=S,t4=E;function t7(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(d.decode(t4(t)));if(!eu(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function t9(e){let t,r;if("string"!=typeof e)throw new I("JWTs must use Compact JWS serialization, JWT must be a string");let{1:i,length:n}=e.split(".");if(5===n)throw new I("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new I("Invalid JWT");if(!i)throw new I("JWTs must contain a payload");try{t=t4(i)}catch{throw new I("Failed to base64url decode the payload")}try{r=JSON.parse(d.decode(t))}catch{throw new I("Failed to parse the decoded payload as JSON")}if(!eu(r))throw new I("Invalid JWT Claims Set");return r}async function re(e,t){let r,i,n;switch(e){case"HS256":case"HS384":case"HS512":r=parseInt(e.slice(-3),10),i={name:"HMAC",hash:`SHA-${r}`,length:r},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return D(new Uint8Array((r=parseInt(e.slice(-3),10))>>3));case"A128KW":case"A192KW":case"A256KW":i={name:"AES-KW",length:r=parseInt(e.slice(1,4),10)},n=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":i={name:"AES-GCM",length:r=parseInt(e.slice(1,4),10)},n=["encrypt","decrypt"];break;default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return c.subtle.generateKey(i,t?.extractable??!1,n)}function rt(e){let t=e?.modulusLength??2048;if("number"!=typeof t||t<2048)throw new C("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function rr(e,t){let r,i;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:rt(t)},i=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:rt(t)},i=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:rt(t)},i=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"];break;case"EdDSA":{i=["sign","verify"];let e=t?.crv??"Ed25519";switch(e){case"Ed25519":case"Ed448":r={name:e};break;default:throw new C("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{i=["deriveKey","deriveBits"];let e=t?.crv??"P-256";switch(e){case"P-256":case"P-384":case"P-521":r={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":r={name:e};break;default:throw new C("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new C('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return c.subtle.generateKey(r,t?.extractable??!1,i)}async function ri(e,t){return rr(e,t)}async function rn(e,t){return re(e,t)}let ro="WebCryptoAPI"}}]);